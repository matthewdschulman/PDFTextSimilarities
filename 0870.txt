Force-tracking impedance control for manipulators mounted on
compliant bases
Loris Roveda
1;2
, Federico Vicentini
1
, Nicola Pedrocchi
1
and Lorenzo Molinari Tosatti
1
Abstract— The paper presents a control law for interaction
tasks with environments of unknown geometrical and mechan-
ical properties by manipulators mounted on compliant bases.
Based on force-tracking impedance controls, the control strat-
egy allows the execution of such class of tasks using the estima-
tion of base position as a feedback in the control loop, requiring
at the same time the on-line estimation of the environment
stiffness. The properties of the control using non co-located
sensors and the dynamic conﬁguration of the coupled base-
robot-environment system are studied. An Extended Kalman
Filter is used for the estimation of the environment because of
measurement uncertainties and errors in compound interaction
model. The base is modelled as a second-order physical system
with known parameters (ofﬂine identiﬁcation before the task
execution) and the base position is estimated from the measure
of interaction forces. The grounding position estimation and
the deﬁned control law are validated in simulation and with
experiments, especially dedicated to an insertion-assembly task.
Control laws with and without the base compensation in the
feedback loop are compared, verifying the effectiveness of the
developed control law.
I. INTRODUCTION
Explicit force or deformation reference cannot be directly
obtained in impedance control, undermining the suitability of
impedance control in those technological tasks that require
some degree of process control over the interaction. Many
efforts have been, in fact, made to achieve a force/position
tracking with impedance control despite the lack of knowl-
edge of the environmental stiffness and location. Primarily,
force-tracking impedance control involves the generation of
a reference motion as a function of the force error [1], [2],
under the condition that the environment stiffness is variously
unknown, i.e. estimated as a function of the measured force.
Dynamical properties of interacting environments can be
loosely predictable to a vast class of useful conditions [3].
When robot manipulators are mounted on compliant bases,
however, the base deformation can signiﬁcantly inﬂuence
the interaction accuracy in a wide critical bandwith [4],
including contacts transients. The base elasticity is, in fact,
remarkably crucial from a stability point of view due to
the presence of robot-base coupled dynamics. This is var-
iuously the case of ﬂexible-structure-mounted manipulators,
macro-mini manipulation systems, free-ﬂoating or mobile-
platform mounted manipulators, which are very relevant
cases of robots used in naval, aerial, hazardous (nuclear,
1
Institute of Industrial Technologies and Automation (ITIA) of Italian
National Research Council (CNR), via Bassini, 15 - 20133 Milan, Italy
2
Politecnico di Milano, Department of Mechanical Engineering, via La
Masa 1, 20156 Milan, Italy
federico.vicentini@itia.cnr.it
chemical) remoted applications or typical industrial moving-
base mounting (e.g. cranes, rails).
In such cases, the coupled dynamics with internal forces
depends on both mechanical (mass, damping and stiffness
properties of the base and the robot control) and kine-
matics conﬁguration (instantaneous trajectory, pose in the
workspace) conditions. Some works are dedicated to assign
explicit values to such relationship in the case of gravitation-
free application [5], where motion trajectories are planned
along minimum-energy conﬁgurations of a Coupling Map, or
in the case of standard gravitation load in order to highlight
the inﬂuence of single terms on the coupled-system dynamics
[6]. More research has been instead dedicated to model-
based control, focusing on the accurate position control in
noncontact operations using inertial damping [7], [8], [9] or
two-time scale controllers (fast joint torque control and slow
vibration damping from the base motion/stiffness feedback)
[10], [11]. Similar explicit/feedback approaches have also
been extended to interaction tasks [12], [13] Impedance
controllers considering known [14] or bounded [15] base
stiffness in order to retune the actual manipulator stiffness
to the desired one are extendedly investigated in terms of
passivity for the case of quasi-static gravity load [14] and
robustness/stability of control [15] also in case of contact
bandwidth.
Fig. 1: Model and notation of an impedace-controlled ma-
nipulator interacting with the environment ()
e
and mounted
on a compliant base ()
b
.
2014 IEEE International Conference on Robotics & Automation (ICRA)
Hong Kong Convention and Exhibition Center
May 31 - June 7, 2014. Hong Kong, China
978-1-4799-3684-7/14/$31.00 ©2014 IEEE 760
Fig. 2: Control ﬂow-chart for a force-tracking (f
d
) application. Ofﬂine identiﬁcation of base paramaters (left) provide online
estimation of base deformation (x
b
) to be compensated.
In this paper we consider interaction tasks performed in
impedance control with a required degree of force control
along some of task directions. It is therefore required (i) to
compensate for any deformation of the base derived from
the robot dynamics and the contact-interaction dynamics,
(ii) estimating the base deformation and the environment
dynamical properties in order (iii) to set a pose reference for
the impedance controller. While the environment estimation
through an Extended Kalman Filter (EKF) has been already
presented [16] for assembly tasks, the elastic response of the
base in the closed-loop requires either a measurement or an
estimation of its deformation. In the case of ﬂexible-structure
mounted manipulators, suitable sensor-based conﬁgurations
are limited to embedded inertial units because of practical
considerations. Alternatively, measurements of the base can
be also replaced by an indrect estimation from the end-
effector contact forces. In this case, however, tip forces
propagating at the manipulator base could be negatively
affected by the sensibility and accuracy of the measures
themselves and by the dynamical model of the manipulator
(i.e. the control) coupling the tip-base forces.
We therefore consider here a model-base estimation of the
base displacement using a regular ofﬂine model identiﬁ-
cation for the base dynamical parameters and an online
estimator whose ﬁlter parameters can be tuned according
to the base and environment behavior. The estimation of
the base displacement resulting from an interaction force-
tracking task is evaluated with an absolute position sensor
and the force-tracking performances evaluated in terms of
force step change response during the task execution. The
following sections are dedicated to the formulation of the
coupled-system dynamics and the analysis of the effects of
model parameters on the system behavior in order to suitable
design both the control law and the estimators.
II. PROBLEM FORMULATION AND CONTROL
MODEL
The compliant-base mounted robot problem is formulated
considering simpliﬁed linear models for the base dynam-
ics, neglecting nonlinearities (e.g. nonlinear stiffness, back-
lashes). The environment model is assumed to be loosely
damped, with time-variant stiffness, as in many cases of
unknown environments (models and notation in Fig. 1).
For the purpose of simulation and system analysis, the
environment stiffness K
e
is considered constant, while in
experiments it is eventually variable and estimated as
^
K
e
.
The force-tracking impedance control (Fig. 2) is realized
deﬁning a contact forcef
0
pattern acting on the environment
during the execution of the task, dynamically forwarded as a
pose(-velocity) reference x
0
. The dynamics of the coupled
base-robot-environment system applies quasi-statically in
terms of deformations for ciritically damped elements. The
resulting pose reference is therefore computed as a function
of the globally interacting stiffnesses and the interaction
force. The designed control law enables, in fact, the com-
pensation of the base compliance during the execution of
the task:
x
0
=K
p
(
^
K
 1
e
e
f
  ^ x
b
) (1)
e
f
=f
0
 f (2)
^
K
e
 
^
K
e
(f; x
e
; ^ x
b
) (3)
^ x
b
 ^ x
b
(
^
M
b
;
^
D
b
;
^
K
b
) (4)
where forces f are sampled at the robot TCP in position
x, x
e
is the environment position and x
e
is the nominal
environment deformation that, unlike the case of rigid base,
has to be compensated for the base deformation ^ x
b
. Clearly,
x
e
= x holds when the robot and the environment are in
contact. Dynamics parameters of the base
^
M
b
;
^
D
b
;
^
K
b
are
identiﬁed ofﬂine (see Fig. 2 and Section IV-A) and assumed
761
to be constant along the execution of the task. The base
compliance compensation is therefore two-fold: it recovers
the dynamics response of the equivalent robot impedance
behavior w.r.t. the environment (see equations (1)-(2)) and it
enables the actual estimation of the environment stiffness that
is mandatory for expressing the tracking of f
0
as a motion
term in the impedance model (see equations (1)-(3)) . The
inner control loop (task space impedance in Fig. 2), in fact,
is performed by the model-based control
D _ x +Kx =f (5)
of the lightweight manipulator at mid/fast rate (1  5ms),
synchronously with the estimation of
^
K
e
[16]. The defor-
mation term x = x + x
0
is the difference between the
actual robot pose and the desired one x
0
as generated in
(1).
Such Cartesian pure impedance behavior is obtained by the
control law [17]:
u = J(q)
T
f +g(q) (6)
where J is the Jacobian matrix of the robot and g(q) is the
gravitational term of the robot. The control variable in (6)
provides the joint-decoupled [18] dynamics in the task space
that allows the robot to be considered as a pure impedance
as in (5) and, consequently, in (1)-(3). The designed outer
control law in (1) is performed at slower rate (10 50ms) in
order to ensure the steady state of the environment observer,
with reference pose update tuned by the K
p
proportional
gain on the force-tracking error.
A. Closed-loop Coupled-System Dynamics
The dynamics of the coupled system made by compliant
base, controlled robot and forced environment is therefore
deﬁned as follow:
8
>
>
>
<
>
>
>
:
D( _ x +  _ x
0
) +K(x + x
0
) =f
M
b
 x
b
+D
b
_ x
b
+K
b
x
b
=f
b
X
i
(D
i
e
_ x
i
e
+K
i
e
x
i
e
) =f
(7)
8i = 1;:::;N contact points, where f
b
is the contact force
effect at the base, due to the impedance balance in (5). In
the Laplace domain, the system in (7) becomes:
(
(Ds +K)(X(s) X
0
(s)) =F
(M
b
s
2
+D
b
s +K
b
)X
b
(s) =F
b
(8)
where the interaction discrete-points model is replaced by
(3) and the control law in (1) becomes
X
0
(s) =K
p

E
f
K
e
 X
b
(s)

(9)
replacing equation (9) in the controlled system dynamics (8),
the force balance is expressed as:
(Ds +K)

X(s) K
p

E
f
K
e
 X
b
(s)

=F (10)
Considering the base model in (8), the base displacement is
X
b
(s) =
F
0
 E
f
M
b
s
2
+D
b
s +K
b
(11)
that returns the closed-loop system
(Ds +K)X(s) =
K
p

Ds +K
M
b
s
2
+D
b
s +K
b
+
Ds +K K
e
K
e

E
f
+

1 +K
p
Ds +K
M
b
s
2
+D
b
s +K
b

F
0
(12)
ConsideringF
0
a stable closed-loop reference, any instability
in the system (12) could only arise from E
f
. The force-
tracking error transfer function G
ft
(s) is then expressed as:
G
ft
(s) =
E
f
X(s)
=
K
e
K
p
b
0
+b
1
s +b
2
s
2
+b
3
s
3
a
0
+a
1
s +a
2
s
2
+a
3
s
3
(13)
where:
b
0
=K +K
b
a
0
=K
e
K +KK
b
 K
e
K
b
b
1
=KD
b
+K
b
D a
1
=K
e
D +KD
b
+K
b
D K
e
D
b
b
2
=KM
b
+DD
b
a
2
=M
b
K +D
b
D M
b
K
e
b
3
=M
b
D a
3
=M
b
D
The close-loop system behavior depends predominantly on
the combination of environmental and base stiffnesses and
the control gain K
p
. The formulation in (12)-(13) is there-
fore used for analyzing the response of a single degree-of-
freedom simulated system (in Section III) in relationship
with major inﬂuencing parameters. Results form the analysis
phase are then used for designing the actual control law and
tuning the observers in (1) in a real system performing a
controlled-force insertion task (in Section IV).
III. ANALYSIS OF COUPLED-SYSTEM DYNAMICS
In order to evaluate the inﬂuence of the to-be-compensated
compliance of the base, some single-DoF simulations of the
model in (7) have been executed, varying the values of base,
controlled robot and interacting environment stiffnesses (K
b
,
K and K
e
, respectively).
A. Inﬂuence of base compliance on tracked force
In force-tracking applications, the base deformation results
in a degradation of time response performances due to
the disturbances introduced by an additional non-modelled
compliance. A feedforward step reference X
0
in robot pose
(computed as in (1) according to desired F
0
) produces, in
fact, a regime loss of applied force F
1
absorbed by the
base deformation. The magnitude of such effective force loss
w.r.t. the rigid base case in depicted in Fig. 3. The greater
the ratio between the environment stiffness and the base
stiffness
1
, the larger the F
1
to recover by the feedback
action on sampled force (f in Fig. 2).
Estimating the effective interaction point w.r.t. which the
1
Recall that stiff environments, relatively-soft mountings and compliant
behaviors in impedance control are somehow the elective conﬁguration in
many manipulation tasks.
762
10
?4
10
?3
0
5
10
15
20
25
30
35
40
C
b
[m/N]
?F
∞
[N]
 
 
Ke = 500N/m
Ke = 1000N/m
Ke = 5000N/m
Ke = 10000N/m
Ke = 50000N/m
Ke = 100000N/m
Fig. 3: Magnitude of force lost in relationship with base
complianceC
b
=K
 1
b
for some magnitudes of environment
stiffnesses K
e
.
control law (1) provides the reference pose, results in a faster
response. The feedback response to a F
0
step reference is
depicted in Fig. 4 with and without the base compensation.
Without compensation, the pose reference updated by K
p
gain on the basis of the force tracking error is systematically
underestimated because of the displacement of the base. The
model of base deformations, instead, enables the controller
to observe the actual conﬁguration under dynamics balance.
The response peformances, nonetheless, depend on the readi-
ness and accuracy of the base deformation observer.
B. Inﬂuence of stiffnesses on closed-loop control gain
The closed-loop control gain K
?
p
has the equivalent effect
of increasing the stiffness of the environment in order to
augment the capability of the robot control in rejecting the
force error e
f
. Analyzing the transfer function G
ft
in (13),
is possible to deﬁne a map of the critical gains K
?
p
as a
function of the system stiffnesses conﬁguration (see Fig. 5).
Morphologically, the gain landscape is homogenous (from
500 to 1000 N/m) because of the softness of robot impedance
0 2 4 6 8 10 12 14 16 18 20
?60
?50
?40
?30
?20
?10
0
10
F
e|y
[N]
time [s]
 
 
force reference
w/o observer
?xb compesated
Fig. 4: Close-loop response to a F
0
step.
400
400 400
400 400
600
600
600 600
600 600
600 600
600 600
600
800
800 800
800
800
800 800
800 800
800 800
800
1000 1000
1000
1000
1000
1000 1000
1000 1000
K
b
[N/m]
K
e
[N/m]
K
?
p
(Kr = 500N/m)
10
3
10
4
10
3
10
4
Fig. 5: Map of values of critical gainK
?
p
given a combination
of the stiffness of the robot base K
b
and the stiffness of the
interacting environment K
e
. Single view for robot stiffness
K = 500 N=m. The closed loop stability is achieved for
any combination of robot base and interacting environment.
The plot shows that higher values for the proportional gain
can be used as the interacting environment becomes softer
and the robot base becomes stiffer.
behavior (aiming at limiting excessive force overshoots at the
contact detection) and all dampings are imposed at critical
values. Therefore, the control stiffness could be safely in-
creased tuning the gain uniformly in the region withK
e
both
larger than K
b
and 10e4N=m (relatively soft). Conversely,
in the complemenary region, the system may trigger natural
frequencies placed according to the stiffnesses conﬁguration.
IV. EXPERIMENTAL EXAMPLE
The experimental set-up (see Fig. 6) includes a lightweight
manipulator mounted on a cart allowing a single horizon-
tal movement. The stiffnesses of the experimental systems
are possibly selected in order to have some of the worst
case conditions discussed in Section III: K
b
is equal to
5000 N=m, the environment has low stiffness in vertical
direction ( 1000 N=m) and medium-hard stiffness on
planar directions ( 50000N=m). A LASER position sensor
is used for the evaluation of the base position estimation.
A. Base ofﬂine estimation
The online estimation of the base position relies on previous
knowledge of the dynamic parameters of the mounting.
The base model is obtained using a regular identiﬁcation
procedure on motion data (i.e. accelerations) sampled
2
at
the base during an auto-excitation provided by the robot in a
given conﬁguration. The pattern is a logarithmic [0 10]Hz
chirp of the end-effector pose along all 3 traslational and
3 rotational axes, with amplitude of 5 mm. The total chirp
duration is 200s and the reference pose of the robot is update
2
Accelerometers are only needed for the dynamic parameters identiﬁca-
tion procedure.
763
Fig. 6: Experimental setup for full rigid-body insertion task on soft environment. Robot mounted on 1 DoF compliant base.
every 5ms. Robot pose measurement (for force projection)
is updated at 200 Hz, acelerations at 2000 Hz. The base
model is evaluated through a modal analysis, deﬁning the
Frequency Response Funtions (FRFs) of the base system
between comanded robot poses and measured accelerations.
B. Force-tracked insertion task.
The assembly task (see [16] for discussion) is done in 4
major phases:
Phase A. Approach and contact detection.
Phase B. Exploration along translation components and on-
line estimation of
^
K
e
. The impedance control set-point x
0
is computed as a function of force-tracking error e
f
=
f
d
task
  f, with f
d
= [15N 15N 10N 0 0 0]
T
(rotational
components of x
0
are blocked).
Phase C. Assembly proper, enabling rotations for insertion
0 5 10 15 20 25 30 35 40 45 50
?12
?10
?8
?6
?4
?2
0
2
x
b
[mm]
time [s]
 
 
ˆ xb estimated
˜ xb measured
Fig. 7: Cart position during task execution.
and relying on
b
K
e
observed along the searching directions.
The set-point f
d
enables also torques.
Phase D. After tight assembly, on-line estimation of (possi-
bly changing)
b
K
e
.
During phases B and D, the base displacement x
b
is es-
timated and measured with the external sensor (see Fig.
7). Possible sources of x
b
estimation errors could include
ﬁlter time constants tuning, inaccurate force sampling and
inaccuracies in the linear mass-spring-damper model of the
base.
In Fig. 8 the effect of the base compensation along the
described task is displayed for a single selected direction
(Y ). During phase A, the robot is moving only inZ direction
and no force is measured in Y direction. During phase B,
reference force f
d
y
is set equal to 15N in order to achieve
smooth ﬁrst contact in Y . During phase C, f
d
y
has a lower
value in order to allow the rotation of the insertion geometry
without fails in the task execution. During phase D, the
reference force f
d
y
is set to 50N in order to have a tight
assembly of the parts (process requirement). Reference force
f
d
y
is superimposed as a step reference between the different
phases. In Fig. 8-(a) the task-D execution without base
compensation is entirely in charge of the force error gain,
while in Fig. 8-(b) the base estimation and compensation
allows a much faster f
d
y
response. It should be noted that
for all cases, regardless the base compensation, the measured
force in the contact phase (phase B) presents some spikes.
This could be due to the fact that the multi-point geometric
contact model is not taken into account and that the controller
is purely proportional. Additionally, some residual estimation
delays likely due to estimation-ﬁlter tuning combined with
force sampling rate, could affect the fastest phenomena in
the assembly.
764
0 5 10 15 20 25 30 35 40 45 50
?10
0
10
20
30
40
50
60
F
e|y
[N]
time [s]
 
 
force reference
w/o observer
0 5 10 15 20 25 30 35 40 45 50
?10
0
10
20
30
40
50
60
F
e|y
[N]
time [s]
 
 
force reference
?xb compesated
(a) (b)
Fig. 8: Force tracking along different phases of an assembly task without (a) and with (b) compensation of base deformation.
V. CONCLUSIONS
Based on force-tracking control laws, the introduced inter-
actin control strategy with compliant mounting has been
implemented and tested in a full rigid body assembly real
task. An impedance balance set-point has been generated
using the estimation of the base deformation due to the task
execution. The execution strategy uses distribution of forces
and the on-line estimate of the stiffness of the interacting
environment through an EKF. The developed control has
been compared with absence of compensation for the un-
known base position. Results show some promising effects
in control response. The introduced control strategy can
be fairly generalized in full rototranslation of the executed
task. As the impedance control decouples the robot 6 DoFs,
all task-space coordinates can be independently controlled
using the deﬁned control algorithm. The base compliance
observer can be expanded to full DoFs as well, being the
computation power linear and deterministic with the size
of EKF. Further experimental studies will consider a 3D (2
translations, 1 rotation) compliant base. In order to improve
the control performaces, a non-linear model of the robot base
is considered for upgrading the estimate, together with the
derivative terms in the control loop and nonlinearities in the
contact and environment stiffness observers.
ACKNOWLEDGMENTS
The authors would like to thank T. Dinon (CNR-ITIA) and
F. Paolucci (CNR-ITIA) for expertise, setup and experimen-
tal support.
REFERENCES
[1] H. Seraji and R. Colbaugh, “Force tracking in impedance control,”
The International Journal of Robotics Research, vol. 16, no. 1, pp.
97–117, 1997.
[2] S. Jung, T. C. Hsia, and R. G. Bonitz, “Force tracking impedance
control for robot manipulators with an unknown environment: Theory,
simulation, and experiment,” The International Journal of Robotics
Research, vol. 20, no. 9, pp. 765–774, 2001.
[3] E. Colgate and N. Hogan, “An analysis of contact instability in terms
of passive physical equivalents,” in Robotics and Automation, 1989.
Proceedings., 1989 IEEE International Conference on, May, pp. 404–
409.
[4] S. D. Eppinger and W. P. Seering, “Three dynamic problems in robot
force control,” IEEE Transactions on Robotics and Automation, vol. 8,
no. 6, p. 751, 1992.
[5] M. Torres and S. Dubowsky, “Path-planning for elastically constrained
space manipulator systems,” in Robotics and Automation, 1993. Pro-
ceedings., 1993 IEEE International Conference on, vol. 1, 1993, pp.
812–817.
[6] C. Wronka and M. Dunnigan, “Derivation and analysis of a dynamic
model of a robotic manipulator on a moving base,” Robotics and
Autonomous Systems, vol. 59, no. 10, pp. 758 – 769, 2011.
[7] B.-J. Yang, A. J. Calise, and J. I. Craig, “Adaptive output feedback
control of a ﬂexible base manipulator,” Journal of guidance, control,
and dynamics, vol. 30, no. 4, pp. 1068–1080, 2007.
[8] L. George and W. Book, “Inertial vibration damping control of a
ﬂexible base manipulator,” Mechatronics, IEEE/ASME Transactions
on, vol. 8, no. 2, pp. 268–271, 2003.
[9] K. Yoshida, D. Nenchev, and M. Uchiyama, “Moving base robotics
and reaction management control,” in Robotics Research, G. Giralt
and G. Hirzinger, Eds. Springer London, 2000, pp. 100–109.
[10] J. Y . Lew and S.-M. Moon, “A simple active damping control for com-
pliant base manipulators,” Mechatronics, IEEE/ASME Transactions on,
vol. 6, no. 3, pp. 305–310, 2001.
[11] J. Lin, Z. Huang, and P. Huang, “An active damping control of robot
manipulators with oscillatory bases by singular perturbation approach,”
Journal of Sound and Vibration, vol. 304, no. 12, pp. 345 – 360, 2007.
[12] J. Lew, “Contact control of ﬂexible micro/macro-manipulators,” in
Robotics and Automation, 1997. Proceedings., 1997 IEEE Interna-
tional Conference on, vol. 4, 1997, pp. 2850–2855.
[13] J. Lin, C. C. Lin, and H. Lo, “Hybrid position/force control of
robot manipulators mounted on oscillatory bases using adaptive fuzzy
control,” in Intelligent Control (ISIC), 2010 IEEE International Sym-
posium on, 2010, pp. 487–492.
[14] C. Ott, A. Albu-Schaffer, and G. Hirzinger, “A cartesian compliance
controller for a manipulator mounted on a ﬂexible structure,” in Intel-
ligent Robots and Systems, 2006 IEEE/RSJ International Conference
on. IEEE, 2006, pp. 4502–4508.
[15] T. Wongratanaphisan and M. Cole, “Robust impedance control of
a ﬂexible structure mounted manipulator performing contact tasks,”
Robotics, IEEE Transactions on, vol. 25, no. 2, pp. 445–451, 2009.
[16] F. V . Loris Roveda and L. M. Tosatti, “Deformation-tracking
impedance control in interaction with uncertain environments,” in
Intelligent Robots and Systems (IROS), 2013 IEEE/RSJ International
Conference on. IEEE, 2013.
[17] A. Albu-Sch¨ affer, C. Ott, and G. Hirzinger, “A uniﬁed passivity-
based control framework for position, torque and impedance control of
ﬂexible joint robots,” The International Journal of Robotics Research,
vol. 26, no. 1, pp. 23–39, 2007.
[18] C. Ott, A. Albu-Schaffer, A. Kugi, and G. Hirzinger, “Decoupling
based cartesian impedance control of ﬂexible joint robots,” in Robotics
and Automation, 2003. Proceedings. ICRA ’03. IEEE International
Conference on, vol. 3, 2003, pp. 3101–3107.
765
