A new method for parameter identiÞcation for
N-DOF hydraulic robots
Satoru Sakai
1
and Yuzo Maeshima
1
AbstractÑParameter identiÞcation for N-DOF hydraulic
robots (e.g., BigDog, PETMAN and developing automated
excavators) is not an old problem at all. Indeed, recent papers
still identify difÞcult parameters (the bulk modulus and the
ßow gain coefÞcients) by trial and error. This paper is the Þrst
report to solve this problem. First, new structural properties
of hydraulic robots are found in comparison with electric
robots and then the drawbacks of the conventional methods
are discussed. Second, by modifying one of the conventional
methods, a scientiÞc method is proposed and applied to an
actual hydraulic manipulator. Third, the validity of the pro-
posed method is conÞrmed by model validation. Remarkably,
the difÞcult parameters are identiÞed very well without any
trial and error. The proposed method is applicable to electric
robots even on the unknown inclination.
I. INTRODUCTION
Hydraulic robots are gaining popularity in robotics and
automation such as in the Þeld of construction, agriculture,
demining and rescue and so on. However, in comparison
with electric robots, hydraulic robots need experiment and
skip numerical simulation due to a lack of the modeling.
Not only numerical simulation but also model based control
(e.g., impedance control,adaptive control) are few. Since the
modeling is a foundation of design optimizations, currently,
it is oneof theserious roboticsproblemstodevelopthe good
procedure of the modeling.
Of course, the state space expression of hydraulic robots
is already known but the modeling needs the parameter
identiÞcation. In fact, even in recent papers on hydraulic
robots and the other hydraulic systems [7],[2],[9], difÞcult
parameters (the bulk modulus and the ßow gain coefÞcients)
are identiÞed by trial and error [8],[1],[10],[3].
Unfortunately,thedifÞcultyoftheparameteridentiÞcation
for hydraulic robots is not discussed clearly so far. Table I
gives new structural properties of hydraulicrobots to explain
the difÞculty whose details are discussed later again. First,
since the states do not always exist for a certain set of the
TABLE I
NEW STRUCTURAL PROPERTIESOF HYDRAULIC ROBOTS
Controlled model States Common parameters
Unknown Known
Hydraulic not always exist exist, b exist, g
Electric* always exist not exist exist, g
* = ÒAn electric robot is equivalent to a rigid body robot if both the elastic
and the electric energy storing and dissipative elements are negligible. Ó
1
Satoru Sakai is with Department of Mechanical Engineering, Shinshu
University, Nagano, Japan satorus@shinshu-u.ac.jp
?10
?12 ?1
?21
?01
?2
?  +s c1 1 
?  +s c2 2 
q
1 
 
q
2 
Link 1
Link 2
Link 0
Fig. 1. Hydraulic robot.
Pipe
Cylinder
Spool Piston
Valve
s
A+
A
+
V 
V +
s
p
p
p
0
0
u
L / 2
L / 2
Servo
Hydraulic
s
Fig. 2. Hydraulic actuator.
initial states and the parameters, the search methods such
as PSO (Particle Swam Optimization) [5] and GA (Genetic
Algorithm) do not work because numerical simulation in the
methods just runs as long as the states exist. Second, since
there exists an unknown common parameter which is newly
deÞned as a parameter independent from the joint number,
the conventional sequential method [6] does not guarantee
the uniqueness.
TheproposedmethodinthispaperidentiÞestheparameter
without running any numerical simulation and guarantees
the uniqueness by paying attention to Hilbert space. The
rest of this paper is organized as follows. In Section II, a
review of hydraulic robots are provided and the details of
new structural properties are discussed. In Section III, the
proposedmethodisdiscussedandinSectionIV,theproposed
methodis appliedto an actual experimentalsetup.In Section
V,thevalidityoftheproposedmethodisconÞrmedinseveral
conditions. Finally, Section VI concludes this paper.
II. NEW STRUCTURAL PROPERTY
A. A review of state space expression
Let us start to review hydraulic robots from the viewpoint
of the parameter identiÞcation. Without loss of generality,
2014 IEEE International Conference on Robotics & Automation (ICRA)
Hong Kong Convention and Exhibition Center
May 31 - June 7, 2014. Hong Kong, China
978-1-4799-3684-7/14/$31.00 ©2014 IEEE 5983
this paper discusses the 2-DOF case only as shown in
Figs.1,2. A hydraulic robot is described by
ú x= f
0
(x)+g
0
(x)u, y=x (1)
with
x:=[(q
1
q
2
)(ú q
1
ú q
2
)(p
+1
p
+2
)(p
?1
p
?2
)]
T
,u:=[u
s1
u
s2
]
T
where q
i
is the joint angle, ú q
i
is the joint angle velocity,
p
+i
is the one-side pressure (the head side pressure), p
?i
is
another side pressure (the rod side pressure), and the input
u
si
is the spool displacement. The drift term f
o
and the input
term g
o
(x)u are deÞned as follows.
f
0
(x)=
? ? ? ? (ú q
1
ú q
2
)
T
?M
?1
(q)

C(q, ú q)ú q+F
v
ú q+g(q)?G(q)
?T
F(x)

(f
+1
(x) f
+2
(x))
T
(f
?1
(x) f
?2
(x))
T
? ? ? ? g
0
(x)=
? ? ? ? ? ? ? ? ? ? ? ? 

00
00



00
00



g
+1
(x) 0
0 g
+2
(x)



g
?1
(x) 0
0 g
?2
(x)

? ? ? ? ? ? ? ? ? ? ? ? M(q)=

M
1
+2R
12
cos(q
2
) M
2
+R
12
cos(q
2
)
M
2
+R
12
cos(q
2
) M
2

C(q, ú q)=

?2R
12
ú q
1
ú q
2
sin(q
2
)?R
12
ú q
2
2
sin(q
2
)
R
12
ú q
2
1
sin(q
2
)

F
v
=

F
v1
0
0 F
v2

g(q)=

W
1
gsin(q
1
)+W
2
gsin(q
1
+q
2
)
W
2
gsin(q
1
+q
2
)

G(q)
?T
=

G
11
(q
1
) 0
0 G
22
(q
2
)

F(x)=

A
+1
p
+1
?A
?1
p
?1
A
+2
p
+2
?A
?2
p
?2

f
+i
(x)=
b
V
+i
(s
i
)
(?A
+i
ú s
i
) , f
?i
(x)=
b
V
?i
(s
i
)
(+A
?i
ú s
i
)
g
+i
(x)=
b
V
+i
(s
i
)

+C
f++i
h
++i
(p
+i
)+C
f+?i
h
+?i
(p
+i
)

g
?i
(x)=
b
V
?i
(s
i
)

?C
f?+i
h
?+i
(p
?i
)?C
f??i
h
??i
(p
?i
)

M
1
= I
1
+I
2
+m
1

2
g1
+m
2


2
1
+
2
g2

M
2
= I
2
+m
2

2
g2
R
12
=m
2

g2

1
,W
1
= m
1

g1
+m
2

1
,W
2
= m
2

g2
G
11
=

01

10
sin(q
1
)

c1
+s
1
(q
1
)
,G
22
=

12

21
sin(q
2
?¹)

c2
+s
2
(q
2
)
V
+i
(s
i
)= V
0+i
+(L
i
/2+s
i
)A
+i
V
?i
(s
i
)= V
0?i
+(L
i
/2?s
i
)A
?i
h
++i
(p
+i
) :=

Ã
?p
+i
+p
s
(u
si
>0)
0 (u
si
²0)
h
+?i
(p
+i
) :=

0 (u
si
³0)
Ã
+p
+i
(u
si
< 0)
h
?+i
(p
?i
) :=

Ã
+p
?i
(u
si
>0)
0 (u
si
²0)
h
??i
(p
?i
) :=

0 (u
si
³0)
Ã
?p
?i
+p
s
(u
si
<0)
where the subscript i =1 or 2 is the joint number and the
subscript + or ? denotes the head side and the rod side,
respectivelywiththelinkmassm
i
,thelinkinteriaofmoment
around the center of the gravity I
i
, the friction coefÞcient
F
vi
, the gravity acceleration g, the link length 
i
, the distance
between the joint center and the center of the gravity 
gi
,
the piston minimal length 
ci
, the distance between the joint
center and the piston endpoint 
ij
, the bulk modulus b, the
ßow gain coefÞcient C
f±±i
, the stroke L
i
, the piston areas
A
±i
, the pipe volume V
0±i
, and the pump supply pressure
p
s
. The symbol denotes the piston displacement s
i
?R and
the matrix components G
ii
(q) is the cylinder Jacobian. The
origin of the piston displacement s
i
, the spool displacement
u
i
,thecylinderpressure p
±
arethemiddlepointofthestroke
range, the normal position, air pressure, respectively.
The model above is not as precise as many models in
ßuid dynamics but is associated with unknown parameter
perturbation and uncertainty.
B. Structural properties
This subsection discusses the difÞculty of parameter iden-
tiÞcation based on new structural properties of hydraulic
robots as shown in Table I.
First, the states x of Equation (1) do not always exist as
real number. For a certain set of the initial states and the
parameters, the state x can be complex number due to the
squarefunctionintheinputtermg
0
(x)u.Ofcourse,theactual
hydraulicrobotsdo not make the states complexnumber,but
Equation (1) is based on many assumptions.
Since the search methods such as PSO and GA repeat
numerical simulation and automatic parameter tuning by
turns, if the states x do not exist, numerical simulation stops
and the search methods fail immediately.
Second, a certain parameter is unknown but exists in all
links in case of hydraulic robots, unlike electric robots. In
general, robot parameters are classiÞed into:
P1) the parameters not depending on the joint number,
P2) the parameters depending on the joint number.
5984
q
1 
 
Link 1
Link 2
Link 0
Step 3
 
q 
2 
Link 1
Link 2
Link 0
Step 1
1
q
1 
 
q = q
2 
q 
2 
Link 1
Link 2
Link 0
Step 2 q  = q = q
2 2min 
q = q
2 2max 
q = q
2 2max 
1
q
1const
q  = q
1const
2min 
Fig. 3. Conceptual diagram of the sequential method.
The former exist in all links and thus are deÞned as com-
mon parameter in this paper. In vertical cases, the gravity
acceleration g exists in all links of electric robots and the
bulk modulus b is also exists in all links of hydraulic robots.
However, only the bulk modulus b is unknown and needs
the parameter identiÞcation but the gravity acceleration g is
usually known as 9.8 [m/s
2
]. In horizontal cases, the bulk
modulus b still exists in hydraulic robots even though the
gravity acceleration g does not exist.
Fig. 3 shows an example of the sequential procedure con-
sisting of three steps here. Since the conventional sequential
method identiÞes a part of the full parameters between each
steps, the uniqueness is not guaranteed in N-DOF cases. For
example,someparametersareidentiÞedbetweenSTEP1and
STEP2 but one of them is again identiÞed between STEP2
and STEP3.
This new problem of the conventional sequential method
may not serious in case of electric robots because a certain
coordinate transformation (e.g., from the relative joint angle
totheabsolutejointangle),maymakeeachparameterappear
at only one of these steps. However, in case of hydraulic
robots, since an common parameter appear at all steps for
any coordinate transformation, if the common parameter
is unknown, the conventional sequential method fails to
guarantee the uniqueness.
TABLE II
MEASURED PARAMETERS AND UNKNOWN PARAMETERS.
Parameter Symbol Unit Value
Inertia parameter M
i
kgm
2
Unknown
Inertia parameter R
12
kgm
2
Unknown
Damping coefÞcient F
vi
Ns/m Unknown
Gravity parameter W
i
kgm Unknown
Bulk modulus b MPa Unknown
Flow gain coefÞcient C
f±±i
m
2
/(sV
Ã
Pa) Unknown
Gravity acceleration g m/s
2
9.8
Standard length of piston 
i
m 5.0 ?10
?1
Standard length of piston 
ci
m 3.0 ?10
?1
Piston attachment position 
01
m 1.1 ?10
?1
Piston attachment position 
10
m 3.3 ?10
?1
Piston attachment position 
12
m 2.7?10
?1
Piston attachment position 
21
m 1.0?10
?1
Stroke L
i
m 7.5?10
2
Cap area A
+i
m
2
7.0?10
?4
Rod area A
?i
m
2
5.4?10
?4
Pipe volume V
0±1
m
3
7.9?10
?5
Pipe volume V
0±2
m
3
6.3?10
?5
Pump supply pressure p
s
Pa 7.0?10
+6
Remark One may use the following calculations:
E1)Identifythe unknownparameterat onlyone step anduse
the parameter as a known parameter.
E2) Identify the unknown parameter at every step and take
the average after all steps Þnish.
However,since the formeruses the onlypart of the total data
and the latter has a different sense from the identiÞcation of
the other parameters, both calculations are never scientiÞc.
Remark Suppose two normal equations A
i
x
i
= b
i
, x
i
?
R
2
, i?{1,2} and assume that the second component of x
1
and the Þrst component of x
2
are the same (i.e., x
12
=x
21
).
Then a coupling of the normal equations is equivalent to a
linear equation Ax=b with x=[x
11
,x
12
,x
22
]
T
. Furthermore,
any component of the solution x
i
of the normal equation is
not equivalent to all components of the solution x of the
linear equation.
III. FULL PARAMETER IDENTIFICATION
In order to solve the problems of all of the conventional
methods, by modifying the conventional sequential method
from the viewpoint of Hilbert space, the proposed method
uses the whole of the total data and has the same sense as
the identiÞcation of the other parameters.
<STEP1 > The joint 1 is Þxed (q
1
=q
1const
, ú q
1
= ¬ q
1
=0)
and the joint 2 is driven. It is not possible to see the state
equation(1)as a linearequationwith respectto theunknown
parameters, unlike that of electric robots. However, after the
following procedure,1) multiply the matrix M(s) to the both
sides from the left in the second equation to deÞne the drift
term f
0
, 2) multiply the scalarV
+i
/b to the both sides in the
thirdequation,3)multiply the scalarV
+?
/bto the bothsides
in the forth equation, the state space equation is of the form
of the linear equation with non-zero right hand.
M
2
¬ q
2
(t)+F
v2
ú q
2
(t)+ W
2
gsin(q
1const
+q
2
(t))
= G
22
(q
2
(t))
?1
(A
+2
p
+2
(t)?A
?2
p
?2
(t))
?

?
11
(t) ?
12
(t) ?
13
(t)

? ? M
2
F
v2
W
2
? ? =

f
11
(t)

,
with
?
11
(t)= ¬ q
2
(t) , ?
12
(t)= ú q
2
(t) , ?
13
(t)=gsin(q
1const
+q
2
(t))
f
11
(t)=G
22
(q
2
(t))
?1
(A
+2
p
+2
(t)?A
?2
p
?2
(t))
and
? ??? ??? ?
1
b
ú p
+2
(t)V
+2
(t)+C
f++2
h
++2
(t)u
s2
(t)
+C
f+?2
h
+?2
(t)u
s2
(t)=+A
+2
ú s
2
(t)
?
1
b
ú p
?2
(t)V
?2
(t)?C
f?+2
h
?+2
(t)u
s2
(t)
?C
f??2
h
??2
(t)u
s2
(t)=?A
?2
ú s
2
(t)
?

?
11
(t) ?
12
(t) ?
13
(t) 00
?
21
(t) 00 ?
24
(t) ?
25
(t)

? ? ? ? ? 1/b
C
f++2
C
f+?2
C
f?+2
C
f??2
? ? ? ? ? =

f
21
(t)
f
22
(t)

,
with
?
11
(t)=?ú p
+2
(t)V
+2
(t) , ?
21
(t)=?ú p
?2
(t)V
?2
(t)
?
12
(t)=+h
++2
(t)u
s2
(t) , ?
13
(t)=+h
+?2
(t)u
s2
(t)
?
24
(t)=?h
?+2
(t)u
s2
(t) , ?
25
(t)=?h
??2
(t)u
s2
(t)
f
21
(t)=+A
+2
ú s
2
(t) , f
22
(t)=?A
?2
ú s
2
(t)
5985
Note that the abovelinear equations are quite lucky because
therighthandsides f
11
,f
21
,f
22
arenotunknownandalsonot
zeros. Otherwise, the unknown parameters are identiÞed as
just zero whichare clearly incorrect.Unlike the conventional
sequential procedure, let us go to the next step immediately
without solving the above normal equation.
<STEP2 > The joint 2 is Þxed at the minimal values (q
2
=
q
2min
, ú q
2
= ¬ q
2
=0), and the joint 1 is driven.
(M
1
+2R
12
cos(q
2min
)) ¬ q
1
(t)+F
v1
ú q
1
(t)+W
1
gsin(q
1
(t))
+W
2
gsin(q
1
(t)+q
2min
)=G
11
(q
1
(t))
?1
(A
+1
p
+1
(t)?A
1
p
1
(t))
with
?

?
11
(t) ?
12
(t) ?
13
(t) ?
14
(t) ?
15
(t)

? ? ? ? ? M
1
R
12
F
v1
W
1
W
2
? ? ? ? ? =

f
12
(t)

,
?
11
(t)= ¬ q
1
(t) , ?
12
(t)=2¬ q
1
(t)cos(q
2min
) , ?
13
(t)= ú q
1
(t)
?
14
(t)=gsin(q
1
(t)) , ?
15
(t)=gsin(q
1
(t)+q
2min
)
f
12
(t)=G
11
(q
1
(t))
?1
(A
+1
p
+1
(t)?A
?1
p
?1
(t))
and
? ??? ??? ?
1
b
ú p
+1
(t)V
+1
(t)+C
f++1
h
++1
(t)u
s1
(t)
+C
f+?1
h
+?1
(t)u
s1
(t)=+A
+1
ú s
1
(t)
?
1
b
ú p
?1
(t)V
?1
(t)?C
f?+1
h
?+1
(t)u
s1
(t)
?C
f??1
h
??1
(t)u
s1
(t)=?A
?1
ú s
1
(t)
?

?
11
(t) ?
12
(t) ?
13
(t) 00
?
21
(t) 00 ?
24
(t) ?
25
(t)

? ? ? ? ? 1
b
C
f++1
C
f+1
C
f+1
C
f?1
? ? ? ? ? =

f
23
(t)
f
24
(t)

,
with
?
11
(t)=?ú p
+1
(t)V
+1
(t) , ?
21
(t)=?ú p
1
(t)V
1
(t)
?
12
(t)=+h
++1
(t)u
s1
(t) , ?
13
(t)=+h
+?1
(t)u
s1
(t)
?
24
(t)=?h
?+1
(t)u
s1
(t) , ?
25
(t)=?h
??1
(t)u
s1
(t)
f
23
(t)=+A
+1
ú s
1
(t) , f
24
(t)=?A
?1
ú s
1
(t)
As in STEP1, the right handsides are not unknownandalso
not zeros and thus let us go to the next step again.
<STEP3 > The joint 2 is Þxed at the maximal values (q
2
=
q
2max
, ú q
2
= ¬ q
2
=0), and the joint 1 is driven.
(M
1
+2R
12
cos(q
2max
))¬ q
1
(t)+F
v1
ú q
1
(t)+W
1
gsin(q
1
(t))
+W
2
gsin(q
1
(t)+q
2max
)=G
11
(q
1
(t))
?1
(A
+1
p
+1
(t)?A
?1
p
?1
(t))
?

?
11
(t) ?
12
(t) ?
13
(t) ?
14
(t) ?
15
(t)

? ? ? ? ? M
1
R
12
F
v1
W
1
W
2
? ? ? ? ? =

f
13
(t)

,
?
11
(t)= ¬ q
1
(t) , ?
12
(t)=2¬ q
1
(t)cos(q
2max
) , ?
13
(t)= ú q
1
(t)
?
14
(t)=gsin(q
1
(t)) , ?
15
(t)=gsin(q
1
(t)+q
2max
)
f
13
(t)=G
11
(q
1
(t))
?1
(A
+1
p
+1
?A
?1
p
?1
)
? ??? ??? ?
1
b
ú p
+1
(t)V
+1
(t)+C
f++1
h
++1
(t)u
s1
(t)
+C
f+?1
h
+?1
(t)u
s1
(t)=+A
+1
ú s
1
(t)
?
1
b
ú p
?1
(t)V
?1
(t)?C
f?+1
h
?+1
(t)u
s1
(t)
?C
f??1
h
??1
(t)u
s1
(t)=?A
?1
ú s
1
(t)
?

?
11
(t) ?
12
(t) ?
13
(t) 00
?
21
(t) 00 ?
24
(t) ?
25
(t)

? ? ? ? ? 1/b
C
f++1
C
f+?1
C
f?+1
C
f??1
? ? ? ? ? =

f
25
(t)
f
26
(t)

,
?
11
(t)=?ú p
+1
(t)V
+1
(t) , ?
21
(t)=?ú p
?1
(t)V
?1
(t)
?
12
(t)=+h
++1
(t)u
s1
(t) , ?
13
(t)=+h
+?1
(t)u
s1
(t)
?
24
(t)=?h
?+1
(t)u
s1
(t) , ?
25
(t)=?h
?1
(t)u
s1
(t)
f
25
(t)=+A
+1
ú s
1
(t) , f
26
(t)=?A
?1
ú s
1
(t)
STEP3 is the almost same as the STEP2 but used to explain
the following Þnal step.
< STEP4 > A part of the unknown parameters, namely
b,C
f±±1
,M
1
,R
12
,F
v1
,W
1
,W
2
appears twice or more. Especially,
the bulk modulus b will appear in every steps and is not
identiÞed uniquely for all coordinate transformation.
In this step, Þrst let us couple all of the normal equations
into the following smaller normal equations.
X
1N
? ? ? ? ? ? ? ? ? M
1
M
2
R
12
F
v1
F
v2
W
1
W
2
? ? ? ? ? ? ? ? ?   
a
1
=Y
1N
, X
2N
? ? ? ? ? ? ? ? ? ? ? ? ? 1
b
C
f++1
C
f+?1
C
f?+1
C
f??1
C
f++2
C
f+?2
C
f?+2
C
f??2
? ? ? ? ? ? ? ? ? ? ? ? ?   
a
2
=Y
2N
(2)
with
X
1N
=
? ? ? ? ? ? ? ? ? ? ? 0 ?
11
(t
1
) 00 ?
12
(t
1
) 0 ?
13
(t
1
)
?
11
(t
1
) 0 ?
12
(t
1
) ?
13
(t
1
) 0 ?
14
(t
1
) ?
15
(t
1
)
?
11
(t
1
) 0 ?
12
(t
1
) ?
13
(t
1
) 0 ?
14
(t
1
) ?
12
(t
1
)
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
0 ?
11
(t
N
) 00 ?
12
(t
N
) 0 ?
13
(t
N
)
?
11
(t
N
) 0 ?
12
(t
N
) ?
13
(t
N
) 0 ?
14
(t
N
) ?
15
(t
N
)
?
11
(t
N
) 0 ?
12
(t
N
) ?
13
(t
N
) 0 ?
14
(t
N
) ?
15
(t
N
)
? ? ? ? ? ? ? ? ? ? ? and
X
2N
=
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
11
(t
1
) 0000 ?
12
(t
1
) ?
13
(t
1
) 00
?
21
(t
1
) 0000 0 0 ?
24
(t
1
) ?
25
(t
1
)
?
11
(t
1
) ?
12
(t
1
) ?
13
(t
1
) 0 0 0 000
?
21
(t
1
) 00 ?
24
(t
1
) ?
25
(t
1
) 0 000
?
11
(t
1
) ?
12
(t
1
) ?
13
(t
1
) 0 0 0 000
?
21
(t
1
) 00 ?
24
(t
1
) ?
25
(t
1
) 0 000
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
?
11
(t
N
) 0000 ?
12
(t
N
) ?
13
(t
N
) 00
?
21
(t
N
) 0000 0 0 ?
24
(t
N
) ?
25
(t
N
)
?
11
(t
N
) ?
12
(t
N
) ?
13
(t
N
) 0 0 0 000
?
21
(t
N
) 00 ?
24
(t
N
) ?
25
(t
N
) 0 000
?
11
(t
N
) ?
12
(t
N
) ?
13
(t
N
) 0 0 0 000
?
21
(t
N
) 00 ?
24
(t
N
) ?
25
(t
N
) 0 000
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? Since the identiÞcation is in the off-line world, it is sufÞ-
ciently relevant to have [q
i
(t), ú q
i
(t), ¬ q
i
(t),p
±i
(t), ú p
±i
(t)](i=
1,2) in every time steps t =t
1
,ááá ,t
N
by differential approx-
imations. By the projection theorem in Hilbert space, the
values a
1
and a
2
ö a
1
=

X
T
1N
X
1N

?1
X
T
1N
Y
1N
, ö a
2
=

X
T
2N
X
2N

?1
X
T
2N
Y
2N
(3)
are unique [4]. Note that the smaller normal equations
consist of the mechanical part and the ßuid part and that the
bulk modulus b and all of the ßow gains C
¥
are identiÞed
explicitly.
The proposed approach is new and applicable to electric
robots that stands on the uneven ground with unknown
inclination, equivalently, unknown gravity acceleration g.
5986
Linux PC
Hydraulic Manipulator
Servo Valve
Fig. 4. The experimental setup.
Servo amp.
Linux PC
LVDT
Pressure sensor
Pressure sensor
Position sensor
Servo
Valve
Hydraulic
 Cylinder
Temperature sensor
A/D board
D/A board
+
-
A B
P T
Fig. 5. The system conÞguration of the hydraulic manipulator.
IV. IDENTIFICATION EXPERIMENT
A. Method (identiÞcation)
Fig.4 shows an appearance of the experimentalsetup. The
experimental setup consists of a vertical and articulated 2-
DOFmanipulator,apump(NDR081-071H-30,11.7[L/min],
p
s
=7[MPa]), a tank 7 [L]), fourpipes (SWP70-6,1/4 inch),
a valve(KSPS-G02-41-10,direct-type,zero-lap,40 [L/min],
dizzer 300 [Hz]), two cylinders (asymmetric cylinder (KW-
1CA30?75, L=75[mm]), a Þlter (UM-03-20U-1V) and an
oil (ISOVG32, 860[kg/m
3
] 40±2[
?
C]). Table II shows the
value of the known parameters.
The output signals p
±i
are measured by a pressure sensor
(AP-15S),the outputs
i
is measuredbya potentio-meter(LP-
100F-C) and the identiÞcation input u
si
are measured by the
LVDT (1 [mm]/1.4 [V]). These output and input signals are
detectedbyanAD converter(PCI-3155,16bit)andrecorded
by a controlPC (LX7700,Linux, 2.53[GHz]) by a sampling
time 1 [ms]).
In order to identify the parameters, the following control
inputs (v
i
=A
i
sin(2¹f
i
t))are used as the amplitudes A =
0.5,1.0[V], the frequencies f = 1.0[Hz], the period t =
6?10[s] via DA converter(PCI-3325, 12 bit). Since the
parameter identiÞcation is in the off-line world, the time
derivativeof the pistondisplacements
i
and the pressures p
±i
are sufÞciently calculated via the Þrst or second difference
approximation and the standard moving average (20-order,
cut-off50[Hz]).Inthispaper,alloftheidentiÞedparameters
10 12 14
 -2
 -1
0
1
2
x 10
-3
u
2
 / L [-]
Time [s]
Actual
10 12 14
0
0.5
1
p
+2
  / p
 s
  [-]
Time [s]
Model
Actual
10 12 14
 -0.5
0
0.5
1
 s
2
 / L [-]
Time [s]
Model
Actual
10 12 14
0
0.5
1
p
-2
  / p
 s
  [-]
Time [s]
Model
Actual
Fig. 6. Model validation (Link 2, Step1, 1.0 Hz).
10 12 14
 -2
 -1
0
1
2
x 10
-3
u
1
 / L [-]
Time [s]
Actual
10 12 14
0
0.5
1
p
+1
  / p
 s
  [-]
Time [s]
Model
Actual
10 12 14
 -0.5
0
0.5
1
 s
1
 / L [-]
Time [s]
Model
Actual
10 12 14
0
0.5
1
p
-1
  / p
 s
  [-]
Time [s]
Model
Actual
Fig. 7. Model validation (Link 1, Step2, 1.0 Hz).
10 12 14
 -2
 -1
0
1
2
x 10
-3
u
1
 / L [-]
Time [s]
Actual
10 12 14
0
0.5
1
p
+1
  / p
 s
  [-]
Time [s]
Model
Actual
10 12 14
 -0.5
0
0.5
1
 s
1
 / L [-]
Time [s]
Model
Actual
10 12 14
0
0.5
1
p
-1
  / p
 s
  [-]
Time [s]
Model
Actual
Fig. 8. Model validation (Link 1, Step3, 1.0 Hz).
are from an average of 10 times experiment.
B. Experimental results (identiÞcation)
Table III shows the maximum, the minimum and the
average of the identiÞed parameters and their relative stan-
dard derivation (RSD [%]). The calculation time to solve
the equations (3) are 6.5 [s] on a PC (1.67 [GHz]). The
condition number of X
1N
,X
2N
are 11, 27 at most and 10, 25
at least, respectively, where the number of row is 12000 and
24000.AtÞrst, itis remarkablethattheall of16dimensional
parameters in Table III have positive even thoughwe did not
give any constraint on the sign and ranges and any initial
estimations to solve the equations (3).
5987
10 12 14
 -2
 -1
0
1
2
x 10
-3
u
1
 / L [-]
Time [s]
Actual
10 12 14
0
0.5
1
p
+1
  / p
 s
  [-]
Time [s]
Model
Actual
10 12 14
 -0.5
0
0.5
1
 s
1
 / L [-]
Time [s]
Model
Actual
10 12 14
0
0.5
1
p
-1
  / p
 s
  [-]
Time [s]
Model
Actual
Fig. 9. Model validation of simultaneous motion (Link 1, 1.0 Hz).
10 12 14
 -2
 -1
0
1
2
x 10
-3
u
2
 / L [-]
Time [s]
Actual
10 12 14
0
0.5
1
p
+2
  / p
 s
  [-]
Time [s]
Model
Actual
10 12 14
 -0.5
0
0.5
1
 s
2
 / L [-]
Time [s]
Model
Actual
10 12 14
0
0.5
1
p
-2
  / p
 s
  [-]
Time [s]
Model
Actual
Fig. 10. Model validation of simultaneous motion (Link 2, 1.0 Hz).
To our knowledge, from the viewpoint of robotics, this
is the Þrst paper to identify the full parameters without
trial and error in case of hydraulic robots. The conventional
approaches have identiÞed a part of the parameters by
trial and error and are less scientiÞc. The result is directly
applicable to impedance controls and the recursive version
of the equations (3) will be used adaptive control and so
on. From the viewpoint of automation, the result is also
importantbecausethespoolisthedirecttypeandthussimilar
to the one of industrial excavators. This paper has opened
many doors to model based control of such excavators.
C. Discussion (identiÞcation)
Since RSD in Table III are 2.15 [%] at most and 0.14 [%]
at least and smaller than 5.00 [%] which is acceptable value
in general situation. The condition numbers are less 27 and
sufÞcientlysmall.TableIIIalsoshowsthenominalvalues.In
mechanicalpart, the nominal values are fromthe mechanical
design draft. The friction parameters of the mechanical part
andtheparametersinßuidparthavenogoodnominalvalues.
However, the bulk modulus value is very close to the result
in the paper [8] whose supply pressure p
s
is the same as that
in this paper. The RSD of the bulk modulus is not small but
reliable because the oil temperature is not completely Þxed.
In these senses, the results are reliable.
V. MODEL VALIDATION
A. Method (model validation)
The equation (1) with the identiÞed parameters is the
nonlinear model. This model is quite useful since the model
can be used for dynamical simulation with well initial
conditions,the optimizationdesign.The model is also useful
to estimate the endpoint force because the equation (1) has
not endpoint force.
This section discusses the cross validation. That is, the
validity of the constructed model is conÞrmed by the new
data which is not used in the identiÞcation. This cross
validation is fair and also scientiÞc because the conventional
approaches use the same data as used in their identiÞcation.
First a nonlinear model is constructed in the PC
(1.67[GHz], Simulink) with the average of the result. Sec-
ond, via Runge?Kutta method (ode45, variable step), the
experimentaloutput signals and the model output signals are
generated by the same input signals t =10?14[s] and are
compared with each other. The initial values of the model is
from the experimentalstates at the start timet =10[s] except
the piston velocity ú s(0) which is replaced by the Þrst-order
differentiation. Also, the model validation is repeated by a
new input with the frequency f =3.0[Hz] which is not used
in the identiÞcation at all.
B. Experimental result (model validation)
Figs.6-8 shows the result in the frequency f = 1.0[Hz].
The result in the frequency f = 3.0[Hz] are omitted here.
The black lines denote the experimental inputs and outputs.
The red lines denote the model outputs generated by the
experimental inputs. In these Þgures, the inputs and the
outputs are normalized by L(= 75[mm]) or p
s
(=7[MPa]).
First, in both frequencies, f =1.03.0[Hz], the state equation
hasthesolutionsuccessfully.Thatis,unlikeincaseofsearch
methods (PSO and GA), the all terms of the state equation
are always real number and never the complex number.
Second, with respect to the amplitude and the phase, the
experimentaloutputs and the model outputsare veryclose to
each other. Table IV shows the FIT ratio [%]. In general, the
FIT ratio can be negative but the results are always positive
remarkably.
C. Discussion (model validation)
Figs.6Ð8 and Table IV imply that the validity of the
proposed method is sufÞciently acceptable. Especially, a
characteristic pressure behavior at every peaks in Fig.6is
seen in both cases. The FIT ratios are quite high and the
FIT ratio of the positing velocity are always over 90%.
Even when the endpoint grasps the object with the mass
(6.5[kg]), successfully, only the mechanical parameters R
12
and W
1
,W
2
depending on the endpoint mass has responded.
with the condition of the oil temperature (40±2[
?
C]) and
the frequency f = 1.0[Hz]. Also the identiÞed values are
close to the new nominal value of M
2
=12.21[kgm
2
] from
the mechanical design draft. On the other hand the ßuid
parameters are almost same as the case without such load.
5988
TABLE III
IDENTIFIED RESULTS.
Proposed PSO GA Nominal
Parameter Symbol Unit Value RSD Value Value Value
Min. Mean Max. [%]
Inertia parameter M
1
kgm
2
4.43 4.47 4.52 0.52 - - 5.00
Inertia parameter M
2
kgm
2
1.25 1.27 1.32 1.71 0.50 3.20 1.00
Inertia parameter R
12
kgm
2
1.33 1.37 1.38 0.94 - - 1.50
Damping coefÞcient F
v1
Ns/m 49.79 50.77 51.03 0.74 - - -
Damping coefÞcient F
v2
Ns/m 4.22 4.43 4.51 1.82 1.70 16.36 -
Gravity parameter W
1
kgm 8.52 8.55 8.60 0.31 - - 8.60
Gravity parameter W
2
kgm 3.27 3.30 3.36 0.71 1.33 13.15 3.00
Bulk modulus b(?10
2
) MPa 2.25 2.33 2.38 2.15 3.17 2.46 2.00?17.0
Flow gain coefÞcient C
f++1
(?10
?7
) m
2
/(sV
Ã
Pa) 6.28 6.31 6.33 0.32 - - -
Flow gain coefÞcient C
f+?1
(?10
?7
) m
2
/(sV
Ã
Pa) 6.58 6.60 6.62 0.14 - - -
Flow gain coefÞcient C
f?+1
(?10
?7
) m
2
/(sV
Ã
Pa) 5.45 5.50 5.54 0.52 - - -
Flow gain coefÞcient C
f?1
(?10
?7
) m
2
/(sV
Ã
Pa) 6.23 6.27 6.32 0.41 - - -
Flow gain coefÞcient C
f++2
(?10
?7
) m
2
/(sV
Ã
Pa) 6.26 6.28 6.32 0.34 2.39 6.76 -
Flow gain coefÞcient C
f+?2
(?10
?7
) m
2
/(sV
Ã
Pa) 5.34 5.36 5.39 0.38 2.41 6.17 -
Flow gain coefÞcient C
f?+2
(?10
?7
) m
2
/(sV
Ã
Pa) 5.40 5.44 5.47 0.37 2.38 6.97 -
Flow gain coefÞcient C
f?2
(?10
?7
) m
2
/(sV
Ã
Pa) 6.16 6.19 6.21 0.24 2.43 9.04 -
TABLE IV
FIT RATIO [%].
Proposed PSO GA
State Symbol Step 1 Step 2 Step 3 Step 1 Step 1
1.0Hz 3.0Hz 1.0Hz 3.0Hz 1.0Hz 3.0Hz 1.0Hz 1.0Hz
Cylinder displacement s
1
,s
2
91.7 45.8 81.1 45.8 60.9 51.0 -2.4 52.6
Cap pressure p
+1
,p
+2
33.6 45.5 40.2 67.4 50.7 64.0 5.1 -743.7
Rod pressure p
?1
,p
?2
35.1 2.8 69.4 47.1 61.3 57.1 -7.2 ?1.0?10
4
Figs.9,10 shows the further result where both joint 1 and
joint 2 are driven simultaneously with the same frequency
f = 1.0[Hz]. Unlike electric robots, hydraulic robots have
an ßuid interaction via energy source (the pump). However,
the experimental outputs and the model outputs are close to
each other again.
Finally, the proposed approach and the simultaneous ap-
proach are compared with the same frequency f =1.0[Hz].
The condition number of the matrix X
1N
,X
2N
are 22 and
27 and the value W
1
is larger than the value W
2
which
meanstheoreticallyimpossible.As discussed inabovein this
paper, the simultaneous identiÞcation is restrictive due to the
workspace and so on.
In all, the validity of the proposed method is conÞrmed.
The only the proposed method solves the parameter identi-
Þcation without trial and error.
VI. CONCLUSION
This paper is the Þrst report of parameter identiÞcaiton
of a hydraulic robot without try and error. Especially the
bulk modulus and the all ßow gain coefÞcients are explicitly
identiÞed well and the model outputs (the time-response of
mechanical displacement and the ßuid pressures) and the
experimentaloutputsare veryclose to eachother. All param-
eters are identiÞed uniquely by projection theorem based on
a new discussion of structural properties of hydraulic robots.
Every conventional methods need trial and error or looses
uniqueness which will cause a kind of trial and error again.
The result is quite important from the viewpoint of both
roboticsandautomationwhosevalvesarenormallysimilarto
ourdirectvalves,ratherthanothers(BigDogandsoon).This
paper opens a new door to model based control, especially
impedance control to be implemented in the on-line world.
Of course the numerical simulation, design optimization and
failure detection are also possible based on this paper.
REFERENCES
[1] Bruno H., G. Barbosa, Luis A. Aguirre, Carlos B. Martinez, and
Antonio P. Braga. Black and gray-box identiÞcation of a hydraulic
pumpingsystem. IEEETrans.Control SystemsTechnology, 19(2):398Ð
406, 2011.
[2] M. Jelali and A. Kroll. Hydraulic Servo Systems. Springer, 2002.
[3] C. Kaddissi, J.-P. Kenne, and M. Saad. Indirect adaptive control of an
electrohydraulic servo system based on nonlinear backstepping. IEEE
Transactions on Mechatronics, 16(6):1171Ð1177, 2011.
[4] David Luenverger. Optimization by vector space method. John Wiley
Sons, 1960.
[5] Romain Marion, Riccardo Scorretti, Nicolas Siauve, Marie-Ange
Raulet, ,andLaurent Krahenbuhl. IdentiÞcation ofjilesatherton model
parameters using particle swarm optimization. IEEE Transactions on
Magnetics, 44(6):894Ð897, 2008.
[6] H. Mayeda, K. Yoshida, and K. Osuka. Base parameters of manipu-
lator dynamic models. IEEE Trans. Robotics and Automation, 6:312Ð
321, 1990.
[7] H. Merrit. Hydraulic Control Systems. John Willey & Sons, 1967.
[8] A. Mohanty and Bin Yao. Integrated direct/indirect adaptive robust
control of hydraulic manipulators with valve deadband. IEEE Trans-
actions on Mechatronics, 16(4):707Ð715, 2011.
[9] Q. Zhang. Basics of hydraulic systems. CRC Press, 2008.
[10] W.H. Zhu and J.C. Piedboeuf. Adaptive output force tracking control
of hydraulic cylinders with applications to robot manipulators. Trans-
actions of the ASME Dynamic systems, Measurement and Control,
127(1):206Ð217, 2005.
5989
