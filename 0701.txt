A Passivity Based Compliance Stabilizer for Humanoid Robots
Chengxu Zhou, Zhibin Li, Juan Castano, Houman Dallali, Nikos G. Tsagarakis, and Darwin G. Caldwell
Abstract—This paper presents a passivity based compliance
stabilizer for humanoid robots. The proposed stabilizer is an
admittance controller that uses the force/torque sensing in feet
to actively regulate the compliance for the position controlled
system. The low stiffness provided by the stabilizer permits
compliant interaction with external forces, and the active damp-
ing control guarantees the passivity by dissipating the excessive
energy delivered by disturbances. Both the theoretical work and
simulation validations are presented. The effectiveness of the
stabilizer is demonstrated by the simulations of a simpliﬁed
cart-table model and the multi-body model of a humanoid
under impulsive/periodic force perturbations during standing
and walking in place. Simulation data show the quantitative
evaluation of the stabilization effect by comparing the responses
of body attitude, center of mass, center of pressure without and
with the stabilizer.
I. INTRODUCTION
The signiﬁcance of stabilization control had gained limited
attention in the past decades while the most efforts were
made to generate stable dynamic gaits. After acquiring
feasible walking patterns that allow the robot to walk in an
ideally deﬁned environment, bipeds are found to be sensitive
to small un-modeled uncertainties in the environment, such
as unevenness of the ﬂoor, unexpected pushes, or discrep-
ancies between the simpliﬁed model and the real system.
These uncertainties most probably produce undesired energy
change on the system thus cause the disturbance on the
state of the robot. If the energy injected or dissipated by
disturbances can be compensated, then the state of the robot
would return to its desire trajectory. This inspired us to
develop a stabilizer in addition to a gait pattern generator.
In order to avoid confusion, stabilizers are classiﬁed into
two categories in this paper: local stabilizer and global stabi-
lizer. This is in agreement with the short-term and long-term
absorption of disturbances proposed in [1]. It is important to
delineate these two concepts since the bipeds have limited
attraction region to stabilize itself due to the limited support
polygon. As long as the required effort to counterbalance
the disturbance can be supplied by the current foot-ground
contacts, the biped does not need to change its physical
contact with the environment. Therefore, any control action
that leads to the negative rate change of undesired energy
will stabilize the state of the robot, which is denoted as local
stabilization and hereafter. However, once the disturbance
becomes signiﬁcantly larger, the state of the robot can no
longer be stabilized due to the viable force/torque limited by
This work is supported by the FP7 European projects AMARSi (ICT-
248311) and WALK-MAN (ICT-2013-10).
Authors are with the Department of Advanced Robotics, Istituto Italiano
di Tecnologia, via Morego 30, 16163 Genova, Italy.
Email: name.surname@iit.it
the current contact polygon, thereby taking steps or using
upper limbs is demanded to form new contacts. These sort
of control action forms an enlarged attraction region which
again embraces the disturbed states, therefore, they can be
classiﬁed as global stabilization.
Most past works utilized compliance or impedance control
to address the local stabilization. Hashimoto et al. used a
nonlinear compliance control to modify a predeﬁned walking
patter to absorb landing impacts [2]. Kajita et al. applied
body posture and foot force control to track the linear
inverted pendulum model with a delay of ZMP response [3].
The Cartesian impedance control was also used to stabilize
torque controlled robots in standing posture [4] [5]. Hyon et
al. [4] introduced damping in joint space in order to ensure
local stabilization. Our earlier work in [6] [7] stabilized the
position controlled robot using active compliance control
to replicate the softness. However, the method in [6] used
dimensionless gains without specifying the stiffness and
damping, making it difﬁcult to interpret. And the algorithms
in [7] was modeled in polar coordinate particularly for
standing stabilization and was not straightforward to combine
with existing walking pattern formulated in Cartesian space.
For the global stabilization, some works exploited the
planning of time-based trajectories by adjusting foot place-
ment. Morisawa et al. modiﬁed the foot trajectory using the
simultaneous planning of the center of mass (COM) and
the ZMP [8]. Urata et al. selected the optimal pattern from
a number of on-line re-planned foot and ZMP trajectories
together with the preview control for balance recovery [9].
The common ground of these work is the reliance on an
additional local stabilizer that damps out a portion of exces-
sive disturbance from step to step. Alternatively, some other
researchers used event-based methods. Pratt et al. proposed
the Capture Point (CP) to indicate where the robot should
step for a complete stop [10]. Stephens et al. used a state
machine to trigger stepping and applied the model predictive
control for generating recovery motion [11]. Wight et al.
validated the foot placement estimator on a planar robot
taking the ground impact effect into account [12].
This paper presents an effective stabilizer for local sta-
bilization of humanoid COMAN [13] merely in the case
that the disturbance won’t require the robot to take steps.
A passivity based admittance control is formulated based
on the cart-table model [14] to achieve active compliance.
Since the active compliance is obtained through control, a
range of variable stiffness can be conﬁgured in additional to
the COMAN’s intrinsic compliance. The proposed stabilizer
is generic to be applied on both stiff and compliant robots.
The paper is organized as follows. Section II elaborates
2014 IEEE International Conference on Robotics & Automation (ICRA)
Hong Kong Convention and Exhibition Center
May 31 - June 7, 2014. Hong Kong, China
978-1-4799-3684-7/14/$31.00 ©2014 IEEE 1487
Fig. 1. Cart-table model for formulating stabilizer (sagittal view).
TABLE I
PARAMETERS FOR CONTROLLER
m: mass of the robot
zc: nominal height of the COM
x
d
: desired position reference
xs: length of the spring deﬂexion
x
0
: equilibrium position
x: real position of the COM
Ks: resultant physical stiffness of the system
B: real viscous coefﬁcient of the system
K
d
: desired spring stiffness of the impedance
B
d
: desired viscous coefﬁcient of the impedance
the control principles. Section III-A provides the simulation
validation of the simpliﬁed cart-table model and proves its
effectiveness. Section III-B and III-C present the imple-
mentation on the simulated multi-body model of COMAN
and analyze the simulation data. The paper is concluded in
Section IV.
II. CONTROL PRINCIPLES
The cart-table model introduced by Kajita et al. [14] is
used to model the robot as as a simpliﬁed cart moving on a
mass-less table. The table has a small support area that repre-
sents the support foot, and the cart represents the COM. Our
proposed local stabilization approach is formulated based
on cart-table model which can be further combined with
a walking pattern generator using the same model during
standing and walking. The parameters used in this paper are
listed in Table I. All the equations are formulated in local
frame

B
which is located at center of the support foot.
The dynamics of the model in Fig. 1(a) is described by
?
ext
= z
c
(m¨ x+B˙ x+K
s
(x
d
?x))+?
g
. (1)
The term ?
ext
is the summation of all torques generated
by the external disturbances, ?
g
is the torque generated by
the gravity
?
g
= mgx. (2)
For the system with negligible physical damping B, the
dynamics can be simpliﬁed as
?
ext
= z
c
(m¨ x+K
s
(x
d
?x))+?
g
. (3)
The cart-table model can be emulated as a spring-damper
system with the gravity compensation. As shown in Fig.
1(b), a desired spring K
d
(K
d
<K
s
) and a damper B
d
are connected between the equilibrium and the real COM.
The conﬁgurable parameters are the stiffness and damping,
while the inertia property is not modulated. Hence, given the
equilibrium x
0
, the dynamics of this desired system is
?
ext
= z
c
(m¨ x+B
d
(˙ x
0
? ˙ x)+K
d
(x
0
?x)). (4)
Therefore, if the net ground reaction torques in both
systems are equivalent as
?
g
z
c
+K
s
(x
d
?x)= B
d
(˙ x
0
? ˙ x)+K
d
(x
0
?x), (5)
thus these two systems would have the same dynamic
response from the observation at the COM level.
Note that the term K
s
(x
d
?x) implies the possibility that
by controlling x
d
to satisfy (5), the torque can be controlled
by an active regulation via the spring deﬂexion.
By rearranging (5), we obtain the formula of the referential
position x
d
based on the real COM position x,
x
d
=
K
d
K
s
x
0
+
K
s
?K
d
K
s
x+
B
d
K
s
(˙ x
0
? ˙ x)?
?
g
z
c
K
s
. (6)
The above method modulates the position reference to
achieve a desired impedance based on the feedback of COM
position and velocity. The control law can be reformulated
by the relation between torque and spring deﬂexion. Denote
by ? the torque applied at the system in

B
,wehave

? = ?K
s
x
s
,
x = x
d
+x
s
.
(7)
So x and ˙ x can be obtained as

x = x
d
?
?
zcKs
,
˙ x =˙ x
d
?
˙ ?
zcKs
.
(8)
Substitute (8) into (6), yields
x
d
=
K
d
K
s
x
0
+
B
d
K
s
˙ x
0
+
K
s
?K
d
K
s
x
d
?
B
d
K
s
˙ x
d
?
K
s
?K
d
z
c
K
2
s
? +
B
d
z
c
K
2
s
˙ ? ?
?
g
z
c
K
s
.
(9)
The desired velocity ˙ x
d
can be replaced by the derivative
of the x
d
in a discrete form
˙ x
d
=
x
d
(i)?x
d
(i?1)
?t
, (10)
where ?t is the sampling time.
Substitute (10) into (9), we can derive the desired reference
position x
d
in a discrete form at the i th control loop, given
the feedback ?(i),
x
d
(i)=
?t
K
d
?t+B
d
A(i)+
B
d
K
d
?t+B
d
x
d
(i?1), (11)
where A is an intermediate variable
A(i)=K
d
x
0
(i)+B
d
˙ x
0
(i)+
K
d
?K
s
z
c
K
s
?(i)
+
B
d
z
c
K
s
˙ ?(i)?
?
g
(i)
z
c
.
(12)
1488
0 0.5 1 1.5 2 2.5 3
?0.05
0
0.05
COM Response
Time [s]
x [m]
Stabilizer OFF
Stabilizer ON
0 0.5 1 1.5 2 2.5 3
?0.1
?0.05
0
0.05
0.1
COP Response
Time [s]
x [m]
Stabilizer OFF
Stabilizer ON
Fig. 5. COM and COP responses during periodic disturbance in ROBO-
TRAN simulation.
0 0.5 1 1.5 2 2.5 3
?1
0
1
2
3
4
After impulsive disturbance
Time [s]
Table Pitch [degree]
Stabilizer OFF
Stabilizer ON
0 0.5 1 1.5 2 2.5 3
?4
?2
0
2
4
During periodic disturbance
Time [s]
Table Pitch [degree]
Stabilizer OFF
Stabilizer ON
Fig. 6. Table orientation variations during (upper) impulsive and (below)
periodic disturbance in ROBOTRAN simulation.
controlled by the stabilizer, so the table also kept stable
orientation. The snapshots of cart-table model’s responses
during periodical disturbance are shown in Fig. 8. In the
contrast, it is obvious that the system without stabilizer
during disturbance acted as a rigid body which caused tilting
and vibration of the table. The table orientation variations
after impulsive and periodic disturbance are shown in Fig.
6, it shows that the stabilizer could avoid the perturbations to
the system thus maintain stability compared to those without
any stabilization.
B. Simulation Study II
Here, the proposed stabilizer is implemented on a multi-
body humanoid robot simulated in ODE (Fig. 9) in order to
test preliminary stabilization and walking control strategies
prior to future implementation on the real COMAN robot.
It has 6 DOFs in each leg, only these 12 DOFs are con-
trolled during the following tests. The upper body joints are
controlled at constraint position. More details of physical
parameters of COMAN can be found in [13].
The desired COM equilibrium superimposed by the stabi-
lizer’s output in (11) are the inputs to the COM based inverse
kinematics [7]. The joint position references solved by the
inverse kinematics are sent to the on-board position con-
trollers. The horizontal components of the resultant torque
in the local feet’s coordinate are computed by
?
x,y
= {?
l
+?
r
+ r
f
l
? f
l
+ r
fr
? f
r
}
x,y
, (15)
0s 0.2s 0.4s 0.6s 0.8s 1.0s 1.2s 1.5s 
0s 0.2s 0.4s 0.6s 0.8s 1.0s 1.2s 1.5s 
Fig. 7. Snapshots of cart-table model response during impulsive disturbance
without (upper) and with (below) stabilizer in ROBOTRAN simulation.
0s 0.3s 0.6s 0.9s 1.1s 1.3s 1.5s 2.0s 
0s 0.3s 0.6s 0.9s 1.1s 1.3s 1.5s 2.0s 
Fig. 8. Snapshots of cart-table model response during periodic disturbance
without (upper) and with (below) stabilizer in ROBOTRAN simulation.
where f
l
, ?
l
and f
r
, ?
r
are the force/torque measured by the
F/T sensor in each foot. r
f
l
and r
fr
are the position vector
from the origin of

B
to the origin of F/T sensor in left
and right foot respectively.
It should be noted that the origin of

B
is deﬁned as
the midpoint of horizontal projections of two ankles. The
global coordinates

W
coincides with

B
while the robot
standing at the initial position. The desired stiffness and vis-
cous coefﬁcients used in this simulation are K
x
d
= 400N/m,
B
x
d
=20Ns/m (sagittal plane), and K
y
d
= 800N/m,
B
y
d
= 100Ns/m (lateral plane). The equilibrium x
0
,y
0
in
(12) and (14) are constant here in standing posture. The
control loop runs at 500Hz.
After an initialization of 0.5s, the center of pelvis moved
to the position (0.0023,0,0.4837)m, meanwhile the calcu-
lated overall COM was at (0.0262,0,0.4350)m which was
close to pelvis center. Therefore, any disturbance applied at
the pelvis were very close to the overall COM and didn’t
generate any distinct moment around the overall COM.
Impact tests were performed to validate the stabilization
control on the full body humanoid. The results are compared
with those using no stabilization control to deal with the
impulsive force. Same impulsive force used in previous
simulation was applied to the robot. The impulse with T =
0.1s,A
max
= 180N was applied to the pelvis at t
0
=0.6s
along the positive direction of x,y axis respectively.
The reactions of the COM and COP after the disturbances
can be seen in Fig. 10 and Fig. 11. It can be observed that
robot dissipated the impulsive force by buffering the COM
along the disturbed direction ﬁrst, then recover to equilibrium
position quickly in both tests inx,y axes after the withdrawal
of disturbances. However, this reaction was not observed
when the stabilizer was off.
Fig. 12 shows the joint torques of left leg after y impulse,
it is found that the hip roll joint generated almost 50Nm
for recovering balance. In contrast, no signiﬁcant torque was
generated while the stabilizer was off.
1490
Fext 
Fext 
(a) 
(b) 
Fig. 14. Snapshots of COMAN’s reaction (a) without and (b) with stabilizer under y impulse while walking in place in ODE.
0 2 4 6 8 10 12
?0.05
0
0.05
(a) Time [s]
y [m]
Desired COM
Stabilizer OFF
Stabilizer ON
0 2 4 6 8 10 12
?0.05
0
0.05
(b) Time [s]
y [m]
?
F
ext
Desired COM
Stabilizer OFF
Stabilizer ON
Fig. 13. COM responses in y direction (a) without disturbance (b) under
y impulse while walking in place in ODE.
As a local stabilization technique, the proposed stabilizer
achieves its functionality by simplicity yet robustness against
various disturbances during standing and walking in place.
Even for a pre-ﬁxed walking pattern, our stabilizer could
already provide prominent self-stability of walking without
re-planning the gait. Therefore, the proposed stabilizer is
promising to be integrated into a control architecture with
gait re-planning at a higher layer in order to produce a
more adaptive and robust walking. Additionally, it requires
reformulation of this stabilizer by using the new support foot
as the base frame alternatively during walking, which will
be the main extension for the future work.
REFERENCES
[1] T. Sugihara and Y. Nakamura, “Whole-body cooperative balancing
of humanoid robot using cog jacobian,” in IEEE/RSJ International
Conference on Intelligent Robots and Systems, vol. 3, 2002, pp. 2575–
2580.
[2] K. Hashimoto, Y. Sugahara, H. Sunazuka, C. Tanaka, A. Ohta,
M. Kawase, H. Lim, and A. Takanishi, “Biped landing pattern
modiﬁcation method with nonlinear compliance control,” in IEEE
International Conference on Robotics and Automation, May 2006, pp.
1213 –1218.
[3] S. Kajita, M. Morisawa, K. Miura, S. Nakaoka, K. Harada, K. Kaneko,
F. Kanehiro, and K. Yokoi, “Biped walking stabilization based on
linear inverted pendulum tracking,” in IEEE/RSJ International Con-
ference on Intelligent Robots and Systems, 2010, pp. 4489–4496.
[4] S. Hyon, J. Hale, and G. Cheng, “Full-body compliant human-
humanoid interaction: Balancing in the presence of unknown external
forces,” IEEE Transactions on Robotics, vol. 23, no. 5, pp. 884–898,
October 2007.
[5] C. Ott, M. Roa, and G. Hirzinger, “Posture and balance control
for biped robots based on contact force optimization,” in IEEE-RAS
International Conference on Humanoid Robots, Bled, Slovenia, 2011,
pp. 26–33.
[6] Z. Li, B. Vanderborght, N. G. Tsagarakis, L. Colasanto, and D. G.
Caldwell, “Stabilization for the Compliant Humanoid Robot COMAN
Exploiting Intrinsic and Controlled Compliance,” in IEEE Interna-
tional Conference on Robotics and Automation, USA, 2012, pp. 2000–
2006.
[7] Z. Li, N. Tsagarakis, and D. G. Caldwell, “A passivity based ad-
mittance control for stabilizing the compliant humanoid COMAN,”
in IEEE-RAS International Conference on Humanoid Robots, Osaka,
Japan, Nov. 29th - Dec. 1st 2012, pp. 44–49.
[8] M. Morisawa, K. Harada, S. Kajita, K. Kaneko, J. Sola, E. Yoshida,
N. Mansard, K. Yokoi, and J. Laumond, “Reactive stepping to prevent
falling for humanoids,” in IEEE-RAS International Conference on
Humanoid Robots, Paris, France, December 7-10 2009, pp. 528–534.
[9] J. Urata, K. Nshiwaki, Y. Nakanishi, K. Okada, S. Kagami, and
M. Inaba, “Online decision of foot placement using singular LQ pre-
view regulation,” in IEEE-RAS International Conference on Humanoid
Robots, 2011, pp. 13–18.
[10] J. Pratt, J. Carff, S. Drakunov, and A. Goswami, “Capture point:
A step toward humanoid push recovery,” in IEEE-RAS International
Conference on Humanoid Robots, December 2006, pp. 200–207.
[11] B. Stephens and C. Atkeson, “Push recovery by stepping for humanoid
robots with force controlled joints,” in IEEE-RAS International Con-
ference on Humanoid Robots, 2010, pp. 52–59.
[12] D. Wight, E. Kubica, and D. Wang, “Introduction of the foot placement
estimator: A dynamic measure of balance for bipedal robotics,”
Journal of Computational and Nonlinear Dynamics, vol. 3, no. 1, pp.
011009–011019, 2008.
[13] N. Tsagarakis, S. Morfey, G. Medrano-Cerda, Z. Li, and D. Caldwell,
“Compliant humanoid coman: Optimal joint stiffness tuning for modal
frequency control,” in IEEE International Conference on Robotics and
Automation, 2013, pp. 665–670.
[14] S. Kajita, F. Kanehiro, K. Kaneko, K. Fujiwara, K. Harada, K. Yokoi,
and H. Hirukawa, “Biped walking pattern generation by using preview
control of zero-moment point,” IEEE International Conference on
Robotics and Automation, pp. 1620–1626, 2003.
[15] H. Dallali, M. Mosadeghzad, G. A. Medrano-Cerda, N. Docquier,
P. Kormushev, N. Tsagarakis, Z. Li, and D. Caldwell, “Development
of a dynamic simulator for a compliant humanoid robot based on a
symbolic multibody approach,” in IEEE International Conference on
Mechatronics, 2013, pp. 598–603.
[16] Z. Li, N. Tsagarakis, and D. G. Caldwell, “Walking Trajectory Gen-
eration for Humanoid Robots with Compliant Joints: Experimentation
with COMAN Humanoid,” in IEEE International Conference on
Robotics and Automation, Minnesota, USA, May 2012.
[17] Z. Li, N. G. Tsagarakis, and D. G. Caldwell, “Walking pattern
generation for a humanoid robot with compliant joints,” Autonomous
Robots, vol. 35, no. 1, pp. 1–14, 2013.
1492
