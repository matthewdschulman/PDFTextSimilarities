(a) Frame: 0
(b) Frame: i
f
i
T v
i 
(Varia!on)
(c)
f
i T
(d1) (d2)
Fig. 6. Eliminating image texture pattern changing regions by noise factors
besides acoustic shadows. Calculating the intensity difference between the
original template (a) and the partial image f
i
(b), which corresponds to
template T in the i th frame. We obtain the image texture pattern change
n
i
(c). Eliminating the acoustic shadow area and the region whose image
texture pattern change n
a
is greater than the threshold value n
th
from T . We
obtain template T . Here, (d1) does not have an acoustic shadow, but (d2)
does have an acoustic shadow.
D. Step 3: Eliminating Image Texture Pattern Changing
Regions by Noise Factors Besides Acoustic Shadows
In this step, we perform the following three sub-steps.
[Step 3-1] Calculate the intensity difference between
the original template T (Fig. 6(a)) and the partial image
f
i
(Fig. 6(b)), which corresponds to template T in the
i th frame. We obtain the image texture pattern change
v
i
as the following equation (Fig. 5(c)).
f
i
? T = n
i
(i?N= 1;2;···) (6)
[Step 3-2] Calculate v
i
for all frames (i= 1;··· ;?F
r
·
S
t
?) and obtain the average image texture pattern change
n
a
. This shows the image texture pattern change during
the quasi-periodical kidney motion. Here, F
r
is the frame
rate of the obtained video images in Step 1-1.
n
a
=
1
?F
r
· S
t
?
S
?F
r
·S
t
?
i=1
|n
i
| (7)
[Step 3-3] Eliminate the acoustic shadow area and the
region whose image texture pattern change n
a
is greater
than the threshold value n
th
from T . We obtain template
T (Fig. 6(d1) and (d2)). Here, (d1) is the obtained T
that does not include an acoustic shadow. On the other
hand, the image in (d2) includes an acoustic shadow.
The black region in (d1) and (d2) is eliminated from
the template to calculate the correlation value between
template T and the realtime input video images so as
to enhance the robustness to track and follow the body
targets, which incorporate stones and tumors.
Fig. 7. Experimental results of ofﬂine motion tracking experiments of
kidney by larger templates.
IV. EXPERIMENTS
We conducted (i) ofﬂine tracking experiments and (ii) real-
time online tracking and following experiments of the human
kidney motion of a healthy subject to conﬁrm the effective-
ness of the proposed robust template matching method. We
compared the proposed method with the conventional and
original template matching methods.
A. Ofﬂine Motion Tracking Experiments of Kidney by Larger
Templates
We conducted experiments of ofﬂine tracking and follow-
ing the target kidney to conﬁrm the effectiveness of the
proposed robust template matching method. In the present
experiment, a larger template is selected. This template is
larger than that in the following Section IV-B. The experi-
mental results are shown in Fig. 7.
In the ﬁgure, as just mentioned, the larger region is
selected as a template. Spike-like noises occur in the tracking
by the conventional original template, whereas no tracking
misses are observed in the tracking by the proposed robust
template. However, the improvement of the tracking perfor-
mance is relatively small as compared to that by the smaller
templates in Section IV-B.
B. Ofﬂine Motion Tracking Experiments of Kidney by
Smaller Templates
In this present experiment, the smaller template is selected,
in contrast to the one selected in the above Section IV-A. The
experimental results are shown in Fig. 8.
In the ﬁgure, the smaller region is selected as a template.
Spike-like noises occur more frequently in the tracking by
both the conventional original template and that by the
experimental result described in Section IV-A.
The average tracking miss rate of the proposed robust
template matching method is 4.5 percent, while that of the
conventional original template is 15.6 percent in 30 randomly
selected templates (Fig. 8). It is conﬁrmed that the proposed
1934
