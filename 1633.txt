Heading alignment with summarized inertial pose constraints
Dehann Fourie, Kenny Uren, and George van Schoor
Abstract—A discontinuity seems to exist in present aided
inertial navigation systems – the operational availability of high
cost inertial navigation currently depends on the availability of
a valid GPS lock. In general GPS solutions can be two or
more orders cheaper than their inertial sensors counterparts.
Thispaperaddressesthenorthalignmentbygyrocompassingin
the context of more modern smoothing techniques. Incremental
smoothing is becoming a serious contender for in-situ state
estimation. The work here presents a probabilistic model
for north alignment with an analysis towards the achievable
accuracy of such a system. A pose graph formulation is used to
estimate inertial sensor calibration terms over a long spanning
trajectory, from which a true north alignment can be extracted.
The preintegral method is used to condense high rate inertial
data, but allow for post integration bias correction. Results
showthattheproposedalignmentschemeisfeasible,andwould
for gyrocompassing alignment relaxed sensor performance
constraints.
I. INTRODUCTION
Large robotic equipment and vehicles often require good
state navigational state estimates. Various navigational aids
are available for different situations. Inertial measurement
units are often employed in combination with aiding sensors
such as global positioning system (GPS) satellite naviga-
tion. Higher class inertial sensors are often required to
obtain an unaided true north through measurement of the
earths rotation rate. In 1984, Johnson presented a continuous
adaptive gyrocompassing technique without external aiding
measurements such as GPS [1]. Gyrocompassing, or inertial
alignment, is considered a fundamental problem in naviga-
tion / localisation. Present approaches either assume prior
knowledge of heading or build an inherent dependence on
some absolute position or velocity measurement.
Higher class inertial gyroscopes are able to sense the
earth’s rotation rate and use it as an azimuthal alignment
measurement for Inertial Navigation Systems (INS). Beyond
high cost inertial solutions, magnetic and GPS techniques are
generally used for lower cost absolute heading alignment.
Alignment refers to process of estimating and obtaining
conﬁdence in the local level, north pointing direction.
Autonomous underwater vehicles (AUVs), by example,
beneﬁt a great deal from accurate heading alignment – by
being able to navigate under water by dead reckoning. While
a magnetic compass, acoustic navigational aids or even
occasional surface GPS readings may be used to navigate a
vehicle in open water; these navigation aids will be of little
use when operating near ferrous materials, acoustic reﬂective
surfaces or during submerged operation.
A. Overview
Section II presents a brief context at the state-of-the-
art gyrocompassing. Contributions are presented, followed
by a brief historical survey. The north alignment problem
is deﬁned in section III, and used as basis for deriving
a probabilistic north alignment model. Methods and an
analysis of achievable performance is presented near the end.
A critical analysis of the proposed technique is given.
B. Contribution
An alternative formulation exists for the true north heading
alignment problem. Heading alignment can be achieved
during dynamic motion of the IMU cluster – extending the
work of conventional carouselling schemes. This work differs
in that the dynamic stimulus of the IMU is not a predeﬁned
carouselling scheme.
The motivation is based on an observation from the origi-
nal mechanical gyrocompass. Mechanical systems are able to
operate in dynamic environments – through Schuler tuning –
without absolute position or velocity aiding measurements.
Present ﬁltering based strapdown gyrocompass approaches
mirror mechanical systems, by estimating only the current
system state; permanently incorporating all errors and ap-
proximations into the state covariance matrix. This happens
through the state marginalisation process inherent to recur-
sive ﬁltering. By example, the state residual update gain
– sometimes the Kalman gain – becomes sub-optimal and
bakes system errors into the single snapshot state estimate.
Sigma Point Kalman ﬁlters, [2], improve on propagating
state covariance through non-linear transforms, but still only
considers a single snapshot in time.
Smoothing is gaining popularity and has the advantage
of tractably maintaining long data streams; access to previ-
ous measurements are directly available to the optimisation
process. This gives the user the privilege of hind sight,
allowing one to go back and compute the best ﬁt solutions
to a collection of data. Intuitively then, one can expect a
larger computational cost, but greater processing freedom
than having to operate on single snapshots of estimated state.
Classical coarse alignment, section II-B, requires the sys-
tem to remain stationary for a period of time and can take
anything from a few minutes to hours. The stationary require-
ment exists because present unaided alignment formulations
require undisrupted measurement of the small earth rotation
rate signal. This paper shows an alternative method which
exploits the advantages of smoothing. Modern smoothing
allows computationally efﬁcient methods to fuse information
from various sensors and estimate observable system states.
2014 IEEE International Conference on Robotics & Automation (ICRA)
Hong Kong Convention and Exhibition Center
May 31 - June 7, 2014. Hong Kong, China
978-1-4799-3684-7/14/$31.00 ©2014 IEEE 2757
This paper illustrates that gyrocompassing can be done
with in-situ smoothing. Alignment to an absolute North
heading reference is achieved by ﬁrstly observing sensor
error terms through non-absolute aiding measurements; after
which the sensor errors are subtracted from the already
measured data and then optimised towards the modeled earth
rotation rate. More than that, measured earth rate and gravity
can be used as the only absolute measurements made by the
system. Aiding through use of only relative frame constraints
can still be used to obtain a true north alignment in dynamic
situations. The authors have not yet encountered a similar
statement in public literature.
This statement may seem subtle, but implies absolute
information is not required for an inertial based north align-
ment process. Relative constraints on position of velocity can
be sufﬁcient to aid an inertial solution towards a true north
alignment. We do note, in this paper, we still assume absolute
latitude is known as initial condition, however, ﬁltering
approaches have alreadly shown one is able to estimate
heading and platform latitude concurrently. These approaches
still use high class sensors. From an operational standpoint,
a user supplied latitude at start-up is not uncommon.
This paper shows that inertial sensors that were previously
considered of too poor quality can be used to estimate a
true north alignment. The operational premise is that many
robotic systems operate over long time spans, and using the
sensor data in a smoothing framework, allows the designer
to extract true heading alignment from the dynamically
calibrated inertial sensor measurements.
This paper presents the following contributions towards
the state-of-the-art:
1) The concept of gyrocompassing with opportunistic
modulation of the earth rotation rate signal;
2) A smoothing, rather than marginalising ﬁlter, data
processing framework;
3) The use and preliminary impact analysis of using
inertial preintegrals [3] for inertial constraints pose
graph constraints [4]; and
4) Present the separation of concerns question – mixing
of various performance sensors – in light of smoothing
based approaches (Section VI-A).
Presently, little information, if any, has been found in the
public domain relating to gyrocompassing in the manner
presented here.
II. BRIEF SURVEY
A. History
The ﬁrst mechanical gyrocompassing device was by Van
den Bos in 1885, but he was unable to demonstrate a working
prototype. Antshutz, in Germany, was able to demonstrate a
working prototype around 1902. Iron-hull ships emerging,
and saught after in the build up to the First World War.
Ferrous materials, however, disrupted the magnetic compass.
With the stimulus of war, and following a demonstration by
Antshutz, Sperry developed his own gyrocompass and was
widely used during WW I.
The gyrocompass consisted of a spinning mass, the axis
of which would rotate relative to local level as the earth
turned. Any misalignment of the gyro from the due East
direction – zero earth rotation axis – produced would tend
to deviate the system from a local vertical reference. Local
vertical was obtained by measuring gravity. By servoing the
spinning mass by about the vertical, with negative feedback,
a useful North alignment could be obtained. A pendulum
was an attractive option to establish the vertical, but was of
little use under unknown platform accelerations.
Antshutz employed Max Schuler to resolve the ”issue
of the vertical” under unknown ship accelerations. His
work, [5], resulted in an elegant and generic tuning method.
Schuler noted that if the pendulum’s centre of mass were to
coincide with the centre of the earth, all lateral accelerations
would not deﬂect the pendulum from the local vertical. That
is a pendulum with harmonic oscillation at approximately
84:4 min.
In practice, a gyro-pendulum is used to emulate this
oscillation period. This allowed the Antshutz system to
successfully operate in dynamic marine environments. Today,
Schuler tuning is widely employed as a Kalman Filtering
tuning method for aided inertial navigation systems.
B. Direct Gyrocompassing
For linearized systems, an approximate heading angle must
ﬁrst be obtained at start-up. A process commonly referred to
as coarse alignment. Direct trigonometry is used to extract
heading alignment from horizontal gyroscope measurement
components of earth rotation, !
ie
, [6], [7], [8], [9]:
 = atan2
p
q
(1)
where, is the local level north to body x axis angle. The
triad of body measured rotation rates is!
b
= [p;q;r]
T
. Note,
the forward-right-down convention is used respective to the
body x-y-z axes.
This approach imposes two major requirements; Firstly,
the system must remain stationary for some period to obtain
the initial alignment. The coarse alignment period is dictated
by the noise performance of the gyroscopes. Secondly,
this direct approach imposes a severe requirement on the
gyroscope bias [6].
C. Maytagging and Carouseling
Maytagging and continuous carouseling [10] methods
have been employed to reduce the gyroscope bias perfor-
mance requirements, or further increase the long term navi-
gational accuracies of ship borne inertial navigation systems
(SINS).
Johnson’s work [1] is an carouseling extension of a stap-
down gyrocomassing approach presented by Britting [6]. His
study showed a two gyroscope system using a Kalman ﬁlter
for heading alignment, supplemented with a secondary low
pass ﬁlter and accelerometers to resolve the local vertical.
More recently, Renkoski [11] investigated multidimensional,
but periodic carouseling patterns.
2758
The advantage being, carouseling modulates the earth
rate signal allowing the designer to discern the earth rate
from the sensor biases. In some way, the next step is
to incorporate an opportunistic modulation scheme, rather
than strictly periodic to the gyrocompassing process. The
intention furthermore is to use the motion of the platform
as the random modulation signal. The premise then is that
smoothing, over ﬁltering, is better suited towards such a goal.
D. Optical Landmark Alignment
Optical heading alignment – widely used by surveyors –
relies on sighting of landmarks at known locations. Planar
geometry allows one to resolve the objective north alignment
from several sightings. Electronic versions of such systems
are known to exist and are mostly used in the maritime
setting, whereby a ship’s compass can be aligned more
quickly through sightings of known landmarks.
E. Absolute Position and Velocity Aiding
Probably the most dominant approach used in aided iner-
tial navigation today, is where inertial position and velocity
solutions are aided by absolute external references such as
GPS [9], [12]. Furthermore, aiding of the inertial solution
is generally done with an extended Kalman ﬁlter (EKF).
The standard mechanisation derives an orientation esti-
mate from the gyroscope measurements and projects body
measured accelerations into the estimated navigational frame.
The projected accelerations can, in turn, be double integrated
to obtain velocity and position estimates. While estimation
errors in pitch and roll are observable through the gravity
vector [8], the heading angle is generally extracted through
residual lateral velocities. Mismatches between inertially
predicted lateral motion the aiding velocity measurement is
fed back to better align the platform course.
F . Filtering
The EKF is the workhorse of most modern aided inertial
navigation systems [8]. The Jacobian derivative method used
by the EKF is sensitive to initialisation errors [12], enforcing
the coarse heading alignment requirements. The EKF ﬁlters
have an even larger drawback, in that they marginalise
errors from previous states, permanently baking errors into
the single snapshot estimate. Errors in state and covariance
estimates are artiﬁcially bled from the solution using process
noise, without recourse.
This baking problem is of particular concern to unini-
tialised non-linear attitude dynamics. These errors are com-
monly dealt with through tighter linearisation requirements,
increasing process noise or the use of iterative ﬁltering
methods [13]. Process noise effectively allows outside
measurement information to inﬂuence the state estimates
more than the internal models predict and presents a rather
crude approach, overpowering the delicate gyrocompassing
task.
In 2006 Ahn, [14], showed how different strapdown at-
titude ﬁlter parameterisations inﬂuence the gyrocompassing
performance. Use of an angle axis misalignment parame-
terisation in the ﬁlter improved observability of the gyro-
compassing process. Maintaining proper manifold mechani-
sations will avoid mapping and projection related problems.
This aspect is one of the main contributions of the large
heading uncertainty EKF models presented by Kong [15].
III. PROBLEM STATEMENT
The main problem to address is how to align a robotic
system to the local north reference, starting with no prior in-
formation, without absolute aiding information, on a moving
platform.
IV. THEORY
Fig. 1 presents a conceptual time snapshot view of true and
predicted north heading. It is desirable to have the platform
which is free to rotate, while reﬁning its north alignment as
more measurements are gathered. The instantaneous direc-
tion of the measurement body is denoted by x, and heading
misalignment is denoted by A.
Fig. 1. A conceptual view of true and estimated north at any point in time.
The projections are shown on the manifold with the platform forward axis
direction, x, decoupled from the alignment process and is free to rotate.
Angular manifolds are used to describe rotational trans-
forms. Taylor [16] mentions how several manifolds exist for
batch optimisation methods. The most commonly used in
the conventional inertial navigation is the incremental tangent
space. This is equivalent to the linear small angle assumption
that is commonly used in the derivation of the EKF based
architectures.
Algorithms which process strapdown inertial sensor infor-
mation must be able to handle sensor errors. It has become
common place to dynamically estimate sensor bias terms
with a Kalman ﬁlter through aiding information. The ﬁlter
uses process and measurement noise as terms to allow for
softness in the estimation process. It is imperative then, that
we introduce similar ﬂexibility regarding sensor measure-
ments in the smoothing context.
Some challenges surrounding the orientations for pose
graph optimisation were highlighted in a recent paper by
Carlone [17]. Carlone’s paper mentions the difﬁculty in
2759
estimating the maximum likelihood estimate of pose states
due to orientation states at each node, which is effectively
the consecutive compositionof trajectories on a rotational
manifold. The orientation states have a non-trivial topology,
making the problem highly non-linear and non-convex. Car-
lone’s paper provides a multi-hypotheses global optimisation
that does not suffer from local minima.
A. Alignment Process Deﬁnition
Consider the inertial heading alignment process within a
factor graph framework. A generalised representation of sys-
tem state variables, whereby relations between the variables
are deﬁned in a manner which impose fewer assumptions
than current ﬁltering methods. This freedom allows greater
ﬂexibility in the capabilities of the ﬁnal system. The fac-
tor graph encodes the constraints between variables, which
are then optimised through various non-linear optimisation
techniques (see section IV-D).
Pose graphs are a special case of factor graphs where the
navigational states of the system are represented by poses
at discrete time instances, shown as the green nodes in ﬁg.
2. Furthermore, Bell [13] showed the equivalence between
iterated ﬁltering, used as smoother, and direct non-linear
optimisation of structures which are now referred to as factor
graphs.
Fig. 2. Trivial factor graph showing pose variable states as green nodes,
for time instances t
k
;t
k+1
and t
k+2
, and inertial residual constraints
f
inertial
. The inertial residual constraints depend on sensor error and
alignment variable in the blue node C
k
.
Constraints between the pose states are established by
allocating a cost function to the residual error between
predicted and measured values. Measurements gathered from
the inertial measurement unit (IMU) are used to deﬁne fac-
tor nodes between successive variable nodes. The expected
gravity and earth rotation rate parameters are then captured
in the factor node cost functions. Notice that the factor graph,
other than the initial condition, is not anchored to absolute
reference information other than inherently measured earth
rotation and gravity.
Alignment is achieved through optimisation of the mea-
surement residuals captured in the inertial constraints, given
later in (14). North alignment becomes possible by separating
gyro sensor biases from the earth rotation rate, in the same
way that pitch and roll alignment with the local level is done
by separating accelerometer biases from measured gravity.
This is made possible under the assumption of modulation
of the earth rate and gravity signals.
Indelman [4] showed it is not practical to incorporate
high rate inertial measurements directly in a factor graph
formulation. Around the same time, Lupton, [3] proposed
the use of inertial preintegrals, and was later adopted by
Indelman in [4] as direct inertial pose graph constraints.
B. Probabilistic Model for North Alignment
The starting point for the mathematical manipulations
presented below are based on two fundamental ideas:
1) We can represent the north alignment as a probability
function, which depends on measurements from a
sufﬁcient set of sensors; and
2) We can factorise the probability function as the product
of individual functions based on separate, independent,
measurements from the sensors. A sparse data repre-
sentation can be constructed, and can then be solved
through a non-linear optimisation process.
Fig. 3. Conceptual view of multiple poses being optimised. Heading
misalignment is shown as ’A’ on the straight lines representing the loga-
rithmic map of the yaw angle on a manifold. The Gaussian cost of heading
prediction measurement residual is depicted by the parabola. The remaining
cost of misalignment in the system is shown as ’O’. True north is shown
through ’N’ and the current estimated north is shown as ’
˜
N’. Variable ’x’
represents the current body X axis direction.
Portions of the notation from [18] are used here. Consider
a set state variables, up to time t
k
, are to be estimated, and
are collected in a setV
k
:
V
k
_ =fX
k
;C
k
g (2)
where X
k
are the normal state variables and C
k
are sensor
calibration state variables. The joint probability distribution
of all the variables can be abstracted as:
p (V
k
jZ
k
) (3)
That is the probability distribution of the function for all
the system variables, given the collection of measurements
which have been made until that point in timeZ
k
. The best
ﬁt solution to all the measurements can then be found by
inferring the maximum a posteriori (MAP) estimate of all
variables which have been included in the system up to that
point in time. This can be written as:
V

k
= argmax
V
k
p (V
k
jZ
k
) (4)
2760
where,V

k
represents the optimal assignment of estimated
variables to the available measurement information. This
optimal assignment of values to state variables is subject to
the assumptions made during the optimisation process. The
choice of probability distribution and inference method are
main factors.
With this in hand, the north alignment problem can be
written as an optimisation problem. The focus now shifts to
how inference is drawn on the joint probability distribution in
the context of inertial measurements. The problem is broken
down by using a factor graph representation of the state
variable and measurement information.
1) Graphical Model Representation: Factor graphs [19]
have become a popular representation in the simultaneous
localisation and mapping (SLAM) community. Factor graphs
consist of factor, representing some constraint, and variable
nodes representing the variables being estimated by the sys-
tem. The nodes encode the relation between state variables
which are to be estimated. Factor graphs effectively encode
the factorisation of the global joint probability function,
given in (3), in that each factor node represents an individual
term of the global joint probability:
p (V
k
jZ
k
)/
Y
i
f
i
 
V
i
k
;Z
k

(5)
where,V
i
k
is the subset of variables involved with individual
constraint function f
i
. The optimisation problem presented
by (4) and (5) can be solved by letting each factor node
represent a costing operationDfg.
f
i
 
V
i
k
;Z
i
k

=Df
i
k
g (6)
with, 
i
k
representing the prediction-measurement residual:

i
k
=h
i
 
V
i
k

 Z
i
k
(7)
If the residual cost function is assumed to be Gaussian, the
optimisation simpliﬁes to the least squares best ﬁt solution.
The cost function is represented by the normal distribution
function:
D


i
k
	
=exp

 
1
2

i
k
T

i
 1

i
k

(8)
where,
T
denotes the transpose, and 
i
is a weighting covari-
ance matrix, effectively the Mahalanobis distance squared.
Note that selection of the cost function is not restricted
to only the Gaussian case. Other cost functions have been
used in analogous iterated optimisation structures, including
the pseudo-Huber or t-distribution [20]. While different
cost functions may promote certain desirable properties –
including robustness or better error distribution modelling –
it is not the focus of this paper.
The Gaussian residual assumption simpliﬁes the optimisa-
tion in that the proportional constraint in (6), and following
from (4), we can manipulate the system objective expression;
keep in mind that multiplying the costing function by a
constant value does not vary the location of the optimum
point:
V

k
= argmin
V
k
[  logf (V
k
;Z
k
)] (9)
= argmin
V
k

  log exp

 
1
2

k
T

 1

k

(10)
Note, in the above equation we have stacked individual
prediction and measurement data into a single residual vector

k
. Next, we simplify the logarithm exponent pair and drop
the half in the exponent:
V

k
= argmin
V
k
kh (V
k
) Z
k
k
2

(11)
where, following from (8), we use the shorthandk
k
k
2

=

k
T

 1

k
.
C. Inertial Factors
The gyrocompassing task relies on the solution of (11),
given inertial constraint factors which are sensitive to head-
ing alignment and gyroscope bias. Given sufﬁcient data, the
heading and biases become observable and can be estimated
by the optimisation process. The minimum cost assignment
of variable V
k
therefore represents the best estimate of
heading alignment and sensor bias, for data until time k.
As a consequence, inertial factor constraints must be
formulated such that bias and heading alignment errors can
be subtracted from the constraint terms. In the conventional
inertial sensor integration sense this is a difﬁcult operation.
A further problem, as was encountered in [4], is that
inertial measurements are usually taken at a high rate and
would result in a large system of equations. The inertial
preintegral method proposed by Lupton [3] introduces a
way to circumvent both these problems.
At this point we should remember that some early gyro-
scopes are referred to as rate integrating designs, whereby
forces or rates are mechanically integrated and measurements
are presented as an accumulated value for the sample period.
Many modern strapdown sensors still support delta angle and
delta velocity modes.
1) Inertial preintegrals: Present state-of-the-art tech-
niques build upon integration of high rate samples, after
bias and gravity corrections have been applied. However,
under the MAP computation framework errors in the bias
and gravity components must be tractable: Stated differently,
iterative reﬁnement of estimates update the state estimate. As
a consequence the linearisation point used for the constraint
functions also change. The manner in which inertial data are
used in the graphical model must therefore allow the user to
update and modify these already integrated perturbations.
Inertial preintegrals offer a convenient manner to sum-
marise inertial measurements, but allow a mechanism
whereby the mentioned errors can be updated in a tractable
manner. To reduce the amount of inertial constraints, the
measurements are integrated over any time period as a
summary of motion. Summarising high rate data reduces the
2761
state size of the problem, but creates a trade-off in preintegral
correction accuracy. The question becomes for how long
should inertial data be summarised before it is added as
constraint to the pose graph.
2) Summarising Inertial Measurements: The computa-
tions for preintegrals are split into two categories. The
ﬁrst is the summarising process whereby high rate inertial
information is summarised, and the second on how errors
within the preintegrals are compensated and used to perform
inference within the probabilistic model.
The preintegrals are used to predict the platform heading
by accumulating delta headings from each interpose con-
straint. Interpose constraints formed by integrating IMU data
relative to the previous pose:
^
R
bt
2
bt
1
=
t2
Y
t=t1
expmap
 
!
b
t
t

(12)
where, t =t
2
 t
1
is the summary of motion from the
high rate sensor information from time t
1
to t
2
, and
^
R
bt
2
bt
1
is a rotation matrix representing the orientation between the
two instances in time. The expansion here uses zeroth-order
integration. Savage [21] presents more accurate methods,
including the Picard solution, which further support coning,
sculling and scrolling corrections in an efﬁcient manner.
The heading angle, relative to the present estimate local
navigational frame, is predicted with the current interpose
delta in addition to the previous pose estimated navigational
orientation:
^
R
n
b
k+1
=
^
R
n
b
k
^
R
bt
k
+t
bt
k
(13)
Since we do not know the initial heading, we assume it
to be zero. The optimisation process will be able to observe
the global heading alignment of the system once sufﬁcient
information has been gathered to overcome sensor noise
limitations.
Gyroscope sensor noise is an important consideration for
gyrocompassing systems. Noise creates uncertainty in the
measurement and is only reduced at a rate of the square root
of sample number. In the conventional sense of strapdown
coarse aliment, a doubling of sensor noise would induce a
square on the time required to measure the earth’s rotation
rate to the same accuracy.
3) Inertial Inference: The second step is the probabilistic
inference step whereby predicted navigational states are
inferred from the preintegrals and effectively allows the user
to extract use pose updates and correct compensation terms.
The predicted mean is computed by:
h (x;C) =
 
w
L
ie
cos( + +!
 
t) +!
v

t (14)
where, x = [ ] is the pose predicted heading variable.
The calibration states are denoted by C = [ ;!
 
;!
v
]
T
,
representing heading misalignment, yaw gyro bias and ver-
tical gyro bias errors. Local horizontal north pointing earth
rotation rate is given by!
L
ie
= cos, where is the latitude.
The measurement prediction residual is computed with:

k
=h (x;C)j
t1
 Z
heading
k
(15)
Z
k
=logmap

^
R
n
b
k+1

(16)
D. Optimisation Solutions
Eq. (11) is the link between a pose graph representation
of the north alignment problem and numerical optimisation
techniques. A great many techniques – including Newton,
gradient descent and trust-region – exist for optimising
problems of this form. Furthermore, the work of Kaess et al.
[22] allow incremental solution of such problems. This paper
is not focussed on the method used to solve (11), however
a few considerations must be highlighted.
The system encoded by the pose graph must be ob-
servable: There should be more constraint than degrees of
freedom in the system. Eq. (11) effectively describes a non-
linear regression problem. In general, the north alignment
problem will be over-deﬁned and variables can be estimated
with greater accuracy as more measurement data is included
in the regression process– analogous to solutions of the
SLAM problem in robotics.
V. RESULTS
In this section we present results through simulation of
the theory presented in the previous sections. Simulation
intends to determine the accuracy and feasibility of north
alignment under variation of some model parameters. The
main outcome of this exercise is to determine how much
of an inﬂuence gyroscope noise, and preintegral summary
period have on the gyrocompassing outcome. A further
aspect is whether there is a signiﬁcant improvement between
higher or lower bandwidth random modulation of the earth
rate signal.
Solution of the optimisation problem presented in (11) is
done with MATLABs optimisation toolbox.
0 1 2 3 4 5 6 7 8 9 10
?20
?10
0
10
20
Time [min]
Earth rate [
o
/hr]
Latitude 40
o
N
0 1 2 3 4 5 6 7 8 9 10
?200
?100
0
100
200
Time [min]
Heading [
o
]
 
 
Bandwidth 3
Bandwidth 9
Fig. 4. Two randomised sample heading trajectories to illustrate difference
between a higher and lower bandwidth models. Bottom ﬁgure shows
respective modulated earth rate signals for a system assumed to be at 40
o
latitude.
The simulated system is concerned with extracting north
alignment from strapdown sensors which are rotated about
the vertical axis during the north alignment process. It
is assumed that a vertical reference is available through
2762
accelerometer based measurement of the the gravity vector.
Assuming then that pitch and roll angles are available to
some accuracy, we are only concerned with the horizontal
components of the measured earth rotation rate.
Furthermore, the measurements are made from a dynam-
ical platform reducing the requirement for dual orthogonal
rate measurement. Clearly a full 6DOF mechanisation will be
required to use this system in practice, but [18] has already
shown that this is possible. This paper is concerned with
whether a smoothing mechanisation can be used effectively
for gyrocompassing. Furthermore, Schuler tuning has already
shown that gyrocompassing is possible in the presence of
disturbance accelerations.
The simulation mechanises a single horizontal measuring
gyroscope and a vertical measuring yaw angle gyroscope.
The system is randomly rotated about the vertical axis for
a spread of higher and lower bandwidth trajectories. Two
example trajectories are shown in ﬁg. 4. The bandwidth
parameter is deﬁned as a heuristic parameter between 0 and
10, representing a range of motion from nearly stationary to
high rotational dynamics. Gyroscope measurements data rate
is set at 100 samples per second.
Section IV-C.2 presented inertial preintegrals. The prein-
tegrals are formed by summarising high rate inertial data
for a period t. Compensation terms for errors in the
preintegrals are subtracted from the preintegrals during the
inertial inference step. The compensation terms represent
integrals of the error components in the preintegrals, but
integrated by a single large zeroth-order integration step.
Large integration errors here will disrupt the achievable
alignment accuracy of the system.
Fig. 5 shows the achievable RMS heading alignment from
a randomised heading and gyroscope bias. Figures were
obtained by drawing the root mean square performance
for 500 runs per data point. The ﬁgure is computed for a
gyroscope measurement noise parameter, set at  = 3
0
=hr.
Fig. 5. Top ﬁgure shows RMS alignment accuracy over time in minutes,
across three inertial preintegral bin sizes. The lower ﬁgure shows the bias
estimation accuracy as a percentage of gyro bias remaining after the inertial
inference correction process.
While ﬁg. 5 presents RMS performance over gyrocom-
passing time, there is an interesting relation between the gyro
measurement noise and preintegral bin time variation. Fig. 6
shows misalignment and gyro bias estimation accuracy for a
ﬁxed gyrocompassing time of 10mins, but with a variation
of gyroscope measurement noise performance. Similar bin
size variations are maintained.
Fig. 6. Figure showing two gyrocompassing RMS performance bound-
aries. The top ﬁgure shows remaining misalignment error after 10 mins
of gyrocompassing. Three preintegral bin sizes are shown as individual
curves. Gyroscope measurement noise and preintegral integration errors are
indicated. The lower ﬁgures shows the
Based on curve gradients, two asymptotic system error
sources can be seen in ﬁg. 6. The ﬁrst is associated with gyro-
scope measurement noise, indicated as noise limit, and places
a lower bound on the achievable gyrocompassing accuracy.
The second is the level gradient, denoted integration limit,
associated with the zeroth-order integration term in (14). This
too presents a lower bound on alignment performance, and
is a function of the preintegral bin size.
A last result, shown in ﬁg. 7, indicates the sensitivity
to variation in sensor noise. Here the bin size is ﬁxed and
performance is determined based on the available gyrocom-
passing time. As more gyrocompassing data is collected,
a more accurate the solution can be estimated. The results
here show that heading alignment through gyrocompassing
principles is possible in the probabilistic framework. The
next section gives a critical analysis.
1 2 3 4 5 6 7 8 9 10 20 30
10
?1
10
0
10
1
Bin size 2.5 s
Misalignment [deg, RMS]
Time [min]
 
 
 1
o
/hr (1?)
13
o
/hr (1?)
25
o
/hr (1?)
1 2 3 4 5 6 7 8 9 10 20 30
10
?1
10
0
10
1
% bias (RMS)
Time [min]
Fig. 7. The top ﬁgure shows RMS misalignment estimation accuracy over
time, for three gyroscope measurement noise performances. The bottom
ﬁgure shows the associated bias estimation accuracy.
VI. CRITICAL ANALYSIS
Fibre Optic Gyroscopes (FOG) and modern MicroElectro-
Mechanical Systems (MEMS) gyroscopes are becoming a
2763
dominant technology in the inertial sensor market, replacing
older and more expensive Ring Laser (RLG) and mechanical
Dynamically Tuned (DTG) technologies. Inertial sensor cost
is driven by four main desired performance factors: These
include measurement noise, bias, volumetric size and power
consumption. While further improvements in these areas re-
main difﬁcult, newer data processing techniques can support
the north alignment requirement.
The process presented in this paper shows that north
alignment can be done with a relaxation of some sensor
performance and operational requirements. The method ex-
tends the idea of existing carouselled systems, and proposes
a replacement for ﬁlter based aided navigation approaches.
Smoothing gives the designer the ability to maintain and
reuse all measured data which has been gathered, and in
turn allows simultaneous reﬁnement of gyroscope bias and
system misalignment estimates.
A. Separation of Concerns
An additional and recurring question within the iner-
tial navigation community is whether sensors of different
performance can be mixed in a single IMU cluster. Cost
or volumetric constraints are general reasons for wanting
to do this. Consider a terrestrial robot which on average
does not pitch or roll signiﬁcantly. One could argue that
gyroscope accuracy requirements for these axes could be
relaxed, while maintaining a better quality gyroscope for the
heading estimate.
Mixing of sensor qualities to save costs does make intu-
itive sense, but unfortunately does not hold. Many groups
have tried this, and the general response is that through
dynamics the heading estimate is degraded through marginal-
isation and projection of measurements from the lower
quality sensors onto the ”accuracy sensitive” axis.
By adding a low dynamics assumption to some subset
of estimate parameters, smoothing may present the further
advantage – being able to track how much good or bad sensor
information is being projected onto the respective reference
frame axes across the entire trajectory. A projection from a
poorer sensor only affects a limited number of poses in the
sapce of the entire trajectory. Although estimate propagation
is still based on this degraded measurement, marginalisation
does not occur and thereby avoids the baking problem. The
event is temporally contained to in time and space, allowing
greater separation of concerns during estimation process.
VII. CONCLUSION
Many robotic applications rely on accurate heading align-
ment. Presently, most systems meet this requirement by
adding a low-cost GPS or magnetometer dependency. Other
applications, including underwater robotics, may not have
access to either such measurements. Methods such as acous-
tic ranging or terrain referenced navigation exist, but are
difﬁcult in cluttered, dynamic or ferrous environments. Gyro-
compassing is the only self contained alternative for heading
alignment, and given recent developments in smoothing, it
is important to reconsider the strapdown gyrocompassing
process in that regard. Smoothing offers many advantages
over the limitations inherent to the current dominant EKF
method.
the computation of an efﬁcient incremental update to  g.
REFERENCES
[1] C. Johnson, “Adaptive corrective alignment for a carouseling strap-
down ins,” in American Control Conference, 1984, pp. 1856–1861,
IEEE, 1984.
[2] S. J. Julier and J. K. Uhlmann, “Unscented ﬁltering and nonlinear
estimation,” Proceedings of the IEEE, vol. 92, no. 3, pp. 401–422,
2004.
[3] T. Lupton and S. Sukkarieh, “Visual-inertial-aided navigation for high-
dynamic motion in built environments without initial conditions,”
Robotics, IEEE Transactions on, vol. 28, no. 1, pp. 61–76, 2012.
[4] V . Indelman, S. Williams, M. Kaess, and F. Dellaert, “Factor graph
based incremental smoothing in inertial navigation systems,” in In-
formation Fusion (FUSION), 2012 15th International Conference on,
pp. 2154–2161, IEEE, 2012.
[5] W. Wrigley, “Schuler tuning characteristics in navigational instru-
ments,” Navigation, vol. 2, no. 8, pp. 282–290, 1950.
[6] K. R. Britting, Inertial Navigation Systems Analysis. 1971.
[7] A. Chatﬁeld, Fundamentals of High Accuracy Inertial Navigation,
vol. 174. AIAA, 1997.
[8] P. D. Groves, Principles of GNSS, inertial, and multisensor integrated
navigation systems. Artech House, GNSS Technology and Application
Series, 2008.
[9] D. Titterton and J. Weston, Strapdown inertial navigation technology,
vol. 17. IET, 2004.
[10] M. S. Grewal, L. R. Weill, and A. P. Andrews, Global positioning
systems, inertial navigation, and integration. John Wiley & Sons,
2007.
[11] B. M. Renkoski, “The effect of carouseling on MEMS IMU per-
formance for gyrocompassing applications,” Master’s thesis, Mas-
sachusetts Institute of Technology, 2008.
[12] J. Farrell, Aided navigation: GPS with high rate sensors. McGraw-Hill
New York, 2008.
[13] B. M. Bell, “The iterated kalman smoother as a gauss-newton method,”
SIAM Journal on Optimization, vol. 4, no. 3, pp. 626–636, 1994.
[14] H.-S. Ahn and C.-H. Won, “Fast alignment using rotation vector
and adaptive kalman ﬁlter,” Aerospace and Electronic Systems, IEEE
Transactions on, vol. 42, no. 1, pp. 70–83, 2006.
[15] X. Kong, Inertial navigation system algorithms for low cost IMU.
PhD thesis, Department of Mechanical and Mechatronic Engineering,
Graduate School of Engineering, University of Sydney, 2000.
[16] C. J. Taylor and D. J. Kriegman, “Minimization on the lie group so
(3) and related manifolds,” tech. rep., Yale University, 1994.
[17] L. Carlone and A. Censi, “From angular manifolds to the integer
lattice: Guaranteed orientation estimation with application to pose
graph optimization,” arXiv preprint arXiv:1211.3063, 2012.
[18] V . Indelman, S. Williams, M. Kaess, and F. Dellaert, “Information
fusion in navigation systems via factor graph based incremental
smoothing,” Robotics and Autonomous Systems, 2013.
[19] F. Kschischang, B. Frey, and H.-A. Loeliger, “Factor graphs and the
sum-product algorithm,” IEEE Trans. Inf. Theory, vol. 47, Feb. 2001.
[20] C. Kerl, J. Sturm, and D. Cremers, “Robust odometry estimation for
rgb-d cameras,” ICRA, 2013.
[21] P. G. Savage, “A uniﬁed mathematical framework for strapdown
algorithm design,” Journal of Guidance, Control, and Dynamics,
vol. 29, no. 2, pp. 237–249, 2006.
[22] M. Kaess, H. Johannsson, R. Roberts, V . Ila, J. Leonard, and
F. Dellaert, “iSAM2: Incremental smoothing and mapping with ﬂuid
relinearization and incremental variable reordering,” in IEEE Intl.
Conf. on Robotics and Automation (ICRA), (Shanghai, China), May
2011.
2764
