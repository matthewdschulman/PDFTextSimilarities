Switching Control of Attitude Tracking on a Quadrotor UAV for Large-angle
Rotational Maneuvers
Lu Wang and Jianbo Su
AbstractÑThis paper studies an attitude tracking control
system of a quadrotor unmanned aerial vehicle (UAV) under
the condition of large-angle rotational maneuvers. We Þrst
established the attitude error model, taking both external
disturbances and internal uncertainties into account. There-
after, a switching control strategy is proposed for both high
tracking accuracy and velocity constraints. Experiments on
attitudetrackingvalidatehighercontrolaccuracywithproposed
method. Tasks of ßight at unknown initial attitude and ßip are
also presented to verify the effectiveness of this method under
large-angle rotational maneuverability.
I. INTRODUCTION
Recently, quadrotor unmanned aerial vehicles (UAV) have
attracted increasing interest in researches and applications in
both military and civil society, such as unmanned inspection,
rescue in disasters, and road trafÞc supervision.
Attitudetrackingcontrolofaquadrotoristhefoundationof
almostallthemissionsinthisarea.Variousresearchesrelated
to attitude controller design have been extensively studied
based on several inspired approaches, such as feedback
control [1,2], sliding mode control [3], adaptive control [4],
nonlinear disturbance observer [5], neural networks [6], etc.
Althoughsomesimulationsandexperimentsareimplemented
successfully in these applications, the condition of large-
angle rotational maneuverability is not considered. The at-
titude control under extreme maneuverability is investigated
in [7,8]. However, only simulations are presented to validate
the effectiveness of these methods. The ßip of a quadrotor is
implemented in several previous works [9-14]. The authors
in [9-11] decouple the quadrotor model into a 2D model
moving in a vertical plane and the out-of-plane dynamics,
and the controller are designed respectively for the decoupled
subsystems. In [11], the quadrotor is modeled as a collection
of simpliÞed hybrid modes, and reachability analysis guaran-
teeing safety and performance is implemented on a quadrotor
for backßip maneuver. A motion planning and coordination
strategy for robot systems based on representation space is
investigated in [15]. Trajectory generation and control is also
proposed on a quadrotor UAV for some special tasks such
*This work was Þnancially supported by Chinese National High-Tech Re-
search and Development Program and National Natural Science Foundation
of China (No. 60935001, 61221003).
1
L.WangandJ.SuarewithSchoolofElectronicInformationandElectric
Engineering, Shanghai Jiao Tong University, Shanghai 200240, P.R. China.
wanglu1987xy@sjtu.edu.cn; jbsu@sjtu.edu.cn
as minimum snap, obstacle avoidance, and suspended load
[12-14].
SpeciÞcally, there are two prominent problems in the
tracking control of quadrotor for large-angle rotational ma-
neuvers: (i) attitude estimation and control method under
large maneuvers; and (ii) state constraint for large tracking
error or initial states error. In this paper, quaternion is
introduced instead of Euler angles for attitude estimation
and control. Then, system error model based on the attitude
trackingproblemisestablished.Considertheangularvelocity
constraint of the quadrotor, a practical switching control
strategy is proposed for large-angle rotational maneuvers.
When the system states are far away from the equilibrium
point, we hope the systems converge to the equilibrium
point with a bounded angular velocity. Hence, a controller
with angular velocity constraint is designed. On the contrary,
if the system states are close to the equilibrium point, a
high accuracy of tracking performance is needed. At present,
a tracking controller with a linear extended state observer
(ESO) is proposed. A switching logic is presented based on
a designed manifold. Experiments, such as attitude tracking,
ßight under unknown initial states and ßip, are implemented
on a quadrotor UAV testbed to validate the effectiveness of
the proposed method.
This paper is organized as follows. In Section II, the
system model of a quadrotor UAV based on quaternion
is established. Then, attitude tracking problem with uncer-
tainties is formulated. In Section III, two controllers under
different conditions and a switching logic are proposed to
compose a switching controller. In Section IV, experiments
are carried out to verify the effectiveness of the proposed
method, followed by Conclusions in Section V.
II. SYSTEM MODEL AND PROBLEM FORMULATION
In the aforementioned works [2,4-6,9-14], the attitude of
the quadrotor is described by Euler angles. However, its
kinematics is not available when pitch angle  = ±
¹
2
. In
this work, we choose quaternion to represent the attitude.
A. System Model
There are totally three coordinates used in this paper, earth
frameF
e
,body-ÞxedframeF
b
,andorientatedframeF
d
.The
quadrotor is considered as a rigid body without deformation,
2014 IEEE International Conference on Robotics & Automation (ICRA)
Hong Kong Convention and Exhibition Center
May 31 - June 7, 2014. Hong Kong, China
978-1-4799-3684-7/14/$31.00 ©2014 IEEE 2907
which is expressed in Fig. 1. The system model is described
as [17]:
?
?
?
ú q
0
=?
1
2
q q q
T
! ! !; ú q q q =
1
2
(q
0
I
3
+[q q q?])! ! !
J ú ! ! ! =?! ! !?J! ! ! +Fu u u;
(1)
where q
0
andq q q are scalar and vector components of the unit
quaternion, with q q q ? R
3
satisfying constraint q q q
T
q q q + q
2
0
=
1. ! ! ! ? R
3
denotes the angular velocity of the rigid body,
I
3
denotes the identity matrix with a dimension of three by
three. Operator [á?] denotes the skew-symmetric matrix of a
vector. J ? R
3?3
is a symmetric positive deÞnite constant
inertia matrix. u u u ? R
3
is the control input of the rotational
dynamics, F is a three-dimensional matrix where Fu u u is the
control torque of the quadrotor. We deÞne the control input
u u u = [ !
?
!
?
!
?
]
T
. Then, the rotational speeds of each
propellers are:
{
!
1
=!
T
+!
?
+!
?
; !
2
=!
T
+!
?
?!
?
!
3
=!
T
?!
?
+!
?
; !
4
=!
T
?!
?
?!
?
:
(2)
where !
1
is the corresponding speed of the rotor at north
axis, and !
2
to !
4
are the speeds of last three rotors at the
direction of counter-clockwise. !
T
is the speed of each rotor
that enable the quadrotor at the state of hover.
FromtheprincipleofthequadrotorUAV,thecontroltorque
is shown as:
Fu u u =
?
?
C
T
Ar
2
l(!
2
1
?!
2
3
)
C
T
Ar
2
l(!
2
2
?!
2
4
)
C
Q
Ar
3
(!
2
1
+!
2
3
?!
2
2
?!
2
4
)
?
?
; (3)
where C
T
and C
Q
are coefÞcients of thrust and torque from
rotational speed, respectively. And  is density of air, r is
propellerÕs radius, A is propellerÕs dics area, l is the rotor
displacement from UAV center of mass. Assume that the
value of u u u is smaller than that of !
T
, we Þnally get the
matrix F as:
F = diag(4C
T
Ar
2
l!
T
;4C
T
Ar
2
l!
T
;8C
Q
Ar
3
!
T
): (4)
Fig. 1: Quadrotor UAV system.
B. Problem Formulation
Considertheattitudetrackingproblemofthequadrotor,we
are trying to design a control inputu u u to enable the quadrotor
to track a desired attitude quickly and accurately. The vector
[ q q q
d
! ! !
d
ú ! ! !
d
] represents the attitude information of the
orientated frame F
d
, which contains desired quaternion,
angular velocity, and angular acceleration. Also, the desired
angular acceleration ú ! ! !
d
is bounded.
TheorthogonalattitudetransitionmatrixisdenotedbyR?
SO(3). The relative attitude and angular velocity variables
from body frame F
b
to the orientated frame F
d
are deÞned
as
÷ q
0
= ÷ q
0d
÷ q
0
+q q q
T
d
q q q; ÷ q q q =q
0d
q q q?q
0
q q q
d
+q q q?q q q
d
; ÷ ! ! ! =! ! !?
÷
R! ! !
d
;
(5)
where
÷
R =RR
T
d
is known as the error of attitude transition
matrix. From the deÞnition of ÷ ! ! !, we get the following
rotational error model as:
?
?
?
?
?
?
?
ú
÷ q
0
=?
1
2
÷ q q q
T
÷ ! ! !;
ú
÷ q q q =
1
2
(÷ q
0
I
3
+[÷ q q q?])÷ ! ! !
ú
÷ ! ! ! =J
?1
[?(÷ ! ! ! +
÷
R! ! !
d
)?J(÷ ! ! ! +
÷
R! ! !
d
)+Fu u u]
?(
÷
Rú ! ! !
d
?[÷ ! ! !?]
÷
R! ! !
d
):
(6)
Consider the model mismatch and external disturbances,
we assume that the nominal inertia is J
0
and inertia error is
deÞned as ÆJ = J ?J
0
. Also, the nominal value of F is
given as F
0
, and its error is deÞned as ÆF =F?F
0
. Then,
we can use the feedback linearization:
u u u =v v v +F
?1
0
L(÷ ! ! ! +
÷
R! ! !
d
)J
?
0
+F
?1
0
J
0
(
÷
Rú ! ! !
d
?[÷ ! ! !?]
÷
R! ! !
d
);
(7)
to reduce the system dynamics to:
ú
÷ ! ! ! =J
?1
0
F
0
v v v +J
?1
0
F
0
(d d d+f f f); (8)
wherethedeÞnitionoftheoperatorL(á)andsuperscript
?
sat-
isfy L(÷ ! ! ! +
÷
R! ! !
d
)J
?
0
= (÷ ! ! ! +
÷
R! ! !
d
)?J
0
(÷ ! ! ! +
÷
R! ! !
d
). Assume
that the external disturbances d d d is bounded, f f f is the internal
uncertainties. If we have, (FF
0
)
?1
(F
0
ÆJ?ÆFJ
0
), then
f f f =?[
ú
÷ ! ! ! +L(÷ ! ! ! +
÷
R! ! !
d
)
?
+(
÷
Rú ! ! !
d
?[÷ ! ! !?]
÷
R! ! !
d
)]: (9)
We will try to design a controller for the stabilization of
the equilibrium point: ÷ q q q = 0; ÷ ! ! ! = 0, with the existence
of external disturbances and system uncertainties. From the
orthogonality of transition matrix, we know
÷
R = I
3
when
÷ q q q = 0. And from the orthogonality of attitude matrix,
÷
R =I
3
if and only if R = R
d
. Then, from the deÞnition of ÷ ! ! !,
we get ! ! ! = ! ! !
d
while
÷
R = I
3
and ÷ ! ! ! = 0. This implies
that stabilizing the error system in (6) is equivalent to the
objective of attitude tracking control.
III. SWITCHING CONTROL STRATEGY DESIGN
In the attitude tracking task, the actuators should provide
the rigid body with control torque to enable the system states
to converge to equilibrium point in state space. However, the
2908
circumstances can be divided as the system states that are
closed to or far away from the equilibrium point. For the
Þrstcircumstance,thecontrollershouldprocesshigh-accurate
tracking performance against the system uncertainties and
external disturbances. Simultaneously, anti-windup of the
angular velocity should be taken into account for the second
circumstance, without consideration of system uncertainties.
Fig. 2: Switching control framework.
From the analysis above, a practical switching control
strategy is proposed for the attitude tracking task under
condition of large-angle rotational maneuvers. The control
structure is expressed in Fig. 2. There are two controllers
to be designed for the two circumstances respectively. When
the tracking error of the rigid body is large, we simplify
the attitude tracking system into an attitude stabilization
model, and velocity constraint is considered for the controller
1. For the other circumstance, a tracking controller with a
linear ESO is proposed for high-accuracy [16]. The speciÞed
controllers and switching logic is given as follows.
A. Controller 1: Attitude stabilization with angular velocity
constraints
Under the circumstance that the tracking error of the rigid
body is large, the purpose of the controller is to stabilize
the system states nearby the equilibrium point. In other
words, we do not need this controller to stabilize the error
model with high-accuracy, without consideration of system
uncertainties. Thus, the controller can be designed based on
the stabilization model.
If we set ! ! !
d
= 0 and ú ! ! !
d
= 0, then Eq. (6) will be
transformed to be an attitude stabilization model as:
?
?
?
ú
÷ q
0
=?
1
2
÷ q q q
T
! ! !;
ú
÷ q q q =
1
2
(÷ q
0
I
3
+[÷ q q q?])! ! !
ú ! ! ! =J
?1
[?! ! !?J! ! ! +Fu u u]:
(10)
Then we deÞne a Lyapunov function as:
V
1
=
1
J
?1
F[(1? ÷ q
0
)
2
+÷ q q q
T
÷ q q q]
+
1
2
(F
?1
0
J
0
)ln
[
3
¸
i=0
w
2
i
=
3
¸
i=0
(w
2
i
?!
2
i
)
]
:
(11)
where 
1
is a positive constant to be selected.
Here, the ln-term is introduced to guarantee ?w
i
< !
i
<
w
i
for i = 1;2;3 [17] and w
i
= 1:5rad=s is regarded as the
upper bound of|!
i
|. Then, we get the derivative of Lyapunov
function V
1
as:
ú
V
1
=
1
÷ q q q
T
(J
?1
F)! ! ! +! ! !
T
?ú ! ! !; (12)
where ? = diag
(
1
w
2
1
??
2
1
;
1
w
2
2
??
2
2
;
1
w
2
3
??
2
3
)
.
Hence, a controller u u u
1
could be designed as:
u u u
1
= ?
?1
(?
1
÷ q q q?
2
! ! !): (13)
where 
2
is a positive constant to be designed.
Substituting Eq. (10) and (13) into Eq. (12), and notice
that ! ! !
T
[! ! !?] = 0, we get:
ú
V
1
²?
2

min
(J
?1
F)?! ! !?
2
: (14)
Theorem 1. Given an attitude stabilization system of a
quadrotor UAV expressed in Eq. (10) with angular velocity
constraints, by applying the controller u u u
1
in Eq. (13), we
can come to a conclusion that the closed-loop system is
asymptotically stable with lim
t?°
÷ q q q = 0 and lim
t?°
! ! ! = 0.
Proof: This can be easily obtained by BarbalatÕs lemma
and LaSalleÕs invariance principle.
B. Controller 2: Attitude tracking with linear ESO
The external disturbances and system uncertainties acting
on the rotational dynamics will affect the performance of the
control system, or even make the system unstable. The linear
ESO treats these unknown properties as extended state to be
estimated. Here, the total compound disturbance is deÞned
as:
d d d
?
=J
?1
0
F
0
(d d d+f f f): (15)
Then, Eq. (8) can be rewritten as
ú
÷ ! ! ! =J
?1
0
F
0
v v v +d d d
?
;
ú
d d d
?
=h h h(t); (16)
where h h h(t) denotes the derivative of the compound distur-
bances d d d
?
.
Then, the second-order linear ESO for (16) is proposed as:
{
ú
ö z z z
1
=J
?1
0
F
0
v v v +ö z z z
2
+g
1
(÷ ! ! !?ö z z z
1
)
ú
ö z z z
2
=g
2
(÷ ! ! !?ö z z z
1
);
(17)
where g
1
and g
2
are positive constants to be selected.
Converting Eq. (17) to the frequency-domain using the
Laplace transform, and substitute Eq. (16) into (17), we get:
{
sö z z z
1
= (ö z z z
2
?d d d
?
)+s÷ ! ! ! +g
1
(÷ ! ! !?ö z z z
1
)
sö z z z
2
=g
2
(÷ ! ! !?ö z z z
1
);
(18)
where s is the Laplace operator.
From Eq. (18), we Þnally get
ö z z z
2
=
g
2
s
2
+g
1
s+g
2
d d d
?
: (19)
Selection of g
1
and g
2
should make the polynomial s
2
+
g
1
s + g
2
to be Hurwitz. Here, we simply choose g
2
=
!
2
0
;g
1
= 2!
0
.
2909
Then, we use the estimated disturbance of proposed linear
ESO and design a torque input for the UAV that guarantees
tracking of the desired quaternion. From the rotational error
model, we know that the desired angular velocity and its time
derivative should be used in the control law. These desired
signals can be extracted by the kinematics of quaternion.
To design the attitude tracking controller, we introduce the
following variable:
÷
? ? ? = ÷ ! ! ! +k
1
÷ q q q; (20)
and the control input v v v is designed as:
v v v =?(1+k
1
k
2
)÷ q q q?
[
k
2
+
k
2
1
2
F
?1
0
J
0
(÷ q
0
I
3
+[÷ q q q?])
]
÷ ! ! !
?F
?1
0
J
0
ö z z z
2
;
(21)
where k
1
and k
2
are strictly positive constants.
From (7), the control torque of the attitude tracking prob-
lem is Þnally expressed as:
u u u
2
=?(1+k
1
k
2
)÷ q q q?(k
2
+
k
2
1
2
F
?1
0
J
0
(÷ q
0
I
3
+[÷ q q q?])÷ ! ! !
?F
?1
0
J
0
ö z z z
2
+F
?1
0
L(÷ ! ! ! +
÷
R! ! !
d
)J
?
0
+F
?1
0
J
0
(
÷
Rú ! ! !
d
?[÷ ! ! !?]
÷
R! ! !
d
):
(22)
Denote the estimating error of the linear ESO as
÷
d d d
?
,
d d d
?
?ö z z z
2
, then substitute Eq. (20) and (22) into Eq. (6):
?
?
?
ú
÷ q
0
=?
1
2
÷ q q q
T
(
÷
? ? ??k
1
÷ q q q);
ú
÷ q q q =
1
2
(÷ q
0
I
3
+[÷ q q q?])(
÷
? ? ??k
1
÷ q q q)
F
?1
0
J
0
ú
÷
? ? ? =?÷ q q q?k
2
÷
? ? ?+F
?1
0
J
0
÷
d d d
?
:
(23)
A Lyapunov function is deÞned as:
V
2
= [(1? ÷ q
0
)
2
+÷ q q q
T
÷ q q q]+
1
2
÷
? ? ?
T
(F
?1
0
J
0
)
÷
? ? ?: (24)
Then, we get the derivative of Lyapunov function V
2
as:
ú
V
2
²?k
1
?÷ q q q?
2
?k
2
?
÷
? ? ??
2
+
max
(F
?1
0
J
0
)?
÷
? ? ???
÷
d d d
?
?: (25)
Assume the estimating error of linear ESO as the input of
the above system. Hence, the unforced form of system (23)
is uniformly asymptotically stable at the equilibrium point.
ThenweanalyzethestabilityoftheoverallsystemwithESO.
Theorem 2. Given a rotational error system of a quadro-
tor UAV in (6) for a desired attitude trajectory deÞned
as [ q q q
d
! ! !
d
ú ! ! !
d
]. With the external disturbances d d d and
internal uncertainties f f f in (9), let the linear ESO expressed
by (17) and the nonlinear feedback controller deÞned by
(22). The quaternion error ÷ q q q, angular velocity error ÷ ! ! !, and
estimation error
÷
d d d
?
of linear ESO are uniformly ultimately
bounded (UUB).
Proof. From Eq. (19), we get
÷
d d d
?
=
s
2
+g
1
s
s
2
+g
1
s+g
2
d d d
?
; (26)
then the state space realization of linear ESO can be repre-
sented as {
ú x x x =Ax x x+Bd d d
?
÷
d d d
?
=Cx x x+Dd d d
?
;
(27)
where A =
[
0 ?g
2
1 ?g
1
]
, B =
[
?g
2
0
]
, C = [ 0 1 ],
D = 1. Notice that det(sI
3
?A) = s
2
+g
1
s +g
2
, which
means A is Hurwitz if g
1
and g
2
are well-selected. That is,
for any given positive deÞnite symmetric matrix Q, there
exists a positive deÞnite symmetric matrix P that satisÞes:
PA+A
T
P =?Q.
From Assumption 1, the external disturbances d d d is
bounded. Here, we focus on the expression off f f. Notice that
all the variables are bounded except ÷ ! ! !, we conclude that the
following inequality is satisÞed for positive a
1
to a
3
.
?d d d
?
?²a
1
?
÷
? ? ??+a
2
?
÷
? ? ??
2
+a
3
: (28)
Then, we deÞne a new Lyapunov function V = V
2
+
1
2
x x x
T
Px x x, the derivative of V is given as:
ú
V ²?k
1
?÷ q q q?
2
?k
2
?
÷
? ? ??
2
+
max
(F
?1
0
J
0
)?÷ ! ! !??
÷
d d d
?
?
?
min
(Q)?x x x?
2
+2
max
(P)
max
(B)?x x x??
÷
d d d
?
?:
(29)
Substituting (28) into (29), yields:
ú
V ²?k
1
?÷ q q q?
2
?c
1
?
÷
? ? ??
2
?c
2
?x x x?
2
+; (30)
where
c
1
=k
2
?a
1

max
(F
?1
0
J
0
)?

max
(F
?1
0
J
0
)
max
(C)
2
1
?a
2

max
(F
?1
0
J
0
)?
÷
? ? ???
[a
3

max
(F
?1
0
J
0
)]
2
4
1
?
a
1

max
(P)
max
(B)

2
?
a
2

max
(P)
max
(B)

3
?
÷
? ? ??
2
;
c
2
=
min
(Q)?

1

max
(F
?1
0
J
0
)
max
(C)
2
?a
1

2

max
(P)
max
(B)?a
2

3

max
(P)
max
(B)
?
[a
3

max
(P)
max
(B)]
2

2
;
 =
1
+
2
:
where 
i
and 
i
are all positive constant.
Assume that ?
0
is the upper bound of
÷
? ? ? that makes
c
1
> 0. For the original ?
÷
? ? ?(t
0
)? < ?
0
, we Þnd that
ú
V
is strictly negative provided that the following inequalities
hold: ?÷ q q q? >
Ã
µ
k1
, or ?
÷
? ? ?? >
Ã
µ
c1
, or ?
÷
d d d? >
Ã
µ
c2
. Then,
it can be concluded that the above three states are UUB and
can converge into a compact set. Notice that (÷ q q q;
÷
? ? ?) are linear
diffeomorphism of (÷ q q q; ÷ ! ! !). Hence, (÷ q q q;÷ ! ! !) can converge into a
compact set. Finally, we can come to a conclusion that the
quaternion error, angular velocity error, and estimation error
of linear ESO are UUB.
2910
C. Switching Logic
If the tracking error of the system is large, controller
1 should be used to make the system states converge to
equilibrium point quickly. However, when the system states
are close to the desired attitude trajectory, the system should
beswitchedtocontroller2forhighertrackingaccuracy.Here,
a manifold is deÞned asS = ÷ q q q+k÷ ! ! !. The switching condition
is given as:
{
If : |S|>S
0
;Controller 1
Else if : |S|²S
0
;Controller 2
(31)
where S
0
is a positive constant to be determined. k is a
positive constant deÞned as 5:5. S
0
is selected as 0:3. The
larger S
0
is selected, the more Controller 1 will be switched.
By the deÞned manifold, not only the attitude error, but
also the angular velocity error are taken into account in the
switching logic. If the switching of these two controllers is
only determined by the attitude tracking error, the following
two situations may be occurred. First, if the attitude error
is small, however the angular velocity error is large, the
attitude stabilization controller should be used. Then, the
attitude error is large while the rigid body is converging to
the equilibrium point quickly with a large angular velocity
error, the controller system should be switched to tracking
controller. However, if only attitude tracking error is used,
the optimal controller cannot be switched under these two
conditions. Consequently, both attitude error and the speed
of rigid body converges to the equilibrium point will be
considered in the switching logic.
The switching between the proposed controllers may lead
the system unstable. We should consider the stability of
the overall system with switching logic. Since controller 2
is locally UUB, as soon as controller 1 can stabilize the
system states into the region of attraction of controller 2 with
speciÞed parameters, then we can conclude that the overall
switching system is stable.
IV. FLIGHT TEST
Three experiments have been conducted to verify the
proposed methods in this paper. The attitude tracking case
is presented in the Þrst experiment to show the high ac-
curacy of control performance. Then, two tasks of ßight at
unknown initial attitude and ßip are carried out to validate
the controllerÕs performance under large-angle rotational ma-
neuvers. Our experimental platform is shown in Fig. 3. The
mechanical structure of the UAV is based on the material
of carbon Þber. For the elaboration of the real-time ßight
control (FC) board, it consists of a micro-processor, an IMU
and an electronic compass. The IMU provides us with digital
signal of three-axis angular velocities and accelerations. The
electronic compass gives the three-axis magnetic of the rigid
body. The micro-processor is used to capture the signal data
from the sensors and to implement the control strategy.
Fig. 3: Quadrotor testbed.
A. Attitude tracking
An attitude tracking mission is accomplished, while the
desired attitude is expressed as follows:
q q q
d1
= 0:1cos(

15
t); q q q
d2
= 0:1sin(

15
t); q q q
d3
= 0: (32)
A load disturbance of 0:0388Nám in pitch and roll torque is
introduced respectively to validate the disturbance rejection
ability and robustness of the designed controller and linear
ESO. The tracking effect is shown in Fig. 4.
0 20 40 60 80
?0.2
?0.1
0
0.1
0.2
Time(s)
q
1
 
 
q
1d
q
1
0 20 40 60 80
?0.2
?0.1
0
0.1
0.2
Time(s)
q
2
 
 
q
2d
q
2
0 20 40 60 80
?0.02
0
0.02
0.04
0.06
0.08
Time(s)
q
3
 
 
q
3d
q
3
0 20 40 60 80
?0.2
?0.1
0
0.1
0.2
Time(s)
÷ q
 
 
÷ q
1
÷ q
2
÷ q
3
Load Disturbance
Fig. 4: Attitude tracking performance.
In Fig. 4, we Þnd that with the action of linear ESO, the
quaternion tracking error can be limited into 0:005 (about
0:3
?
of Euler angles). Also, at time of 52 and 67 seconds,
external disturbances on the quadrotor are exerted. The linear
ESO can eliminate the disturbance quickly and accurately
with its convergence time less than 2 seconds.
B. Tasks under large-angle rotational maneuvers
Thetasksofßightatunknowninitialstatesandßiparecar-
ried out and shown in Figs. 5 and 6. The proposed switching
2911
strategy is useful for large-angle rotational maneuvers.
Fig. 5: Task of ßight at unknown attitude. (a)-(d) A quadrotor
is thrown out and in free fall. (e) The actuators are turning
on. (f)-(g) Adjustment of the quadrotor. (h) Stabilization.
Fig. 6: Task of ßip.
It is shown in Fig. 5 that the proposed controller can
stabilize a quadrotor with large-angle rotational maneuvers
without overshot. When the initial attitude error is large, the
controller is switched into the attitude stabilization controller
with angular velocity constraints. Hence, the attitude of the
quadrotor can converge to equilibrium point with a bounded
angular velocity, which restrain the appearance of overshot.
Fig. 6 shows the whole process of the ßipping task of
a quadrotor. When the ßipping command is given to the
quadrotor, the controller will generate a large quaternion.
Then, the controller will switching into Controller 1, which
will enable the quadrotor to rotate at a constant speed w
i
.
At last, when attitude of the quadrotor changes nearby the
equilibrium point, the controller switches into Controller 2
to extract high control accuracy. From the experiments, it
is shown that the proposed control strategy can adapt to
different condition in the work space, and also, it can acquire
high-accuracy tracking performance against uncertainties.
V. CONCLUSION
Inthispaper,thedesignandimplementationofaswitching
control strategy on a quadrotor UAV is proposed for large-
anglerotationalmaneuvers.Withtheestablishmentofattitude
error model, a switching control strategy is proposed for
both higher tracking accuracy and requirement of velocity
constraint. Three experiments have been carried out on a
quadrotor testbed. The result of attitude tracking shows that
the proposed method can make a quadrotor UAV to track a
desiredattitudequicklyandaccurately,withthetrackingerror
being limited within ±0:3
?
. The remaining two experiments
indicate that the switching controller is well-designed for
circumstance of large-angle rotational maneuvers.
REFERENCES
[1] A. Tayebi, S. McGivray, Attitude stabilization of a VTOL quadrotor
aircraft, IEEE Trans. Control Syst. Technol., vol. 14, no. 3, pp. 562Ð
571, 2006.
[2] I. Gonz« alez, S. Salazar, J. Torres, R. Lozano, Real-Time Attitude
Stabilization of a Mini-UAV Quad-rator Using Motor Speed Feedback,
J. Intell. Robot. Syst., vol. 70, no. 1-4, pp. 93Ð106, 2013.
[3] L. Wang, H. Jia, The Trajectory Tracking Problem of Quadrotor UAV:
Global Stability Analysis and Control Design Based on the Cascade
Theory, Asian J. Control, vol. 16, no. 2, pp. 1-15, 2014.
[4] C. Nicol, C. J. B. Macnab, A. Ramirez-Serrano, Robust adaptive
control of a quadrotor helicopter, Mechatronics, vol. 21, no. 6, pp.
927Ð938, 2011.
[5] C. Liu, W. H. Chen, J. Andrews, Tracking control of small-scale
helicopters using explicit nonlinear MPC augmented with disturbance
observers, Control Eng. Practice, vol. 20 no. 3, pp. 258Ð268, 2012.
[6] M. O. Efe, Neural network assisted computationally simple control
of a quadrotor UAV, IEEE Trans. on Ind. Inform., vol. 7, no. 2, pp.
354Ð361, 2011.
[7] T. Lee, Exponential stability of an attitude tracking control system on
SO (3) for large-angle rotational maneuvers, Syst. Control Lett., vol.
61, no. 1, pp. 231Ð237, 2012.
[8] I. Ali, G. Radice, J. Kim, Backstepping control design with actuator
torque bound for spacecraft attitude maneuver, J. Guid. Control Dyn.,
vol. 33, no. 1, pp. 254Ð259, 2010.
[9] S. Lupashin, A. Sch¬ ollig, M. Sherback, A simple learning strategy for
high-speed quadrocopter multi-ßips, In Proc. of the IEEE Int. Conf.
on Robotics and Automation, Anchorage, AK, pp. 1642Ð1648, May
2010.
[10] J. H. Gillula, H. Huang, M. P. Vitus, C. J. Tomlin, Design of guar-
anteed safe maneuvers using reachable sets: Autonomous quadrotor
aerobatics in theory and practice, In Proc. of the IEEE Int. Conf. on
Robotics and Automation, Anchorage, AK, pp. 1649Ð1654, May 2010.
[11] J. H. Gillula, G. H. Hoffmann, H. Huang, M. P. Vitus, C. J. Tomlin,
Applications of hybrid reachability analysis to robotic aerial vehicles,
The Int. J. Robot. Research, vol. 30, no. 3, pp. 335Ð354, 2011.
[12] D. Mellinger, V. Kumar, Minimum snap trajectory generation and
control for quadrotors, In Proc. of the IEEE Int. Conf. on Robotics
and Automation, Shanghai, China, pp. 2520Ð2525, May 2011.
[13] D. Mellinger, A. Kushleyev, V. Kumar, Mixed-integer quadratic pro-
gram trajectory generation for heterogeneous quadrotor teams, In
Proc. of the IEEE Int. Conf. on Robotics and Automation, Saint Paul,
MN, pp. 477Ð483, May 2012.
[14] K.Sreenath,N.Michael,V.Kumar, Trajectory Generation and Control
of a Quadrotor with a Cable-Suspended Load A Differentially-Flat
Hybrid System, In Proc. of the IEEE Int. Conf. on Robotics and
Automation, to appear, May 2013.
[15] J. Su, W. Xie, Motion Planning and Coordination for Robot Systems
Based on Representation Space, IEEE Trans. Syst., Man, Cybern. B,
Cybern., vol. 41, no. 1, pp. 248-259, 2011.
[16] Q. Zheng, L. Dong, D. H. Lee, Z. Gao, Active Disturbance Rejection
Control for MEMS Gyroscopes, IEEE Trans. Ind. Electron., vol. 17,
no. 6, pp. 1432Ð1438, 2009.
[17] Q. Hu, B. Li, Y. Zhang, Robust attitude control design for spacecraft
under assigned velocity and control constraints, ISA Trans., vol. 52,
no. 4, pp. 480-493, 2013.
2912
