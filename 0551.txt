 
Abstract—Wafer inspection plays a significant role in 
monitoring the quality of production wafers. However, it 
requires measuring tools and additional cycle time to do real 
metrology, which is costly and time-consuming. Therefore, 
reducing sampling rate to as low as possible is a high priority for 
many factories to reduce production cost. The most common way 
for inspecting process quality is to apply periodic sampling. If a 
manufacturing process is stable, then virtual metrology (VM) 
may be applied for monitoring the quality of wafers while real 
metrology is unavailable. Nevertheless, if a production variation 
occurs between periodic samplings, no real metrology is 
available during this period for updating the VM models, which 
may result in un-reliable VM predictions. The authors have 
developed the automatic virtual metrology (AVM) system for 
various VM applications. Therefore, this paper focuses on 
applying various indices of the AVM system to develop an 
Intelligent Sampling Decision (ISD) scheme for reducing 
sampling rate while VM accuracy is still sustained. 
Index Terms—Automatic Virtual Metrology (AVM) System, 
Intelligent Sampling Decision (ISD) Scheme. 
I. INTRODUCTION 
roduction processes of semiconductor manufacturing are 
complicated and cost-intensive. Therefore, it is essential 
for manufacturers to maintain high quality and yield during 
wafer manufacturing processes by assuring process stabilities 
and production tools’ health. To do so, most semiconductor 
manufacturers applied periodic sampling inspections of 
wafers in manufacturing processes to verify the acceptability 
of the process quality. The conventional method assumes that 
no abnormal circumstances will occur in the production 
processes other than those of regular periodic sampling wafers. 
If a process tool variation or a production fault appears during 
the period between samplings (as shown at t p14 of Fig. 1), then 
the abnormality will not be detected. This may result in large 
manufacturing loss due to the fact that many defected wafers 
may have been produced unconsciously. 
To solve the problem mentioned above, the best solution is 
to monitor every single wafer in the production process for 
total inspection. However, total physical inspection requires 
more metrology tools, which lead to higher production cost 
and more cycle time. Thus, the other approach is here to apply 
virtual metrology (VM) [1]. 
Applying VM in manufacturing process, sampling 
inspection with metrology delay can be converted into 
real-time and on-line total inspection [2]. Nevertheless, 
characteristics of process tools might change over time; 
therefore, scattered real measurements are still essential to 
update VM models and inspect product quality. Traditionally, 
only one or two wafers are sampled in a lot, which is also 
called a FOUP or cassette with maximally 25 wafers in it. As 
shown in Fig 1, nos. 2 and 25 wafers are sampled in a 
25-wafers lot periodically. These sampled wafers are defined 
as metrology wafers and other wafers which have been 
processed but no measurement available are called process 
wafers. By applying this sampling strategy, if process-related 
status changes (such as preventive-maintenance (PM) 
operation, process-tool malfunction, recipe change, etc.) 
occur between samplings, it may cause an out-of-control 
(OOC) drift or shift of process quality as shown at t p14 in Fig. 1. 
Since there is no real measurement inspection to make sure 
whether the drift at t p14 does affect the quality of the product at 
t p14 or not, a miss detection of defect may occur unconsciously. 
On the other hand, if no status changes occur and the process 
tool is healthy and steady, it will be unnecessary to sample 
wafers that have the same characteristics for inspection and 
for updating the VM models. It is due to the fact that VM 
results in this case will be accurate enough to monitor process 
quality. In conclusion, the sampling rate can be reduced if no 
status changes and the process tool is healthy and steady. 
UCL
LCL
Process Time
…
p
t
2
t
3
t
13
t t
13
t … t
1
t
2 r t
25
t … 25
t …
4
t
14
t
15
t
… …
t
4
… …
14
t
15
t
             Metrology Data 
  Metrology Wafer       Process Wafer      
1 3 1
…
…
p p p p p p p q q q q q q q q
OOC
 
Fig. 1 Traditional Sampling Method  
(Sample Two Wafers per Lot Periodically) 
Previous work concerning sampling strategies is surveyed 
as follows. The most frequently used methods for determining 
when to sample are based on monitoring the variations of 
production states that contain process parameters and tool’s 
health status. Holfeld el al. [4] pointed out it is necessary to 
increase sampling when encountering manufacturing 
disturbances that include external disruptions (e.g., tool 
maintenance, tool repair, or recipe adjustment) and internal 
disruptions (such as disruptions detected by sensor signals or 
metrology). Lee [5] and Munga et al. [6] brought up the 
concept of dynamic sampling to utilize a more effective 
inspection and to increase the throughput of inspection tools 
without affecting the production quality which may achieve 
the goal of cycle time reduction. 
Chun-Fang Chen, Student Member, IEEE, Fan-Tien Cheng, Fellow, IEEE,  
Chu-Chieh Wu, Hsuan-Heng Huang 
Preliminary Study of an Intelligent Sampling Decision Scheme  
for the AVM System 
P 
_____________________________________________________________ 
The author would like to thank the National Science Council of the Republic 
of China for financially supporting this research under contract Nos: 
NSC102-2622-E-006-022-CC2 and NSC102-2221-E-006-118-MY2. 
 
Chun-Fang Chen, Fan-Tien Cheng (the corresponding author), Chu-Chieh 
Wu, Hsuan-Heng Huang are with the Institute of Manufacturing Information 
and Systems, National Cheng Kung University, Tainan 70101, Taiwan, R.O.C. 
(e-mail: yaya@super.ime.ncku.edu.tw; chengft@mail.ncku.edu.tw; 
chieh@super.ime.ncku.edu.tw; hanna7810@super.ime.ncku.edu.tw). 
2014 IEEE International Conference on Robotics & Automation (ICRA)
Hong Kong Convention and Exhibition Center
May 31 - June 7, 2014. Hong Kong, China
978-1-4799-3684-7/14/$31.00 ©2014 IEEE 3496
 
Furthermore, a study by Nduhura-Munga et al. [7] 
generalized sampling methods into three categories: static, 
adaptive, and dynamic samplings. Benefits and drawbacks of 
each category were discussed in [7], showing significant 
improvements from static to dynamic through adaptive 
sampling techniques. These sampling methods are to achieve 
the goal of using real inspections provided to monitor the 
whole production process and the sampled wafers are the 
representative for the other related ones. One example of 
adaptive sampling was proposed by Boussetta and Cross [8]. 
However, a drawback of adaptive sampling is that it only 
modifies the sampling rate based on the initial sampling plan. 
To tackle the problems that adaptive sampling encountered, 
dynamic sampling is a more advanced way of sampling which 
can select the best lot or wafer to measure depending on the 
states of production. However, dynamic sampling has some 
limitations. Nduhura-Munga et al. [7] hence suggested that 
the next step in development of sampling technique is the 
“predictive” sampling that selects a lot before it is actually 
available for sampling, e.g. lots being processed on 
production tools whose next step is metrology. Such 
“predictive” sampling strategies will require additional 
information on production flows [7]. 
Kurz et al. [9] proposed a “predictive” sampling decision 
system in semiconductor manufacturing using virtual 
metrology (VM). By Bayesian theorem with two-stage 
decision model and VM, expected value of measurement 
information is calculated by Monte Carlo integration to 
indicate process state and to decide which wafer to be 
measured in SDS [9]. Since proper sampling decisions 
strongly depend on the accuracy of the VM system, to enhance 
the usability of the SDS, Kurz et al. [10] further proposed 
several approaches for dynamically assessing VM reliability 
using real metrology data. However, in real-time and on-line 
operations, reliability of a VM value cannot be evaluated by 
applying its corresponding real-metrology one because if real 
metrology is available then this real-metrology value should 
be utilized directly and its corresponding VM value is 
redundant and useless [12]. 
The authors have developed the automatic virtual 
metrology (AVM) system [2] for various VM applications. 
However, the merits of the AVM system have not been totally 
shown in mass-production environments, yet. One of the 
merits is to reduce the sampling rate for decreasing the capex 
and cycle time such that the total production cost can be 
reduced. Therefore, the purpose of this paper is to develop an 
Intelligent Sampling Decision (ISD) scheme for reducing 
sampling rate while VM accuracy is still sustained by applying 
process data quality evaluation index (DQI X) [11], global 
similarity index (GSI) [12], and metrology data quality 
evaluation index (DQI y) [11] of the AVM system to monitor 
and assess the variations of process and metrology data as well 
as checking the occurrence of status changes that include 
preventive maintenance, tool repair, or recipe adjustment, etc. 
The remainder of this paper is organized as follows. Section 
2 details the ISD scheme. Section 3 then presents the 
illustrative example. Finally, summary and future work are 
stated in Section 4. 
II.  INTELLIGENT SAMPLING DECISION (ISD) SCHEME 
As mentioned previously, if no status-changes occur and 
the process tool is healthy and steady, the sampling rate may 
be reduced from the original setting. For example, two 
metrology wafers exist in a 25-wafers FOUP as shown in Fig. 
1; this original sampling-rate setting may be reduced to one 
metrology wafer per FOUP (50% reduction, CASE 1/2) or 
further one metrology wafer for two FOUPs (75% reduction, 
CASE 1/4). When external and/or internal disruptions occur, 
real metrology should be added to update the VM models of 
the AVM system for maintaining the VM accuracy [2][3]. As 
such, the number of metrology wafers in a physical FOUP will 
not be fixed. To accommodate this variation, the concept of 
virtual cassette (VC) [13] will be adopted in ISD. 
A VC is defined to contain many process wafers and one 
metrology wafer; those process and metrology wafers are 
produced by the same chamber. Moreover, a VC starts 
collecting process wafers that are processed by a specific 
chamber one by one and ends collecting until a metrology 
wafer of that same chamber has been obtained. As such, each 
VC may have various numbers of wafers depending on when 
metrology wafer is collected. By applying the VC, the 
advanced dual-phase VM algorithm can update dynamically 
and recalculate Phase-II VM value (VM II), reliance index (RI), 
and GSI for all wafers in the same VC [3]. The total number of 
wafers in a VC is denoted as “m”, which is the size of VC. 
Before designing the ISD scheme, all the possible external 
and internal disruptions should be identified and defined. In 
this paper, external disruptions are called status changes while 
internal disruptions are detected by the DQI X, GSI, and/or 
DQI y indexes of the AVM system. As a result, the ISD scheme 
needs to consider five scenarios: stable process, status change, 
abnormal DQI X, abnormal GSI, and abnormal DQI y. These 
five scenarios are described below. 
UCL
LCL
Process Time
i
y ( )
^
… … … …
Virtual Metrology Data 
  Expected Metrology Wafer by ISD     Process Wafer      Metrology Wafer
UCL
LCL
Process Time
i
y ( )
^
… … … …
Virtual Metrology Data 
(a)
(b)
Status Change
…
i
t
1 j
t
2
t
13
t t
13
t … t t
1 k
t
m-1
t …
m-1
t …
3
t
14
t
15
t t
3 14
t
15
t
N 2 m j j j j j j k k m k k k k k
…
i
t
1 j
t
2
t
7
t t
7
t … t t
m-1 l
t
m-3
t …
13
t …
1
t
8
t
9
t t
1 8
t
9
t
N m 14 j k k k k k k m-2 l l l l l k k
…
…
…
…
Status Change
Request Measurement
 
Fig. 2 Response of ISD When Status Change Occurs 
(a) Before Status Change, (b) After Status Change. 
 
: The Confirmed VC, 
 
: The Expected VC. 
3497
 
Scenario 1: Stable Process 
If no status-changes occur and all of the DQI X, GSI, and 
DQI y indexes are within their individual thresholds in a 
manufacturing process, then this process is stable. In general, 
the VM models need not to be updated under a stable process. 
Therefore, the default setting of ISD is to have a wafer 
measurement for each N wafers produced, where N can be 
assigned as large as possible. In this scenario, the size of VC, 
m, equals to N. As shown in Fig. 2 (a), wafers processed on t im, 
t jm, and t km are scheduled to be sampled; therefore, if the 
manufacturing process remains steady, these wafers will 
become t iN, t jN, and t kN, respectively and be requested by ISD 
to have real metrology for inspection and tuning/retraining of 
VM models. 
Scenario 2: Status Change 
A possible status change may occur when either tool 
maintenance, tool repair, or recipe adjustment is performed. 
Observing Fig. 2, when a status change happens between t j1 
and t j2, then ISD will request a real measurement for the wafer 
processed on t j2 to update VM models. The VC j, which t j2 is in, 
also changes dynamically from N wafers in the cassette, as 
shown in Fig. 2 (a), to only 2 wafers as in Fig. 2 (b). 
Furthermore, the next expected metrology wafer changes from 
the wafer processed on t jm in Fig. 2 (a) to t km in Fig. 2 (b).  
Scenario 3: Abnormal DQIX 
The function of DQI X is to check the quality of process data 
[11]. To prevent abnormal process data from deteriorating 
VM models, the wafer with abnormal DQI X value should not 
be selected for measurement; in other words, this wafer’s 
measurement will be skipped. Two cases of DQI X abnormality 
may be encountered as described below. 
(1) If the wafer with abnormal DQI X is simply a process 
wafer, then no real measurement will be performed; while this 
abnormal event will be recorded and a corresponding alarm 
will be sent. 
UCL
LCL
Process Time
i
y ( )
^
… … … …
Virtual Metrology Data 
UCL
LCL
Process Time
i
y ( )
^
… … … …
Virtual Metrology Data 
(a)
(b)
    Expected Metrology Wafer by ISD     Process Wafer      Metrology Wafer       DQI x Alarm
Request Measurement
…
…
…
… …
1 j
t
2
t
13
t t
14
t … t t
1 k
t N-1
t …
m-2
t …
3
t
14
t
15
t
15
t
16
t
2 m-1
j j j j j j
k k
N
k k k k
t
jN+1 j
…
1 j
t
2
t
13
t t
14
t … t t
1 k
t m-1
t …
m-1
t …
3
t
14
t
15
t
15
t
16
t
2 m
j j j j j j k k
m
k k k k
t
j k 3
i
t
N
i
t
N
Metrology Extension
 
Fig. 3 Response of ISD When Abnormal DQI X  
Appears on Expected Metrology Wafer 
(a) Abnormal DQI X on Expected Metrology Wafer, 
(b) Extension of Metrology Due to DQI X Abnormality. 
 
(2) On the other hand, if the abnormal-DQI X wafer is 
originally scheduled to be measured, which is also called an 
expected metrology wafer, measurement for this wafer 
shouldn’t be performed. Instead, the request for measurement 
should be changed to the next wafer. As shown in Fig. 3 (a), 
wafer processed on t jm is reported as DQI X abnormal; 
therefore, the scheduled measurement is then changed from t jN 
to t jN+1 in Fig. 3 (b). Since wafer processed on t jN+1 in Fig. 3 (b) 
has normal value of DQI X, it will be the metrology wafer in 
VC j. This will result in having (N+1) wafers in VC j. 
Scenario 4: Abnormal GSI 
The purpose of GSI is to evaluate deviations of process data 
[12]. A process-data deviation of a wafer may result in a 
deviation of its corresponding metrology datum. As such, this 
process wafer needs to be inspected. However, if a GSI alarm 
just happens once, then this may be a false alarm generated by 
noise. To confirm that a real deviation is detected, at least two 
consecutive GSI alarms should be alerted. In general, when 
deviation (i.e. shift or drift) of process data occurs, it will 
sustain and the corresponding GSI alarms will be on 
continuously until the cause of the deviation is fixed. 
Therefore, to prevent ISD from sending measurement requests 
endlessly, it is necessarily to set a breakpoint. Considering the 
above factors, ISD is designed to request additional 
measurements when GSI abnormalities are accumulated to 
merely 2 and 4. As shown in Fig. 4 (a), the AVM system keeps 
sending out GSI alarms from t jN-9 to t jN-5, then ISD will request 
additional metrology investigations on the 2
nd
 and 4
th
 
abnormal wafers processed at t jN-8 and t jN-6, respectively. After 
the measurement operations of these two wafers, the 
corresponding VC j and VC k will dynamically be changed to 
the ones shown in Fig. 4 (b). 
UCL
LCL
Process Time
i
y ( )
^
… … … …
Virtual Metrology Data 
UCL
LCL
Process Time
i
y ( )
^
… … … …
Virtual Metrology Data 
(a)
(b)
 Expected Metrology Wafer by ISD     Process Wafer      Metrology Wafer      GSI Alarm
…
i
t
1 j
t
2
t N-9 t
12
t … t t
m l
t
N-5
t
m
t …
3
t
N-8
t
N-7
t
13
t
14
t
N 1 1 j j j j j j k k k k k j
i
t
1 j
t
2
t
m-1
t … t t
9 m
t
1
t
15
t …
1
t
m
t
1
t
N 10 16 j k l l l l l m m
…
…
…
…
Request Measurement
N-6
t
j
…
2
t
k
…
…
3
t
j N-9 t
N-8
t
j j
 
Fig. 4 Response of ISD When Detecting Continuous GSI Alarms 
(a) Five Wafers in Abnormal GSI Sequence, 
(b) Additional Measurements for the 2
nd
 and 4
th
 Wafers in the 
Abnormal GSI Sequence. 
Scenario 5: Abnormal DQIy 
After receiving metrology data, the AVM system can then 
check DQI y for evaluating the quality of metrology data [11]. 
If the quality is not good, this metrology data cannot be used 
for updating VM models. Instead, another measurement 
3498
 
should be requested immediately after the DQI y alarm is 
issued. Such as in Fig. 5(a), the wafer processed at t jm receives 
its real metrology with abnormal DQI y at process time t k13. 
Therefore, another measurement is needed on t k13 which will 
force the VC j from having N wafers to N+13 wafers as 
depicted in 5(b) if this certain wafer’s DQI y value at t N+13 is 
normal. After describing the five scenarios, the operational 
flowchart of the ISD scheme can then be designed. 
UCL
LCL
Process Time
i
y ( )
^
… … … …
Virtual Metrology Data 
UCL
LCL
Process Time
i
y ( )
^
… … … …
Virtual Metrology Data 
(a)
(b)
  Expected Metrology Wafer by ISD     Process Wafer      Metrology Wafer      DQI y Alarm
Request Measurement
…
i
t
1 j
t
2
t
13
t t
13
t … t t
1 k
t
m-1
t …
m-1
t …
3
t
14
t
15
t t
3 14
t
15
t
25 2 m j j j j j j k k m k k k k k
…
i
t
1 j
t
2
t
13
t t N+13 t … t t
N+1 k
t
N-1
t …
15
t …
3
t
14
t
15
t t
N+3 1
t
2
t
25 N+2 16 j j j j j j j j N j j k k k
…
…
…
…
Metrology Received
Metrology Received
 
Fig. 5 Response of ISD When Receiving Abnormal DQI y 
(a) Abnormal DQI y Detected on the Received Metrology Value, 
(b) Additional Measurement Requested and Received. 
2.1 Operational Flowchart of the ISD Scheme 
Before starting to design the operational flowchart of the 
ISD scheme, two parameters, M and N, need to be defined: M 
is the original static sampling count for request measurement; 
while N is the desired sampling count for request 
measurement when sampling-rate reduction is considered. 
The flowchart of the ISD scheme for taking care of Scenarios 
1-4 is shown in Fig. 6 and is explained as follows. 
Step 1. When the time difference of process-activation 
between the previous and current process wafers exceeds one 
day, then the current process wafer is considered as the first 
wafer after idling. And if so, then it needs to request 
measurement (Step 8-2) so the VM models can be updated. 
Step 2. Increase Sampling Count by one whenever the ISD 
scheme is triggered. 
Step 3. To prevent ISD from sending request of 
measurement for a long period of time due to consecutive 
DQI X abnormal events, a maximal tolerable number (N+5) of 
wafers without measurements in a row should be defined. As 
such, when Sampling Count is greater than or equal to N+5, it 
will jump to Step 8-2 to request measurement. However, if 
Sampling Count has not reached this threshold, it will go to 
Step 4. 
Step 4. A status change may cause a shift or drift in the 
manufacturing process when comparing with normal 
historical data in the VM models. The process wafer 
immediately after each status change therefore is essential to 
request measurement for inspection, that is, Step 8-2. 
 
Step 5. If a wafer has bad DQI X value, then a warning will 
be sent to process engineer and execute Step 8-1 to skip 
measurement. 
Step 6. Whenever the Sampling Count is equal to or greater 
than N, which means the current process wafer is either the 
one expected to be measured or the previous wafer with DQI X 
abnormality, the procedure will go to Step 8-2 to request 
measurement. On the contrary, Step 7-1 will be performed if 
the Sampling Count is less than N. 
Step 7-1. If the process data of the current process wafer is 
not similar with the historical process data, namely abnormal 
GSI occur, then the next decision in Step 7-2 will be made. 
Step 7-2. From Step 7-1, the judgment of GSI abnormality 
is taken into account. The next step is to check whether it is the 
2
nd
 or 4
th
 wafer in the abnormal GSI sequence or not. If the 
answer is yes, then execute Step 8-2 to request measurement, 
else jump to Step 8-1 to skip measurement. The rationale of 
Steps 7-1 and 7-2 is explained in Scenario 4: Abnormal GSI. 
Step 8-1. Simply let the process wafer to skip measurement. 
Step 8-2. To request measurement for this current process 
wafer such that it becomes a metrology wafer. At the same 
time, Sampling Count is reset to zero. 
Eventually, the ISD scheme should be integrated into the 
advanced dual-phase algorithm of the AVM system [2]. This 
integration is explained below. 
ISD Start
4. Status Change
6. Is
Sampling Count 
Greater than or Equal 
to N
2. Add 1 to Sampling 
Count
Yes
No
No
Yes
8-2. Request Measurement
(Reset Sampling Count to 0)
ISD End
7-1. Check GSI
Bad
Good
Good
5. Check DQIx
Bad
7-2. 
Is No. of  Bad GSI 
Equals
 2 or 4
No
Yes
8-1. Skip 
Measurement 
3. Is
Sampling Count 
Greater than or Equal to 
N+5
Yes
No
1. First Wafer 
after idling
Yes
No
 
Fig. 6 Operational Flowchart of the  
Intelligent Sampling Decision (ISD) Scheme. 
3499
 
2.2 Advanced Dual-Phase Algorithm with ISD Scheme 
The inclusion of the ISD scheme into the advanced 
dual-phase algorithm [2] is shown in Fig. 7. The ISD scheme 
is embedded at the bottom of the right-hand side of Fig. 7 to 
become the last operation of the Phase-I algorithm. After 
finishing all the original Phase-I operations, the ISD scheme is 
applied to decide whether this process wafer should request 
measurement or not. 
Observing the left-hand side of Fig. 7, the operation: 
“Request Next Process Wafer Measurement” is also inserted 
into the Phase-II loop of the advanced dual-phase algorithm 
after detecting a DQI y abnormality. This measurement request 
is enforced by setting the Sampling Count to N. In other words, 
when a DQI y abnormality occurs, the Sampling Count is set to 
N. This action enforces the current process wafer in ISD to be 
measured for compensating the loss that the original DQI y 
abnormal wafer cannot be utilized to update VM models. The 
rationale of the above description is explained in Scenario 5: 
Abnormal DQI y. 
III. ILLUSTRATIVE EXAMPLE 
An emulated example of reducing the sampling rate to 1/2 
and 1/4 of the original setting using paired data of process and 
metrology values of 180 wafers from a plasma-enhanced 
chemical vapor deposition (PECVD) process in a 
semiconductor foundry in Taiwan was setup. With the test 
data being paired up, M is set to be 1. To reach the goal of 
reducing sampling rate to 1/2 and 1/4, N in the ISD scheme 
should be set to 2 and 4, respectively. For the case of 1/4 and 
under the condition of no external or internal disruptions, only 
1 out of 4 wafers will be sampled for measurement and 
updating the VM models, the real metrology values of the rest 
3/4 wafers will only be used for evaluating the prediction 
accuracy. 
The spread-out results of running numbers 41-120 of this 
emulated example are shown in Fig. 8. Those wafers which 
have been sampled and used for updating VM models are 
called tuning samples, while the others are called 
measurements samples. Observing running nos. 41-84 in Fig. 
8, it shows that only 1 out of 4 original samples is selected for 
updating the VM models because the manufacturing process 
is stable. However, a maintenance operation causing status 
change appears in the time period between running number 84 
and 85. Then, the ISD acknowledges it and immediately sends 
a measurement request at running number 85 for updating the 
VM models. This action is indicated as a red triangle at 
running number 85 in Fig. 8. Moreover, another abnormal 
events caused by GSI and DQI y examinations happened on 
running number 100. After the detection of two consecutive 
GSI alarms (GSI values < GSI threshold as shown at the 
bottom of Fig. 8), running number 100 is then requested to be 
measured, which is indicated as an inverted red triangle in Fig. 
8. After obtaining the metrology value of running number 100, 
the AVM system detects that its DQI y value is abnormal. 
617
624
610
603
596
7
3.5
0
1
0.5
41
50 60 70 80 90 100 110 120
 
Fig. 8 Example of Sampling Rate Reduction to 1/4 using ISD Scheme 
Metrology Data 
Collection
Collection 
Completed
Metrology Data vs. 
Process Data 
Matching Check
Matching 
Successful
Re-Training
DQI, VM & 
RI/GSI Models
Tuning
DQI, VM & 
RI/GSI Models
No
No
Yes
Update VM, RI/GSI & 
DQI Models
Phase II
1st Cassette
 after Idling
Yes No
Manual Activation or 
Model Refreshing is set
Yes
No
Re-compute  VM II  with 
RI/GSI of Each Workpiece
in the Entire Cassette
Start
Start
Update Models
DQI y Check
Bad
Good
Yes
Compute VM I   with 
RI/GSI 
for the Workpiece
No
Yes
Phase I
Process Data 
Collection of a 
Certain Workpiece
Collection 
Completed
DQI X Check
Bad
Good
Disable Refreshing
If Successful-Refreshing
Conditions are met
Matching Process 
Data is Good
No
Yes
Send Warning & 
Ask for Analysis
Send 
Warning & 
Ask for 
Analysis
Select Concise Modeling Samples
Key-Parameters Selection
Request Next 
Process Wafer 
Measurement
(Set Sampling Count to N)
ISD Scheme
 
Fig. 7 Advanced Dual-Phase Algorithm with ISD Scheme. 
3500
 
Therefore, additional measurement is requested at running 
number 101, as indicated in red star in Fig. 8, to make up for 
the loss of running number 100 that cannot be used to update 
VM models. After running number 101, again, only 1 out of 4 
original samples is selected for updating the VM models 
because the stability of the manufacturing process is resumed. 
Table I shows the accuracy comparison of sampling rate 
reduction from the original setting (1/1) to 1/2 and 1/4 of the 
original setting using the ISD scheme with those 180 test 
wafers. As shown in Table I, the mean absolute percentage 
errors (MAPEs) and 95% maximal errors (MaxErr) of the 
original (1/1), ISD (1/2), and ISD (1/4) cases are almost 
identical for both the Phase-I neural-network (NN I) and 
Phase-I partial least square (PLS I) VM results, where NN and 
PLS are two prediction algorithms utilized by the AVM 
system. 
Table I Accuracy Comparison of  
Sampling Rate Reduction using ISD Scheme 
Sampling Rate 
MAPE (%) 95% MaxErr (%) 
NNI PLSI NNI PLSI 
Original 1/1 0.41 0.42 0.86 0.81 
ISD 1/2 0.40 0.40 0.87 0.90 
ISD 1/4 0.40 0.41 0.88 0.91 
In conclusion, ISD provides a way to reduce sampling rate 
by dynamically determining the need to request measurement 
for the current process wafer. If no external or internal 
disruptions happen in the manufacturing process, then the 
sampling rate can be reduced to a preferred level. On the other 
hand, if any change or disruption occurs in the manufacturing 
process, additional measurements can be requested. These 
additional measurements are then used for updating VM 
models and inspecting product quality. As a result, ISD can 
not only reduce sampling rate, but also keep VM accuracy at 
an acceptable level which is able to provide qualified total 
inspection for various applications. 
IV. SUMMARY AND CONCLUSIONS 
The proposed ISD scheme can reduce sampling rate 
whenever a manufacturing process and process tool are stable. 
On the other hand, with external and/or internal disruptions 
appear in the manufacturing environment, the ISD scheme 
will request additional measurements to update the VM 
models for maintaining the VM accuracy. Based on the 
example of a PECVD process in a foundry, the ISD scheme 
has been proven to be a powerful algorithm that can reduce the 
sampling rate to one fourth of the original setting and remain 
similar VM accuracy simultaneously. By sampling rate 
reduction, the capex and process cycle time of the metrology 
tools can be decreased proportionally such that the total 
production cost can be lowered. However, the settings, such as 
N or M, in ISD are set manually in this paper. How to create 
these settings automatically and optimally for easy ISD 
implementation would be the future work. 
ACKNOWLEDGMENT 
The authors would like to thank United Microelectronics 
Corporation in Taiwan for providing the raw data of the 
PECVD process used in the illustrative example. 
REFERENCES 
[1] Weber, “Virtual Metrology and Your Technology Watch 
List: Ten Things You Should Know about This Emerging 
Technology,” Future Fab International, issue 22, section 
4, pp. 52-54, January 2007. 
[2] F.-T. Cheng, H.-C. Huang, and C.-A. Kao, “Developing an 
Automatic Virtual Metrology System,” IEEE Trans. on 
Automation Science and Engineering, vol. 9, no. 1, pp. 
181-188., January 2012. 
[3] F.-T. Cheng, H.-C. Huang, and C.-A. Kao, "Dual-Phase 
Virtual Metrology Scheme," IEEE Trans. on 
Semiconductor Manufacturing, vol. 20, no. 4, pp. 
566-571, November 2007. 
[4] A. Holfeld, R. Barlovi?, and P. Good, “A Fab-Wide APC 
Sampling Application,” IEEE Trans. on Semicond. 
Manuf., vol. 20, no. 4, pp. 393–399, Nov. 2007. 
[5] J. H. Lee, “Artificial Intelligence-Based Sampling 
Planning System for Dynamic Manufacturing Process,” 
Expert System with Apps., vol. 22, pp. 117-133, Feb. 
2002. 
[6] J.N. Munga, S. Dauzère-Pérès, P. Vialletelle, and C. 
Yugma, “Dynamic Management of Controls in 
Semiconductor Manufacturing,” in Proc. IEEE/SEMI 
Advanced Semicond. Manuf. Conf., USA, pp. 1-6, May 
2011. 
[7] J. Nduhura-Munga, G. Rodriguez-Verjan, S. 
Dauzère-Pérès, C. Yugma, P. Vialletelle, and J. Pinaton, 
“A Literature Review on Sampling Techniques in 
Semiconductor Manufacturing,” IEEE Trans. on 
Semicond. Manuf., vol. 26, no. 2, May 2013. 
[8] A. Boussetta and A. J. Cross, “Adaptive Sampling 
Methodology for Inline Defect Inspection,” in Proc. 
IEEE/SEMI Advanced Semicond. Manuf. Conf., 2005, pp. 
25–31. 
[9] D. Kurz, C.-D. Luca, and J. Pilz, “Sampling Decision 
System in Semiconductor Manufacturing Using Virtual 
Metrology,” in Proc. 2012 IEEE International 
Conference on Automation Science and Engineering 
(CASE), August 20-24 2012. 
[10] D. Kurz, C.-D. Luca, and J. Pilz, “Monitoring Virtual 
Metrology Reliability in a Sampling Decision System,” in 
Proceedings of 9
th
 IEEE International Conference on 
Automation Science and Engineering (CASE), March 11 
2013. 
[11] Y.-T. Huang and F.-T. Cheng, “Automatic Data Quality 
Evaluation for the AVM System,” IEEE Trans. on 
Semicond. Manuf., vol. 24, no. 3, pp.445-454, August 
2011. 
[12] F.-T. Cheng, Y.-T. Chen, Y.-C. Su, and D.-L. Zeng, 
“Evaluating Reliance Level of a Virtual Metrology 
System,” IEEE Trans. on Semicond. Manuf., vol. 21, no. 1, 
pp. 92-103, February 2008. 
[13] F.-T. Cheng, C.-F. Chen, and W.-H. Tsai, “Applying the 
AVM System for TFT-LCD Manufacturing,” submitted to 
IEEE Transactions on Semiconductor Manufacturing. 
3501
