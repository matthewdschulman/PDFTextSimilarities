Jumping Control for Compliantly Actuated Multilegged Robots
Dominic Lakatos, Gianluca Garofalo, Alexander Dietrich, and Alin Albu-Sch¨ affer
Abstract—A feedback control to generate jumping motions
for compliantly actuated multilegged robots is proposed. The
method allows to specify the direction of the jumping motion.
This is achieved by a constraint that deﬁnes a one-dimensional
submanifold and a bang-bang control which generates a limit
cycle on this submanifold. The approach is based on classical
impedance control with the difference that the stiffness on the
submanifold and the force to preserve a predeﬁned nominal
body conﬁguration result from the intrinsic mechanical springs
in the joints. Furthermore, we propose two controller imple-
mentations: the ﬁrst implementation does not require to detect
the contact state, while the second implementation requires
contact state detection, but accounts in addition for Coulomb
friction constraints. The controller is validated in simulation
with a compliantly actuated quadruped.
I. INTRODUCTION
Compliant actuators in robotic arms have been shown
to robustly handle mechanical impacts and to improve the
performance and energy efﬁciency [1], [2], [3], [4], [5],
[6], [7]. Especially in the case of cyclic motion tasks, the
capability to buffer and release elastic energy may reduce the
size and weight of required actuators and save a substantial
amount of energy. These properties are even of major-
increased importance for multilegged robots, which need to
wirelessly walk, jump, or run over rough and uneven terrain.
The step from rigid towards elastic actuation introduces
natural oscillation dynamics into the plant which can be
exploited on the one side, but it turns the control into a
challenging task on the other side.
The idea of legged robots with mechanical springs in
the joints has been initiated by passive dynamic walkers
[8] and evolved to compliantly actuated walking, hopping,
and running robots [9], [10], [11]. Thereby, the common
design and control goal is to exploit the natural dynamics
of the plant such that the resulting system approaches the
performance, efﬁciency, and versatility of the biological
archetypes. This paper focuses on the control of compliantly
actuated legged robotic systems. Our work is inspired by
experimentalobservationsofbiologists[12]whohypothesize
that high-dimensional, nonlinear system dynamics anchored
in a complex animal collapse to simple template dynamics
like the spring loaded inverted pendulum (SLIP). These
assumptions are further supported by biological evidence
and robotic implementations of central pattern generation
(CPG) [13] and adaptive frequency oscillators (AFO) [14].
These approaches are based on the assumption that a central
unit, e.g. composed of multiple, phase coupled oscillators, is
The authors are with the Institute of Robotics and Mechatronics, German
Aerospace Center (DLR), D-82234 Oberpfaffenhofen, Germany. Contact:
dominic.lakatos@dlr.de
equilibrium
COM
position
actual
COM position
reﬂected
joint impedance
constraint
control
desired
1D submanifold
ﬂoating base
link
motor
spring
bang-bang
control
Fig. 1. General idea of the control strategy
able to generate the complex multi degree-of-freedom (DoF)
motion. While in [13] the CPGs are applied as open loop
control, the approach of [14] considers already a feedback
of the plant in the motion pattern generation.
In our recent papers [15], [16] we proposed a control
approach which directly excites the intrinsic mechanical
oscillation modes of the plant. Using a switching control
triggered by the torque/deﬂection of the springs in the joints
of the robot, the frequency of the oscillation adapts to the
mechanical frequency of the system. In contrast to [13], [14],
in [15], [16] the oscillatory plant dynamics itself are used
as oscillation unit. The resulting motion corresponds to the
initially excited oscillation mode which is determined by the
mechanical structure of the system. Therefore, the resulting
motion is potentially energy efﬁcient.
In this paper we present a control method which makes
use of the beneﬁcial properties of the switching control, but
additionally allows to predeﬁne the shape of the oscillation
mode by control. This is achieved by specifying a one-
dimensional submanifold of the Cartesian space. One of the
main contributions is that the controller is designed such that
the elastic behavior of the springs in the joints is changed
only to a minimum extent by control, i.e. only to approach
the desired submanifold. As exempliﬁed in the simulation
part of the paper, the user can control the direction of the
jumping motion. This is the main difference of the current
method compared to our previous work [15], [16], where the
oscillation mode is completely determined by the structure
of the plant.
The paper is structured as follows: In the next section we
present the general idea of the method. Then, in Sect. III we
brieﬂy introduce the considered model which is then used
in Sect. IV as a basis for the controller design. In Sect. V
2014 IEEE International Conference on Robotics & Automation (ICRA)
Hong Kong Convention and Exhibition Center
May 31 - June 7, 2014. Hong Kong, China
978-1-4799-3684-7/14/$31.00 ©2014 IEEE 4562
the method is validated by simulation and ﬁnally Sect. VI
concludes the work.
II. THE IDEA
The control strategy introduced here aims at generat-
ing predeﬁned jumping motions by exploiting the intrinsic
mechanical properties of the plant. The class of systems
considered in this work are ﬂoating base systems with a
number of compliantly actuated limbs, where the tip motion
of the limbs is subject to contact constraints such that the
ﬂoating base system can be statically balanced
1
. As sketched
in Fig. 1, each joint of the limbs is equipped with a motor
which acts on the succeeding link via a spring.
The basic idea is controlling the amplitude and direction
of the net force acting on the center of mass (COM) via the
position of the motors in the joints such that a desired jump-
ing motion results. As depicted in Fig. 1, our controller is
based on a Cartesian impedance at the COM that reﬂects the
mechanical impedance of the springs in the joints as closely
as possible. More precisely, the impedance acts between the
actual COM position which reﬂects the conﬁguration of the
limbs and the equilibrium COM position which reﬂects the
conﬁguration of the motors. If the actual and the equilibrium
COM position are not equal, the impedance produces a
Cartesian force at the COM. Thereby, the direction of the
force depends on the direction of the corresponding control
error. In order to control the direction of the Cartesian force,
the motion of the Cartesian control error can be constrained
to a predeﬁned, one-dimensional submanifold. Therefore,
this submanifold determines the direction of the Cartesian
force acting at the COM. As in [17], we push the system
to a one-dimensional submanifold (deﬁned by the control
law), where we generate a limit cycle. However, here the
oscillation is not generated based on energy considerations,
but using the bang-bang control introduced in [15], [16], we
are able to adapt to the mechanical oscillation frequency of
the system.
III. MODEL
Consider the legged ﬂoating base system with a kinematic
structure as shown in Fig. 2. The position and orientation of
the base link frame fBg with respect to a world coordinate
system fWg is described by r
b
2 R
3
and R
b
2 SO(3),
respectively, and the conﬁguration of the legs is given by the
joint coordinatesq2QR
n
with 3<n2N. The gener-
alized velocity of the complete systemv = (!
T

T
_ q
T
)
T
is
composed of the angular velocity! 2R
3
and translational
velocity 2R
3
of the ﬂoating base, and the joint velocity
_ q2R
n
for all actuated joints. In the following, we consider
1
Note that at least three contact points are required (which are not all
aligned) to statically balance a spatial free ﬂoating base system against
gravity.
link i
q
i
ﬂoating base
fBg
fWg
F
k
R
b
r
b

!

i

i
Fig. 2. Kinematic structure of the legged ﬂoating base system
generic dynamic systems satisfying
M(q;R
b
)_ v +p(q;v;R
b
)
=
?
?
0
0
 d(_ q)
?
?
+
∑
k
J
k
(q)
T
F
k
; (1)
where M(q;R
b
) 2 R
(6+n)(6+n)
represents the inertia
matrix,p(q;v;R
b
)2R
6+n
representsthevectorofCoriolis,
centrifugal and gravity forces, andd(_ q) is a damping force
satisfyingd(_ q)
T
_ q > 0;8_ q6=0. The most right term in (1)
accounts for contact wrenchesF
k
2R
6
acting at the contact
point k of the feet. Thereby, the transposed of the Jacobian
matricesJ
k
(q) map the contact wrenches to the generalized
forces of the bodies. A similar model has been considered
in [18].
In contrast to [18], we consider compliantly actuated
systems for which the joint torques  2 R
n
are derived
from the elastic potential U(;q), i.e.
 = 
(
@U(;q)
@q
)
T
=: ( q): (2)
The joint torques deﬁned by (2) correspond to physical
springs acting between the motor positions2R
n
and the
joint positions q. Therefore, U(;q) is positive deﬁnite in
the sense that U(;q)> 0;8( q)6=0.
Remark 1: Usingclassicalapproximations[19],themotor
positions are subject to dynamics B

 + = 
m
, where
B represents the motor inertia, and the motor torque 
m
is the control input. However, using a PD controller 
m
=
 K
D
_
  K
P
( 
d
) for the desired motor position 
d
with high, positive deﬁnite gain matrices K
D
;K
P
2R
nn
such that (B

 + K
D
_
 + 1) = 
d
    0, since
 := 1=kK
P
k! 0 (singular perturbation assumption [20]),
we can approximately consider as control input.
Theoutputofthecontrollerderivedinthenextsectionwill
be joint torques, while the control input of the considered
plant are motor positions . Since U(;q) is positive deﬁ-
nite, the functions ( q) arestrictly monotone.Therefore,
the inverse functions ()
 1
exist. Using the mapping
 =
0
+ = ()
 1
+q; (3)
we can consider and as equivalent control inputs.
4563
IV. CONTROL APPROACH
The goal is to control the Cartesian force acting on
the center of mass (COM) of the complete ﬂoating base
system via the joints. In more detail, we want to generate
a periodic motion of the COM position along a predeﬁned,
one-dimensional submanifold of R
3
, such that the subman-
ifold determines the ”direction” of the COM motion and
the resulting force. An additional goal is to change the
dynamics of the plant to a minimal extent by control. This
will be achieved by Cartesian impedance control [21], [22],
[23], which is combined with the constraint submanifold
control [17] and our recently proposed bang-bang control
[15]. Compared to [21], [22], [23], and [17], where the
impedance was generated partly or completely by control,
we will implement the Cartesian impedance by exploiting
the intrinsic, elastic behavior of the joints.
A. Change of coordinates
Consider the position of the COMr
BC
2R
3
with respect
to a coordinate system attached to the ﬂoating base. The
position r
BC
= r
BC
(q) depends on the joint coordinates
q. In addition to r
BC
(q), consider a virtual COM position
r
BC
() which depends on the motor position . In the
absence of external load, the virtual positionr
BC
() reﬂects
the equilibrium position of the spring deﬁned by (2). Based
on this consideration, we deﬁne coordinates
x(q) =r
BC
(q) r
BC
(
0
); (4)
where x 2 X  R
3
and 
0
= const: correspond to a
desired equilibrium conﬁguration of the springs (2). These
coordinates can be used to implement a Cartesian impedance
between the measured COM position r
BC
(q) and desired
COM positionr
BC
(
0
). Then, as in [17], we can consider
a mappingz :X R
3
!ZR
2
with a full rank Jacobian
matrixJ
z
(x) such that
z(x) =0 (5)
deﬁnes a one-dimensional submanifoldN
Z
ofR
3
. Once the
constraint (5) is satisﬁed, a Cartesian impedance produces
a force whose direction can be predeﬁned by the constraint
submanifold. All relevant sets and manifolds used in this
approach are illustrated in Fig. 3.
B. Transformation of the joint impedance
The constraint force resulting from the intrinsic joint stiff-
ness (2) can be derived from the elastic potentialU(
0
;q) =
U(
0
;q(x(z))) as follows:

z
= 
(
@U(
0
;q(x(z)))
@q
@q
@x
@x
@z
)
T
= 
(
@x
@z
)
T
(
@q
@x
)
T
(
@U(
0
;q)
@q
)
T
: (6)
The last factor on the most right hand side of (6) equals the
joint torques deﬁned by (2) for  = 
0
. From (6) it can
be seen that the joint torques are transformed successively
to Cartesian and constraint forces with the transposed of
NX
X =ZNZ
Z
NZ
Q=XNX
Fig. 3. The constraint z(x) =0 has highest priority. Together withN
Z
,
the coordinatesx(q) are completely deﬁned inX. The overall setQ is the
combination ofX and its null spaceN
X
.
the Jacobian matrices (@q=@x) 2 R
n3
and (@x=@z) 2
R
32
, respectively. These Jacobian matrices correspond to
the Jacobian matrices of the inverse mappings of (4) and
(5).
In order to derive the Jacobian matrices required in (6),
we can augment the Jacobian matrices of the mappings (4)
and (5) such that they are invertible. Note that thereby we
avoid to deﬁne nullspace coordinates [24]. In case of (4) and
(5) the procedure is as follows:
(
dx
dn
x
)
=J
aug
x
dq; whereJ
aug
x
=
(
J
x
(q)
J
nx
(q)
)
2R
nn
;
(7)
(
dz
dn
z
)
=J
aug
z
dx; whereJ
aug
z
=
(
J
z
(x)
J
nz
(x)
)
2R
33
:
(8)
The inversion of the augmented Jacobian matrices deﬁned
in (7) and (8) can be simpliﬁed with the following lemma
which is proved in [25, chapt. A.5].
Lemma 1: The augmented Jacobian matrix
J
aug
=
(
J
J
n
)
(9)
is a square matrix. IfJ
n
is chosen as
J
n
=
(
ZZ
T
)
 1
Z; (10)
where the nullspace base Z satisﬁes JZ
T
= 0 and  is
a positive deﬁnite matrix (metric), the inverse of (9) can be
written in the form
(J
aug
)
 1
=
(

 1
J
T
(
J
 1
J
T
)
 1
Z
T
)
: (11)
Note that Z and  are not unique. Possible choices are
discussed in the appendix.
Then, applying Lemma 1 to (7) and (8) yields
@q
@x
(q) =
 1
x
J
x
(q)
T
(
J
x
(q)
 1
x
J
x
(q)
T
)
 1
; (12)
@x
@z
(x) =
 1
z
J
z
(x)
T
(
J
z
(x)
 1
z
J
z
(x)
T
)
 1
: (13)
4564
From (7) and (8) it can be seen that the joint impedance (2)
generates also forces in the nullspaces ofJ
x
andJ
z
, given
by

nx
= Z
x
(q)
(
@U(
0
;q)
@q
)
T
(14)
and

nz
= Z
z
(x)
(
@q
@x
(q)
)
T
(
@U(
0
;q)
@q
)
T
; (15)
respectively. How these variables can be controlled will be
suggested in the next section.
C. Feedback control
In the following, we introduce the control law for the
Cartesian forcef
x
and then present two different approaches
to implement the joint torque . The Cartesian controller
comprises
f
x
=J
z
(x)
T

d
z
+J
nz
(x)
T

d
nz
: (16)
The ﬁrst term in (16)

d
z
= D
z
_ z K
z
z (17)
with symmetric and positive deﬁnite gain matrices D
z
2
R
22
and K
z
2R
22
forces the motion of x to approach
the constrained submanifold deﬁned by (5). The second term
in (16)

d
nz
=
nz
+
nz
(
nz
); (18)
is composed of a generalized force 
nz
(15) reﬂecting
the joint impedance on the constrained submanifold and a
switching function

nz
(
nz
) =
{
sign(
nz
)j^ 
nz
j if j
nz
j>
nz
0 otherwise
; (19)
where 
nz
and ^ 
nz
are threshold and switching constants,
respectively.
In our recent papers [15] and [16] we have proposed
a control similar to (19). The controller proposed in [16]
excites an intrinsic mechanical oscillation mode of the plant.
Compared to [16], in this work we predeﬁne the oscillation
mode by control (cf. (5) and (17)). Additionally, note that
the control (19) switches the generalized force
nz
. Thereby,
we circumvent to introduce a nullspace coordinate, which is
in general not possible [24].
1) Resolving the nullspace ofJ
x
by preserving the initial
conﬁguration: In order to implement the joint torque for
the Cartesian controller (16), the behavior in the nullspace of
J
x
(q) has to be speciﬁed. This can be done by projecting
the intrinsic joint impedance into the nullspace of J
x
(q)
such that a nullspace force 
nx
is generated which aims
at preserving the equilibrium conﬁguration
0
. Considering
the nullspace force given by (14) and the Cartesian controller
(16)–(19), the joint torque can be implemented as
 =J
x
(q)
T
f
x
+J
nx
(q)
T

nx
: (20)
This has the advantage that no motor motion is required
as long as z(x) = 0 and 
nz
(
nz
) = 0. Note that
the controller (20) requires no knowledge of the contact
states. While from a robustness point of view this might be
desirable, it is not possible on the other hand to guarantee
any conditions on the contact forces. This motivates us to
consider the control law in IV-C.2.
2) Resolving the nullspace ofJ
x
by optimal contact force
distribution: In case slipping has to be avoided, the contact
forces must be considered directly in the controller. To this
end, an alternative approach to implement the joint torque
for the Cartesian controller (16) is to distribute the contact
forces via an optimization problem.
Therefore, consider a stacked vector of contact forces
f
c
=
?
?
?
f
1
.
.
.
f
nc
?
?
?2R
3nc
; (21)
where n
c
2N is the number of contact points. Additionally,
consider the mapping
 =J
c
(q;R
b
)
T
f
c
(22)
where the transposed of the Jacobian matrix J
c
(q;R
b
) 2
R
3ncn
maps the contact forces f
c
to the joint torques .
Then, we minimize the cost function
E(f
c
) =
1
kJ
T
c
f
c
 J
T
x
f
x
k
2
+
2
kJ
T
c
f
c
 J
T
nx

nx
k
2
;
(23)
where the ﬁrst term aims at implementing the Cartesian
control (16) and the second term aims at preserving the equi-
librium conﬁguration 
0
, with 
1
 
2
> 0. Considering
unilateral and Coulomb friction constraints for the contact
forcesf
k
, such that
f
k
2F
k
:=
{
f
k
2R
3
j
√
f
2
kx
+f
2
ky
f
kz
; f
kz
 0
}
;
(24)
where is the non-negative Coulomb friction coefﬁcient, the
optimization problem
minE(f
c
)
s.t.
f
k
2F
k
;8k = 1;:::;n
c
(25)
can be solved
2
to compute the contact forcesf
c
. Note that if
the unilateral / Coulomb friction constraints are removed, the
control law (20) is obtained. In contrast to the approach of
Sect. IV-C.1, the contact force distribution approach requires
to detect the contact states.
V. SIMULATION
The proposed jumping controller has been tested in
simulation for the compliantly actuated quadruped robot
depicted in Fig. 4, using the articulated body algorithm
2
The constraint f
k
2 F
k
;8k = 1;:::;nc can be expressed in linear
form through a polyhedral approximation of the friction cone.
4565
hip joint 1
hip joint 2
knee joint
x
y
z
contact point
0.2 m 0.1 m
0.05 m
0.07 m
0.07 m
Fig. 4. Simulated quadruped: The trunk is modelled as a cuboid with
a mass of 5kg and the center of mass placed in the middle of the bottom
side and inertiadiag(0:0052;0:0177;0:0208)kgm
2
. Each leg and each leg
segment (thigh and shank) is identical with a mass of 0:1kg and the center
of mass at the middle of the segment and inertia (about the center of mass,
perpendicular to the cylinder axis) 0:00004kgm
2
.
[26] and a point contact version of the model [27] im-
plemented in Matlab/Simulink
R 
. The considered quadruped
has four legs and a total number of 12 hinge joints (two
perpendicular hinge joints in each hip and one in each
knee), i.e. n = 12. The joints of each leg are actu-
ated via linear springs 
i
= K
i
(
i
  q
i
) with stiff-
ness matrices K
i
= diag(8;4;4)Nm=rad. Linear, vis-
cous damping produces torques d
i
= D
i
_ q
i
with D
i
=
diag(0:16;0:04;0:04)Nms=rad in the joints. Furthermore,
ground contact points are considered at the tips of each leg.
Thereby, a Coulomb friction constant of  = 0:75 has been
assumed.
A. Controller implementation
As can be seen in Fig. 4 all joint axes of the con-
sidered quadruped are parallel. Therefore, the total COM
motion has been controlled in 3-dimensional space, i.e.
x = (x
x
;x
y
;x
z
)
T
. To implement directed jumping motions,
linear constraints of the form z
1
= c
1
x
x
+c
2
x
z
= 0, z
2
=
c
3
x
y
+c
4
x
z
= 0 have been considered. The corresponding
submanifold represents a straight line passing through the
origin, where  = atan2(c
1
;c
2
) is the angle between the x-
axisandtheline,and = atan2(c
3
;c
4
)istheanglebetween
the y-axis and the line.
For the nullspaces of J
x
and J
z
we have chosen the
dynamically consistent solution given in the appendix. The
proportionalgainoftheconstraintcontroller(17)waschosen
K
z
= diag(2;2)10
5
N=m and the derivative gain was cho-
senD
z
= diag(1;1)10
4
Ns=m. The parameters of the bang-
bang control (19) were 
nz
= 500N and ^ 
nz
= 3500N.
Additionally, the output of the switching function (19) has
been ﬁltered using the linear, second order ﬁlter
H(s) =
1
T
2
v
s
2
+2T
v
s+1
where s is the Laplace variable and the time constant has
been chosen T
v
= 0:01sec.
 1
0
1
0
1
2
0
0.05
0.1
0.15
0.2
0.25
COM pos. in x (m) COM vel. in z (m/s)
COM pos. in z (m)
0 0.5 1 1.5 2 2.5
 100
0
100
COM pos in x (m)
constr. angle (deg)

 
Fig. 5. Relation between the vertical velocity _ r
COMz
and positionr
COMz
along the horizontal position r
COMx
of the total COM (upper plot) and
slope of the line constraint (lower plot) for a simulated sweep from vertical
to forward jumping and back to vertical jumping.
B. Simulation results
It has been evaluated whether the direction of the jumping
motion can be controlled using the implementation of the
joint torque given in Sect. IV-C.1. Therefore, the direction
of the constraint line has been varied in order to control
the spatial direction of the jumping motion. Fig. 5 depicts a
three-dimensional phase plot of the ﬂoating base motion and
the direction of the line constraint. The phase plot shows the
relation between the vertical velocity and position along the
horizontal position of the total center of mass. The trunk
motion of the quadruped starts with a limit cycle in the
vertical direction, then evolves to a forward hopping motion
and ﬁnally approaches the initial vertical limit cycle motion.
Furthermore, Fig. 6 depicts the total center of mass position
for 3-dimensional jumping motion. The quadruped starts
with a vertical jumping motion and then evolves to a forward
and sideward movement. This demonstrates the capability of
the proposed method to control the direction of the jumping
motion (see also the attached video).
Additionally, Fig. 7 shows the joint positions, motor
positions (control input), and joint torques of one of the
front legs in the vertical jumping phase. It can be observed
that the joint motion is almost periodic. Furthermore, it can
be seen that the motion of the motors is dominated by the
ﬁltered output of the switching control (19). This is due to
the submanifold being vertical and the constraint is trivially
satisﬁedandvalidatesoneofourbasicdesigngoalschanging
the intrinsic mechanical behavior of the plant to a minimal
4566
0
2
4
 1
 0.5
0
0.1
0.12
0.14
0.16
COM pos. in x (m) COM pos. in y (m)
COM pos. in z (m)
0 1 2 3 4
 100
0
100
COM pos in x (m)
constr. angle (deg)

 
Fig.6. MotionofthetotalCOM(upperplot)andslopeofthelineconstraint
(lower plot) for a simulated sweep from vertical to forward and to sideward
jumping.
extent by control.
Finally, the inﬂuence of the contact force distribution
(Sect. IV-C.2) has been evaluated for a vertical jumping
motion. Therefore, the lower Coulomb friction constant of
 = 0:5 has been assumed. To reach the limit of the friction
constraint (friction cone) also the parameters of the bang-
bang control have been increased, i.e. 
nz
= 2000N and
^ 
nz
= 5500N. Fig. 8 compares the normal versus tangential
contact force and the vertical versus horizontal movement of
the tip of one leg. It can be seen that without the contact
force distribution, the contact force reaches the limit of the
friction cone and a horizontal movement of the tip of the leg
occurs (sliding contact). This is avoided with the controller
implementation of Sect. IV-C.2.
VI. CONCLUSION
A method to control jumping motion for compliantly
actuated,multileggedrobotsisproposed.Themethodapplies
to statically balanced legged robots, where all the joints
are actuated. In particular, the controller allows to specify
the desired jumping direction by deﬁning a submanifold.
Thereby, the following properties can be summarized:
 The stiffness on the submanifold is an intrinsic mechan-
ical property of the plant;
 The force preserving the initial conﬁguration is an
intrinsic mechanical property of the plant;
 Due to the switching control the oscillation frequency
adapts to the intrinsic frequency of the task;
It can be concluded that the only control actions (motor
motions) are to fulﬁll the speciﬁed constraints and to sustain
the limit cycle.
In the ideal case (where the motor is an ideal position
source), it can be expected that if the speciﬁed submanifold
equals the mechanical intrinsic oscillation mode of the plant,
the energy required to sustain the limit cycle equals the
energydissipatedinthejointsandcontacts.Acomprehensive
efﬁciency analysis will be part of our future work.
APPENDIX
Remark 2 (Determination ofZ): The singular value de-
composition is a numerically efﬁcient way to compute the
null space base matrix Z by decomposing J 2R
op
with
o < p such that J = USV
T
, where U 2 R
oo
and
V 2 R
pp
are unitary matrices, and S 2 R
op
is a
rectangular diagonal matrix containing the singular values.
Herein V =
(
V
1
;V
2
)
while V
1
2 R
po
spans the
subspace of J, and V
2
2 R
p(p o)
deﬁnes the null space
ofJ so thatZ =V
T
2
.
Remark 3 (Choice of ): In general, the metric  can
be chosen arbitrarily, but several speciﬁc choices have ben-
eﬁcial properties. Two of them are brieﬂy explained in the
following. If
 =I ; (A1)
then (10) simpliﬁes to J
n
= Z. Numerical computations
can be saved that way by avoiding the inversion ofZZ
T
sinceZIZ
T
=I. Such a metric leads to a so-called static
null space projection [28]. Another particular solution is
 =

M(q) ; (A2)
which corresponds to the dynamically consistent formulation
from the operational space approach [29] as shown in [30],
1.4 1.6 1.8
0
0.5
1
time (sec)
joint pos. (rad)
1.4 1.6 1.8
 2
 1
0
time (sec)
joint pos. (rad)
1.4 1.6 1.8
 1
0
1
time (sec)
motor pos. (rad)
1.4 1.6 1.8
 1.5
 1
 0.5
time (sec)
motor pos. (rad)
1.4 1.6 1.8
 5
0
5
time (sec)
joint torque (Nm)
1.4 1.6 1.8
 5
0
5
time (sec)
joint torque (Nm)
Fig. 7. Joint states corresponding to approximately two oscillation periods
of the vertical jumping motion shown in Fig. 5
4567
0 20 40 60
0
50
100
tang. force (N)
norm. force (N)
0.11 0.12 0.13
0
0.05
0.1
foot pos. x (m)
foot pos. z (m)
0 20 40 60
0
50
100
tang. force (N)
norm. force (N)
0.11 0.12 0.13
0
0.05
0.1
foot pos. x (m)
foot pos. z (m)
Fig. 8. Comparison of the two controller implementations: without contact
forcedistributioncf.Sect.IV-C.1(upperrow),withcontactforcedistribution
cf.Sect.IV-C.2(lowerrow).Theleftcolumnshowsthetangentialvs.normal
contact force for one leg and the limit of the friction cone (dash-dotted line).
The right column shows the motion of the tip of one leg in the xz-plane.
In the upper right plot, a sliding along the ground can be observed, i.e.
the vertical position is zero, while the horizontal position changes from
 0:11m to 0:13m.
for example. The inertia matrix

M(q)2R
nn
accounts for
the complete inertia M(q) 2 R
(6+n)(6+n)
(including the
ﬂoating base). As a consequence of this choice, the inertia
matrix is of block-diagonal shape in the decoupled space
3
.
In other words, (A2) ensures that null space actions do not
lead to accelerations on the higher priority levels.
REFERENCES
[1] M. Grebenstein and P. v. d. Smagt, “Antagonism for a highly anthro-
pomorphic hand-arm system,” Advanced Robotics, vol. 22, no. 1, pp.
39–55, 2008.
[2] S. Wolf and G. Hirzinger, “A new variable stiffness design: Matching
requirements of the next robot generation,” in IEEE Int. Conf. on
Robotics and Automation, 2008.
[3] A. Albu-Sch¨ affer, O. Eiberger, M. Fuchs, M. Grebenstein, S. Had-
dadin, C. Ott, A. Stemmer, T. Wimb¨ ock, S. Wolf, C. Borst, and
G. Hirzinger, “Anthropomorphic soft robotics – from torque con-
trol to variable intrinsic compliance,” in Robotics Research, ser.
Springer Tracts in Advanced Robotics, C. Pradalier, R. Siegwart, and
G. Hirzinger, Eds. Springer, 2011, vol. 70, pp. 185–207.
[4] M. Grebenstein, A. Albu-Sch¨ affer, T. Bahls, M. Chalon, O. Eiberger,
W.Friedl,R.Gruber,S.Haddadin,U.Hagn,R.Haslinger,H.H¨ oppner,
S. J¨ org, M. Nickl, A. Nothhelfer, F. Petit, J. Reill, N. Seitz,
T. Wimb¨ ock, S. Wolf, T. W¨ usthoff, and G. Hirzinger, “The DLR Hand
Arm System,” in Proc. IEEE Int. Conf. on Robotics and Automation,
2011.
[5] D. Braun, M. Howard, and S. Vijayakumar, “Exploiting variable
stiffness in explosive movement tasks,” in Robotics: Science and
Systems, 2011.
[6] D. Braun, F. Petit, F. Huber, S. Haddadin, P. van der Smagt, A. Albu-
Schaffer, and S. Vijayakumar, “Optimal torque and stiffness control
in compliantly actuated robots,” in Proc. IEEE/RSJ Int. Conf. on
Intelligent Robots and Systems. IEEE, 2012.
[7] S. Haddadin, F. Huber, and A. Albu-Schaffer, “Optimal control for
exploiting the natural dynamics of variable stiffness robots,” in Proc.
Int. Conf. on Robotics and Automation. IEEE, 2012, pp. 3347–3354.
[8] T. McGeer, “Passive bipedal running,” Proceedings of the Royal
Society of London. B. Biological Sciences, vol. 240, no. 1297, pp.
107–134, 1990.
[9] I.Poulakakis,J.A.Smith,andM.Buehler,“Modelingandexperiments
of untethered quadrupedal running with a bounding gait: The scout ii
robot,” The International Journal of Robotics Research, vol. 24, no. 4,
pp. 239–256, 2005.
3
The dynamic equations in the decoupled space are obtained by coordi-
nate transformation into the local null space directions.
[10] A. Sproewitz, A. Tuleu, M. Vespignani, M. Ajallooeian, E. Badri,
and A. Ijspeert, “Towards Dynamic Trot Gait Locomotion—Design,
Control and Experiments with Cheetah-cub, a Compliant Quadruped
Robot,” International Journal of Robotics Research, vol. 32, no. 8, pp.
932–950, 2013.
[11] M. Hutter, C. Gehring, M. Bloesch, M. Hoepﬂinger, C. D. Remy,
and R. Siegwart, “Starleth: A compliant quadrupedal robot for fast,
efﬁcient, and versatile locomotion,” in Int. Conf. on Climbing and
Walking Robots (CLAWAR), 2012.
[12] R. Full and D. Koditschek, “Templates and anchors: neuromechanical
hypotheses of legged locomotion on land,” J. Exp. Biol., vol. 202,
no. 15, pp. 3325–3332, 1999.
[13] A. Ijspeert, “A connectionist central pattern generator for the aquatic
and terrestrial gaits of a simulated salamander,” Biol. Cybern., vol. 84,
pp. 331–348, 2001.
[14] J. Buchli and A. Ijspeert, “Self-organized adaptive legged locomotion
in a compliant quadruped robot,” Autonomous Robots, vol. 25, no. 4,
pp. 331–347, 2008.
[15] D. Lakatos, F. Petit, and A. Albu-Sch¨ affer, “Nonlinear oscillations for
cyclic movements in variable impedance actuated robotic arms,” in
Proc. IEEE Int. Conf. on Robotics and Automation, 2013, pp. 508–
515.
[16] D. Lakatos, M. G¨ orner, F. Petit, A. Dietrich, and A. Albu-Sch¨ affer,
“A modally adaptive control for multi-contact cyclic motions in
compliantly actuated robotic systems,” in Proc. IEEE/RSJ Int. Conf.
on Intelligent Robots and Systems, 2013, pp. 5388–5395.
[17] G. Garofalo, C. Ott, and A. Albu-Sch¨ affer, “Orbital stabilization of
mechanicalsystemsthroughsemideﬁnitelyapunovfunctions,”in Proc.
American Control Conference, 2013, pp. 5715–5721.
[18] C. Ott, M. A. Roa, and G. Hirzinger, “Posture and balance control for
biped robots based on contact force optimization,” in Proc. IEEE-RAS
Int. Conf. on Humanoid Robots (Humanoids), 2011, pp. 26–33.
[19] M. Spong, “Modeling and control of elastic joint robots,” Transactions
of the ASME: Journal of Dynamic Systems, Measurement, and Control,
vol. 109, pp. 310–319, 1987.
[20] P. Kokotovic, H. Khalil, and J. O’Reilly, Singular Perturbation Meth-
ods in Control: Analysis and Design. Academic Press, London, 1986.
[21] A. Albu-Sch¨ affer and G. Hirzinger, “Cartesian impedance control
techniques for torque controlled light-weight robots,” in Proc. IEEE
Int. Conf. on Robotics and Automation, 2002, pp. 657–663.
[22] C. Ott, A. Albu-Sch¨ affer, A. Kugi, S. Stamigioli, and G. Hirzinger,
“A passivity based cartesian impedance controller for ﬂexible joint
robots-part i: Torque feedback and gravity compensation,” in Proc.
IEEE Int. Conf. on Robotics and Automation, 2004.
[23] A. Albu-Sch¨ affer, C. Ott, and G. Hirzinger, “A passivity based
cartesian impedance controller for ﬂexible joint robots-part ii: Full
state feedback, impedance design and experiments,” in Proc. IEEE
Int. Conf. on Robotics and Automation, 2004.
[24] C. Ott, A. Kugi, and Y. Nakamura, “Resolving the problem of
non-integrability of nullspace velocities for compliance control of
redundant manipulators by using semi-deﬁnite lyapunov functions,”
in Proc. IEEE Int. Conf. on Robotics and Automation, 2008.
[25] C. Ott, Cartesian Impedance Control of Redundant and Flexible-Joint
Robots, B. Siciliano and O. Khatib, Eds. Springer, 2008.
[26] R. Featherstone, Rigid body dynamics algorithms. Springer Berlin,
2008, vol. 49.
[27] M.AzadandR.Featherstone,“Modelingthecontactbetweenarolling
sphere and a compliant ground plane,” ACRA, Brisbane, Australia,
2010.
[28] A. Albu-Sch¨ affer, C. Ott, U. Frese, and G. Hirzinger, “Cartesian
Impedance Control of Redundant Robots: Recent Results with the
DLR-Light-Weight-Arms,” in Proc. IEEE Int. Conf. on Robotics and
Automation, 2003, pp. 3704–3709.
[29] O. Khatib, “A Uniﬁed Approach for Motion and Force Control
of Robot Manipulators: The Operational Space Formulation,” IEEE
Journal of Robotics and Automation, vol. RA-3, no. 1, pp. 43–53,
February 1987.
[30] A.Dietrich,C.Ott,andA.Albu-Schaffer,“Multi-objectivecompliance
control of redundant manipulators: Hierarchy, control, and stability,”
in Proc. IEEE/RSJ Int. Conf. on Intelligent Robots and Systems, 2013,
pp. 3043–3050.
4568
